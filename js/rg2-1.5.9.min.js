// Version 1.5.9 2020-08-18T22:24:23+0300;

var rg2=function(a,b){"use strict";function c(){a.location.hash&&!rg2.config.managing?rg2.requestedHash.parseHash(a.location.hash):a.history.pushState({hash:"#"},"",""),rg2.getEvents(),setTimeout(function(){b("#rg2-container").show()},500)}function d(a){var b,c,d;return c=rg2.results.getResultsInfo(),d=rg2.courses.getCoursesForEvent(),b="<tr><td><strong>"+rg2.t("Courses")+"</strong></td><td>"+d.length+"</td>",b+="<td><strong>"+rg2.t("Controls")+"</strong></td><td>"+a+"</td>",b+="<td><strong>"+rg2.t("Results")+"</strong></td><td>"+c.results+"</td></tr>",b+="<tr><td><strong>"+rg2.t("Routes")+"</strong></td><td>"+c.totalroutes+" ("+c.percent+"%)</td>",b+="<td><strong>"+rg2.t("Drawn routes")+"</strong></td><td>"+c.drawnroutes+"</td>",b+="<td><strong>"+rg2.t("GPS routes")+"</strong></td><td>"+c.gpsroutes+"</td></tr>",b+="<tr><td><strong>"+rg2.t("Total time")+"</strong></td><td colspan='5'>"+c.time+"</td></tr>"}function e(a){var b,c;return c=rg2.getMapSize(),b="<tr><td><strong>"+rg2.t("Map")+"</strong></td><td colspan='5'>ID "+rg2.events.getActiveMapID(),b+=", "+c.width+" x "+c.height+" pixels",b+=a?". "+rg2.t("Map is georeferenced")+".</td></tr>":".</td></tr>"}function f(){var a,b,c,f;return f=rg2.events.getActiveEventID(),null===f?"<div>"+rg2.t("Select an event")+"</div>":(f=rg2.events.getKartatEventID(),c=rg2.events.getEventInfo(parseInt(f,10)),b=rg2.results.getComments(),a="<div class='about-stats'><table class='coursemenutable'><thead><tr><th colspan='6'><h2>"+rg2.t("Event statistics")+": "+c.name,a+=": "+c.date+"</h2></th></tr></thead><tbody>",a+=d(c.controls),c.comment&&(a+="<tr><td><strong>"+rg2.t("Comments")+"</strong></td><td colspan='5'>"+c.comment+"</td></tr>"),a+=e(c.worldfile.valid),a+="</tbody></table></div>",b&&(a+="<hr><div class='about-stats'><table class='coursemenutable'><thead><tr><th>"+rg2.t("Name")+"</th><th>"+rg2.t("Course")+"</th><th>"+rg2.t("Comments")+"</th></tr></thead><tbody>",a+=b+"</tbody></table></div>"),a=a.replace(/&amp;/g,"&"))}function g(){0!==b("#rg2-manage-login").length?(rg2.config.managing=!0,rg2.manager=new rg2.Manager(rg2Config.keksi),rg2.managerUI.initialiseUI()):rg2.config.managing=!1}function h(a){b("#rg2-event-ul > li").removeClass("rg2-active-event").filter("#event-"+a).addClass("rg2-active-event"),b("body").css("cursor","wait"),b("#rg2-load-progress-label").text(rg2.t("Loading courses")),b("#rg2-load-progress").show()}function i(a){n||(n=!0,h(a),rg2.courses.deleteAllCourses(),rg2.controls.deleteAllControls(),rg2.results.deleteAllResults(),rg2.events.setActiveEventID(a),rg2.animation.resetAnimation(),rg2.drawing.initialiseDrawing(rg2.events.hasResults(a)),rg2.loadNewMap(rg2Config.maps_url+rg2.events.getMapFileName()),rg2.ui.setTitleBar(),rg2.redraw(!1),rg2.getEvent(rg2.events.getKartatEventID()))}function j(){n=!1}function k(){rg2.events=new rg2.Events,rg2.courses=new rg2.Courses,rg2.colours=new rg2.Colours,rg2.results=new rg2.Results,rg2.controls=new rg2.Controls,rg2.animation=new rg2.Animation,rg2.drawing=new rg2.Draw,rg2.requestedHash=new rg2.RequestedHash,rg2.stats=new rg2.Stats}function l(){var b,c,d;rg2.config.managing||(b=rg2.requestedHash.parseHash(a.location.hash),b&&(c=rg2.events.getEventIDForKartatID(b),d=rg2.events.getActiveEventID(),void 0!==c&&d!==c&&rg2.loadEvent(c)))}function m(){b("#rg2-container").hide(),b.ajaxSetup({cache:!1,jsonp:!1}),rg2.loadConfigOptions(),rg2.ui.configureUI(),rg2.setLanguageOptions(),k(),g(),rg2.setUpCanvas(),a.onpopstate=l,c()}var n=!1;return{init:m,loadEvent:i,getEventStats:f,eventLoaded:j}}(window,window.jQuery);!function(){function a(){"use strict";this.runners=[],this.deltas=[100,200,500,1e3,2e3,3e3,5e3,7500,1e4,15e3,2e4,5e4,1e5],this.timerInterval=100,this.resetAnimation()}a.prototype={Constructor:a,resetAnimation:function(){this.units=rg2.events.getLengthUnits(),this.runners.length=0,clearInterval(this.timer),this.timer=null,this.animationSecs=0,this.milliSecs=0,this.deltaIndex=3,$("#rg2-animation-speed").empty().text("x "+this.deltas[this.deltaIndex]/100),this.realTime=!1,this.earliestStartSecs=0,this.latestFinishSecs=0,this.tailLength=60*rg2.config.DEFAULT_TAIL_LENGTH,this.tailStartTimeSecs=1,this.useFullTails=!1,this.massStartControl=0,this.massStartByControl=!1,this.displayNames=!0,this.displayInitials=!1,this.updateAnimationDetails(),$("#btn-start-stop").removeClass("fa-pause").addClass("fa-play").prop("title",rg2.t("Run")),$("#btn-real-time").removeClass().addClass("fa fa-users").prop("title",rg2.t("Real time")),$("#btn-toggle-names").prop("title",rg2.t("Show initials"))},animateRunners:function(a,b){var c;for(c=0;c<a.length;c+=1)b?this.addRunner(new rg2.Runner(a[c]),!1):this.removeRunner(a[c],!1);this.updateAnimationDetails()},addRunner:function(a,b){var c;for(c=0;c<this.runners.length;c+=1)if(this.runners[c].runnerid===a.runnerid)return;this.runners.push(a),b&&this.updateAnimationDetails()},updateAnimationDetails:function(){var a;this.runners.length>0?(a=this.getAnimationNames(this.animationSecs),$("#rg2-track-names").empty().append(a).show(),$("#rg2-animation-controls").show()):($("#rg2-track-names").empty().hide(),$("#rg2-animation-controls").hide()),this.calculateAnimationRange(!0),$("#rg2-clock").text(rg2.utils.formatSecsAsHHMMSS(this.animationSecs))},updateNameDetails:function(a){var b=this.getAnimationNames(a);""!==b?$("#rg2-track-names").empty().append(b).show():$("#rg2-track-names").empty().hide()},clockSliderMoved:function(a){this.resetAnimationTime(a),rg2.redraw(!1)},getAnimationNames:function(a){var b,c,d,e,f;for(d=rg2.results.getDisplayedTrackDetails(),c="",b=0;b<this.runners.length;b+=1)e={},e.colour=this.runners[b].colour,e.course=this.runners[b].coursename,e.name=this.runners[b].name.trim(),this.realTime?e.distance=this.getDistanceAtTime(b,this.animationSecs-this.runners[b].starttime):e.distance=this.getDistanceAtTime(b,a),d.push(e);if(0===d.length)return"";for(b=0;b<d.length;b+=1)d[b].index=b;for(d.sort(function(a,b){return a.course!==b.course?a.course>b.course?1:-1:a.index>b.index?1:a.index<b.index?-1:0}),c="<table>",f="",b=0;b<d.length;b+=1)f!==d[b].course&&(c+="<tr><th colspan='3'>"+d[b].course+"</th></tr>",f=d[b].course),c+="<tr><td style='color:"+d[b].colour+";'><i class='fa fa-circle'></i></td><td class='align-left'>"+d[b].name+"</td>",c+=d[b].hasOwnProperty("distance")?"<td class='align-right'>"+d[b].distance+this.units:"<td>",c+="</td></tr>";return c+="</table>"},getDistanceAtTime:function(a,b){var c,d;return d=this.runners[a].cumulativeDistance,c=b>d.length-1?d[d.length-1]:d[b],void 0===c&&(c=0),c},getMaxControls:function(){var a,b;for(a=0,b=0;b<this.runners.length;b+=1)a=Math.max(a,this.runners[b].splits.length);return a-2},getSplitsTableHeader:function(a){var b,c;for(b="<table class='splitstable'><tr><th>"+rg2.t("Course")+"</th><th>"+rg2.t("Name")+"</th>",c=1;c<=a;c+=1)b+="<th>"+c+"</th>";return b+"<th>F</th></tr>"},getSplitsTable:function(){var a,b,c,d,e,f,g;if(this.runners.length<1)return"<p>"+rg2.t("Select runners on Results tab")+".</p>";for(f=[],g=0,e=this.getMaxControls(),a=this.getSplitsTableHeader(e),b=0;b<this.runners.length;b+=1){for(d=this.runners[b],g=0,a+="<tr class='splitsname-row'><td>"+d.coursename+"</td><td>"+d.name+"</td>",c=1;c<d.splits.length;c+=1)a+="<td>"+rg2.utils.formatSecsAsMMSS(d.splits[c])+"</td>",f[c]=d.splits[c]-g,g=d.splits[c];for(a+="</tr><tr class='splitstime-row'><td></td><td></td>",c=1;c<d.splits.length;c+=1)a+="<td>"+rg2.utils.formatSecsAsMMSS(f[c])+"</td>";for(a+=isNaN(d.cumulativeTrackDistance[d.cumulativeTrackDistance.length-1])?"</tr><tr class='splitsdistance-row'><td></td><td>--</td>":"</tr><tr class='splitsdistance-row'><td></td><td>"+d.cumulativeTrackDistance[d.cumulativeTrackDistance.length-1]+" "+this.units+"</td>",c=1;c<d.splits.length;c+=1)a+=isNaN(d.legTrackDistance[c])?"<td>--</td>":"<td>"+d.legTrackDistance[c]+"</td>"}return a+="</tr></table>"},removeRunner:function(a,b){var c;for(c=0;c<this.runners.length;c+=1)this.runners[c].runnerid===a&&this.runners.splice(c,1);b&&this.updateAnimationDetails()},toggleAnimation:function(){null===this.timer?this.startAnimation():this.stopAnimation()},startAnimation:function(){null===this.timer&&(this.timer=setInterval(this.timerExpired.bind(this),this.timerInterval)),$("#btn-start-stop").removeClass("fa-play").addClass("fa-pause").prop("title",rg2.t("Pause"))},calculateAnimationRange:function(a){var b,c,d;for(this.earliestStartSecs=86400,this.latestFinishSecs=0,this.slowestTimeSecs=0,d=this.useFullTails?0:this.tailLength,b=0;b<this.runners.length;b+=1)this.runners[b].starttime<this.earliestStartSecs&&(this.earliestStartSecs=this.runners[b].starttime),c=this.realTime?this.runners[b].starttime:0===this.massStartControl||this.runners[b].splits.length<this.massStartControl?0:-1*this.runners[b].splits[this.massStartControl],this.runners[b].starttime+this.runners[b].x.length+d+c>this.latestFinishSecs&&(this.latestFinishSecs=this.runners[b].starttime+this.runners[b].x.length+d+c),this.runners[b].x.length+d+c>this.slowestTimeSecs&&(this.slowestTimeSecs=this.runners[b].x.length+d+c);a?this.resetAnimationTime(0):this.updateSlider()},stopAnimation:function(){clearInterval(this.timer),this.timer=null,$("#btn-start-stop").removeClass("fa-pause").addClass("fa-play").prop("title",rg2.t("Run"))},timerExpired:function(){rg2.redraw(!0)},setFullTails:function(a){a?this.useFullTails=!0:this.useFullTails=!1,this.calculateAnimationRange(!1),rg2.redraw(!1)},setTailLength:function(a){this.tailLength=60*a,this.calculateAnimationRange(!1),rg2.redraw(!1)},setStartControl:function(a){var b;if(this.massStartControl=parseInt(a,10),this.massStartControl===rg2.config.MASS_START_BY_CONTROL)for(this.massStartControl=0,this.massStartByControl=!0,b=0;b<this.runners.length;b+=1)this.runners[b].nextStopTime=this.runners[b].splits[1];else for(this.massStartByControl=!1,b=0;b<this.runners.length;b+=1)this.runners[b].nextStopTime=rg2.config.VERY_HIGH_TIME_IN_SECS;this.calculateAnimationRange(!0),rg2.redraw(!1)},setReplayType:function(){this.realTime?(this.realTime=!1,$("#btn-real-time").removeClass().addClass("fa fa-users").prop("title",rg2.t("Real time")),rg2.courses.getHighestControlNumber()>0&&$("#rg2-control-select").prop("disabled",!1)):(this.realTime=!0,$("#btn-real-time").removeClass().addClass("fa fa-clock").prop("title",rg2.t("Mass start")),$("#rg2-control-select").prop("disabled",!0)),this.resetAnimationTime(0)},resetAnimationTime:function(a){this.realTime?(a>0?this.animationSecs=a:this.animationSecs=this.earliestStartSecs,this.startSecs=this.earliestStartSecs,$("#rg2-clock-slider").slider("option","max",this.latestFinishSecs),$("#rg2-clock-slider").slider("option","min",this.earliestStartSecs)):(a>0?this.animationSecs=a:this.animationSecs=0,this.startSecs=0,$("#rg2-clock-slider").slider("option","max",this.slowestTimeSecs),$("#rg2-clock-slider").slider("option","min",0)),this.milliSecs=1e3*this.animationSecs,$("#rg2-clock-slider").slider("value",this.animationSecs),$("#rg2-clock").text(rg2.utils.formatSecsAsHHMMSS(this.animationSecs))},updateSlider:function(){this.realTime?($("#rg2-clock-slider").slider("option","max",this.latestFinishSecs),$("#rg2-clock-slider").slider("option","min",this.earliestStartSecs)):($("#rg2-clock-slider").slider("option","max",this.slowestTimeSecs),$("#rg2-clock-slider").slider("option","min",0))},toggleNameDisplay:function(){var a="";this.displayNames?this.displayInitials?(this.displayNames=!1,this.displayInitials=!1,a="Show names"):(this.displayInitials=!0,a="Hide names"):(this.displayNames=!0,a="Show initials"),$("#btn-toggle-names").prop("title",rg2.t(a))},displayName:function(a,b){var c;this.displayNames&&b<a.x.length&&b>=0&&(rg2.ctx.fillStyle="black",rg2.ctx.font=rg2.options.replayFontSize+"pt Arial",rg2.ctx.globalAlpha=rg2.config.FULL_INTENSITY,rg2.ctx.textAlign="left",rg2.ctx.textBaseline="middle",c=this.displayInitials?a.initials:a.name,rg2.ctx.save(),rg2.ctx.translate(a.x[b],a.y[b]),rg2.ctx.rotate(rg2.ctx.displayAngle),rg2.ctx.fillText(c,Math.round(2+rg2.config.RUNNER_DOT_RADIUS*rg2.options.routeWidth/4+rg2.options.routeWidth),1),rg2.ctx.restore())},incrementAnimationTime:function(a){a&&(this.realTime?this.animationSecs<this.latestFinishSecs&&(this.milliSecs+=this.deltas[this.deltaIndex]):this.animationSecs<this.slowestTimeSecs&&(this.milliSecs+=this.deltas[this.deltaIndex])),this.animationSecs=parseInt(this.milliSecs/1e3,10),this.useFullTails?this.tailStartTimeSecs=this.startSecs+1:this.tailStartTimeSecs=Math.max(this.animationSecs-this.tailLength,this.startSecs+1)},drawAnimation:function(){var a,b,c,d,e;if($("#rg2-clock-slider").slider("value",this.animationSecs),$("#rg2-clock").text(rg2.utils.formatSecsAsHHMMSS(this.animationSecs)),rg2.ctx.lineCap="round",rg2.ctx.lineJoin="round",rg2.ctx.lineWidth=rg2.options.routeWidth,e=0,this.useFullTails||this.tailLength>0)for(c=0;c<this.runners.length;c+=1)if(a=this.runners[c],b=this.realTime?a.starttime:0===this.massStartControl||a.splits.length<this.massStartControl?0:-1*a.splits[this.massStartControl],a.x.length>this.tailStartTimeSecs-b&&this.animationSecs-b>=0&&this.tailStartTimeSecs<this.animationSecs){for(rg2.ctx.beginPath(),rg2.ctx.strokeStyle=a.colour,rg2.ctx.globalAlpha=rg2.options.routeIntensity,rg2.ctx.moveTo(a.x[this.tailStartTimeSecs-b],a.y[this.tailStartTimeSecs-b]),d=this.tailStartTimeSecs;d<this.animationSecs;d+=1)d>b&&d-b<a.nextStopTime&&d-b<a.x.length&&(this.useFullTails||(e=1),rg2.ctx.lineTo(a.x[d-b],a.y[d-b]));rg2.ctx.stroke()}for(c=0;c<this.runners.length;c+=1)a=this.runners[c],b=this.realTime?a.starttime:0===this.massStartControl||a.splits.length<this.massStartControl?0:-1*a.splits[this.massStartControl],d=this.animationSecs,d-b<a.nextStopTime?d-=b:d=a.nextStopTime,d<a.x.length&&(rg2.ctx.beginPath(),rg2.ctx.globalAlpha=rg2.config.FULL_INTENSITY,rg2.ctx.strokeStyle=rg2.config.BLACK,rg2.ctx.arc(a.x[d],a.y[d],rg2.config.RUNNER_DOT_RADIUS*rg2.options.routeWidth/4,0,2*Math.PI,!1),rg2.ctx.stroke(),rg2.ctx.fillStyle=a.colour,rg2.ctx.fill(),this.displayName(a,d),e=1);this.updateNameDetails(d),null!==this.timer&&0===e?(this.stopAnimation(),this.resetAnimationTime(0),rg2.redraw(!1)):this.massStartByControl&&this.checkForStopControl(this.animationSecs)},checkForStopControl:function(a){var b,c,d;for(d=!0,b=0;b<this.runners.length;b+=1)if(c=this.runners[b].splits[this.massStartControl+1]-this.runners[b].splits[this.massStartControl],c>a){d=!1;break}if(d){for(this.massStartControl+=1,b=0;b<this.runners.length;b+=1)this.massStartControl<this.runners[b].splits.length?this.runners[b].nextStopTime=this.runners[b].splits[this.massStartControl+1]:this.runners[b].nextStopTime=rg2.config.VERY_HIGH_TIME_IN_SECS;this.resetAnimationTime(0)}},goSlower:function(){this.deltaIndex>0&&(this.deltaIndex-=1),$("#rg2-animation-speed").empty().text("x "+this.deltas[this.deltaIndex]/100)},goFaster:function(){this.deltaIndex<this.deltas.length-1&&(this.deltaIndex+=1),$("#rg2-animation-speed").empty().text("x "+this.deltas[this.deltaIndex]/100)}},rg2.Animation=a}(),function(){function a(a){$("#rg2-map-load-progress-label").text(rg2.t("Loading map")),$("#rg2-map-load-progress").show(),s.src=a}function b(){rg2.config.managing||(r.font="30pt Arial",r.textAlign="center",r.fillStyle=rg2.config.BLACK,r.fillText(rg2.t("Select an event"),0,0))}function c(a){if(r.save(),r.setTransform(1,0,0,1,0,0),r.globalAlpha=rg2.config.FULL_INTENSITY,r.fillStyle=rg2.config.GREY,r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore(),s.height>0){r.fillStyle=rg2.config.WHITE,r.globalAlpha=rg2.config.FULL_INTENSITY,r.fillRect(0,0,s.width,s.height),r.globalAlpha=rg2.options.mapIntensity,r.drawImage(s,0,0);var c=$("#rg2-info-panel").tabs("option","active");c===rg2.config.TAB_DRAW?(rg2.courses.drawCourses(rg2.config.DIM),rg2.controls.drawControls(!1),rg2.results.drawTracks(),rg2.drawing.drawNewTrack()):c===rg2.config.TAB_CREATE?rg2.manager.drawControls():(rg2.courses.drawCourses(rg2.config.DIM),rg2.results.drawTracks(),rg2.controls.drawControls(!1),rg2.animation.incrementAnimationTime(a),rg2.animation.drawAnimation())}else b()}function d(a,b,d,e){var f,g,h,i;r.displayAngle=(r.displayAngle-a)%(2*Math.PI),r.translate(b,d),r.rotate(a),e?(g=rg2.input.infoPanelMaximised&&window.innerWidth>=rg2.config.SMALL_SCREEN_BREAK_POINT?$("#rg2-info-panel").outerWidth():0,h=g+(q.width-g)/2,i=.9*q.height,f=r.transformedPoint(h,i),r.translate(f.x-b,f.y-d),rg2.input.lastX=h,rg2.input.lastY=i):r.translate(-1*b,-1*d),r.save(),c(!1)}function e(a){var b,c;b=a*(Math.PI/36),c=r.transformedPoint(rg2.input.lastX,rg2.input.lastY),d(b,c.x,c.y,!1)}function f(a,b,c){d((r.displayAngle-a)%(2*Math.PI),b,c,!0)}function g(){var a,b,d,e;b=q.height/s.height,e=rg2.input.infoPanelMaximised&&window.innerWidth>=rg2.config.SMALL_SCREEN_BREAK_POINT?$("#rg2-info-panel").outerWidth():0,d=(q.width-e)/s.width,rg2.input.lastX=e+(q.width-e)/2,rg2.input.lastY=q.height/2,rg2.input.zoomSize=1,rg2.input.dragStart=null,rg2.input.dragged=!0,a=b<1&&b<d?b:d<1&&d<b?d:1,r.setTransform(a,0,0,a,.5*e+.5*q.width-a*s.width*.5,.5*q.height-a*s.height*.5),r.displayAngle=0,r.save(),c(!1)}function h(a,b,c){var d,e;rg2.input.infoPanelMaximised=a,$("#rg2-resize-info").prop("title",rg2.t(b)),$("#rg2-hide-info-panel-control").css("left",c),a?($("#rg2-info-panel").show(),d="fa-chevron-right",e="fa-chevron-left"):($("#rg2-info-panel").hide(),d="fa-chevron-left",e="fa-chevron-right"),$("#rg2-hide-info-panel-icon").removeClass(d).addClass(e).prop("title",rg2.t(b))}function i(){rg2.input.infoPanelMaximised?h(!1,"Show info panel","0px"):h(!0,"Hide info panel","360px")}function j(a){var b,d,e;d=Math.pow(rg2.input.scaleFactor,a),e=rg2.input.zoomSize*d,e<50&&e>.05&&(rg2.input.zoomSize=e,b=r.transformedPoint(rg2.input.lastX,rg2.input.lastY),r.translate(b.x,b.y),r.scale(d,d),r.translate(-b.x,-b.y),r.save(),c(!1))}function k(a){var b,c,d,e,f,g,h,i,j,k;c=document.createElementNS("http://www.w3.org/2000/svg","svg"),b=c.createSVGMatrix(),d=[],e=a.save,a.save=function(){return d.push(b.translate(0,0)),e.call(a)},f=a.restore,a.restore=function(){return b=d.pop(),f.call(a)},g=a.scale,a.scale=function(c,d){return b=b.scaleNonUniform(c,d),g.call(a,c,d)},h=a.translate,a.translate=function(c,d){return b=b.translate(c,d),h.call(a,c,d)},i=a.setTransform,a.setTransform=function(c,d,e,f,g,h){return b.a=c,b.b=d,b.c=e,b.d=f,b.e=g,b.f=h,i.call(a,c,d,e,f,g,h)},j=c.createSVGPoint(),a.transformedPoint=function(a,c){return j.x=a,j.y=c,j.matrixTransform(b.inverse())},k=a.rotate,a.rotate=function(c){return b=b.rotate(180*c/Math.PI),k.call(a,c)}}function l(){return{height:s.height,width:s.width}}function m(){rg2.input.scaleFactor=rg2.config.DEFAULT_SCALE_FACTOR;var a,b;a=$("#rg2-header-container").height()+4,b="border-box"===$("#rg2-info-panel").css("box-sizing")?0:8,$("#rg2-container").css("height",window.innerHeight-a),$("#rg2-info-panel").css("height",window.innerHeight-a-b),$("#rg2-info-panel-tab-body").css("height",window.innerHeight-a-b-8-38),q.width=window.innerWidth,q.height=window.innerHeight-a,rg2.ui.setTitleBar(),g()}function n(){$("#rg2-map-load-progress").hide(),g(),rg2.config.managing&&rg2.manager.mapLoadCallback()}function o(){q.addEventListener("touchstart",rg2.handleTouchStart,!1),q.addEventListener("touchmove",rg2.handleTouchMove,!1),q.addEventListener("touchend",rg2.handleTouchEnd,!1),q.addEventListener("DOMMouseScroll",rg2.handleScroll,!1),q.addEventListener("mousewheel",rg2.handleScroll,!1),q.addEventListener("mousedown",rg2.handleMouseDown,!1),q.addEventListener("mousemove",rg2.handleMouseMove,!1),q.addEventListener("mouseup",rg2.handleMouseUp,!1),window.addEventListener("resize",m,!1),s.addEventListener("load",function(){n()},!1)}function p(){o(),k(r),m()}var q,r,s;q=$("#rg2-map-canvas")[0],r=q.getContext("2d"),s=new Image,r.displayAngle=0,rg2.zoom=j,rg2.rotateMap=e,rg2.alignMap=f,rg2.redraw=c,rg2.canvas=q,rg2.setUpCanvas=p,rg2.ctx=r,rg2.addListeners=o,rg2.resetMapState=g,rg2.getMapSize=l,rg2.loadNewMap=a,rg2.resizeInfoDisplay=i}(),function(){function a(a){return t.hasOwnProperty(a)?$("<div/>").html(t[a]).text():$("<div/>").html(a).text()}function b(a,b){a.contents().filter(function(){3===this.nodeType&&(this.nodeValue=b)})}function c(){var c,d,e;for(d=["#rg2-events-tab a","#rg2-courses-tab a","#rg2-results-tab a","#rg2-draw-tab a","#rg2-draw-title","#draw-text-1","#draw-text-2","#draw-text-3","#draw-text-4","#draw-text-5","#rg2-load-gps-title",".rg2-options-dialog .ui-dialog-title","#rg2-draw-help","#rg2-draw-options"],e=["Events","Courses","Results","Draw","Draw route","Left click to add/lock/unlock a handle","Green - draggable","Red - locked","Right click to delete a handle","Drag a handle to adjust track around locked point(s)","Load GPS file (GPX or TCX)","Configuration options","Help","Options"],c=0;c<d.length;c+=1)b($(d[c]),a(e[c]))}function d(){var b,c,d;for(c=["#rg2-hide-info-panel-icon","#btn-about","#btn-options","#btn-zoom-out","#btn-zoom-in","#btn-reset","#btn-show-splits","#rg2-splits-table","#btn-slower","#btn-faster","#btn-rotate-right","#btn-rotate-left","#btn-stats"],d=["Hide info panel","Help","Options","Zoom out","Zoom in","Reset","Splits","Splits table","Slower","Faster","Rotate right","Rotate left","Statistics"],b=0;b<c.length;b+=1)$(c[b]).prop("title",a(d[b]))}function e(){var b,c,d;for(c=["label[for=rg2-control-select]","label[for=btn-full-tails]","label[for=spn-tail-length]","label[for=rg2-select-language]","label[for=spn-map-intensity]","label[for=spn-route-intensity]","label[for=spn-route-width]","label[for=spn-name-font-size]","label[for=spn-course-width]","label[for=spn-control-circle]","label[for=chk-snap-toggle]","label[for=chk-show-three-seconds]","label[for=chk-show-GPS-speed]","label[for=rg2-course-select]","label[for=rg2-name-select]","label[for=rg2-name]","label[for=rg2-time]","label[for=btn-move-all]","label[for=btn-align-map]"],d=["Start at","Full tails","Length","Language","Map intensity %","Route intensity %","Route width","Replay label font size","Course overprint width","Control circle size","Snap to control when drawing","Show +3 time loss for GPS routes","Show GPS speed colours","Select course","Select name","Enter name","Enter time (mm&colon;ss)","Move track and map together (or right click-drag)","Align map to next control"],b=0;b<c.length;b+=1)$(c[b]).prop("textContent",a(d[b]))}function f(){var b,c,d;for(c=["#btn-undo","#btn-undo-gps-adjust","#btn-save-route","#btn-reset-drawing","#btn-three-seconds","#btn-save-gps-route","#btn-autofit-gps"],d=["Undo","Undo","Save","Reset","+3 sec","Save GPS route","Autofit"],b=0;b<c.length;b+=1)$(c[b]).button("option","label",a(d[b]))}function g(){c(),d(),e(),f(),$("#btn-toggle-controls").hasClass("fa-circle-o")?$("#btn-toggle-controls").prop("title",a("Show controls")):$("#btn-toggle-controls").prop("title",a("Hide controls"))}function h(a){var b,c,d;for($("#rg2-select-language").empty(),d=document.getElementById("rg2-select-language"),c="en"===t.code,d.options.add(rg2.utils.generateOption("en","en: English",c)),b=0;b<a.length;b+=1)c=t.code===a[b].code,d.options.add(rg2.utils.generateOption(a[b].code,a[b].code+": "+a[b].language,c))}function i(){return t.code}function j(a){t=a,g()}function k(){t={},t.code="en","en"!==rg2Config.start_language&&(rg2.getNewLanguage(rg2Config.start_language),t.code=rg2Config.start_language),rg2.createLanguageDropdown(rg2.config.languages)}function l(a,b){this.options[a]=b}function m(a){var b;b=this.options.drawnRoutes,b.length>=rg2.config.MAX_DRAWN_ROUTES&&b.shift(),b.push(a),this.options.drawnRoutes=b,this.saveConfigOptions()}function n(a){var b,c;for(b=[],c=0;c<this.options.drawnRoutes.length;c+=1)this.options.drawnRoutes[c].id===a.id&&this.options.drawnRoutes[c].eventid===a.eventid||b.push(this.options.drawnRoutes[c]);this.options.drawnRoutes=b,this.saveConfigOptions()}function o(){try{window.hasOwnProperty("localStorage")&&null!==window.localStorage&&localStorage.setItem("rg2-options",JSON.stringify(this.options))}catch(a){return}}function p(){try{var a,b;if(window.hasOwnProperty("localStorage")&&null!==window.localStorage&&null!==localStorage.getItem("rg2-options")){b=JSON.parse(localStorage.getItem("rg2-options"));for(a in b)b.hasOwnProperty(a)&&(this.options[a]=b[a]);this.options.circleSize=20,0===this.options.mapIntensity&&rg2.utils.showWarningDialog("Warning","Your saved settings have 0% map intensity so the map is invisible. You can adjust this on the configuration menu")}}catch(a){console.log("Local storage not supported")}}function q(){var a,b,c,d;return a={},b=rg2.getMapSize(),c=Math.pow(Math.min(b.height,b.width)/1500,.5),c=Math.min(c,5),c=Math.max(c,.5),d=Math.round(rg2.options.circleSize*c),a.controlRadius=d,a.finishInnerRadius=d*(5/6),a.finishOuterRadius=d*(7/6),a.startTriangleLength=d*(7/6),a.overprintWidth=this.options.courseWidth,a.font=d+"pt Arial",a}var r,s,t;r={DEFAULT_SCALE_FACTOR:1.1,TAB_EVENTS:0,TAB_COURSES:1,TAB_RESULTS:2,TAB_DRAW:3,TAB_LOGIN:4,TAB_CREATE:5,TAB_EDIT:6,TAB_MAP:7,INVALID_MAP_ID:9999,DEFAULT_NEW_COMMENT:"Type your comment",DEFAULT_EVENT_COMMENT:"Comments (optional)",GPS_RESULT_OFFSET:5e4,MASS_START_REPLAY:1,REAL_TIME_REPLAY:2,DEFAULT_TAIL_LENGTH:2,MASS_START_BY_CONTROL:99999,VERY_HIGH_TIME_IN_SECS:99999,BIG_SCREEN_BREAK_POINT:800,SMALL_SCREEN_BREAK_POINT:640,PURPLE:"#b300ff",RED:"#ff0000",GREEN:"#00ff00",GREY:"#e0e0e0",RED_30:"rgba(255,0,0,0.3)",GREEN_30:"rgba(0,255,0,0.3)",WHITE:"#ffffff",BLACK:"#000000",RUNNER_DOT_RADIUS:6,HANDLE_DOT_RADIUS:7,HANDLE_COLOUR:"#ff0000",DIM:.75,FULL_INTENSITY:1,NORMAL_EVENT:1,EVENT_WITHOUT_RESULTS:2,SCORE_EVENT:3,RG2VERSION:"1.5.9",TIME_NOT_FOUND:9999,RIGHT_CLICK:3,DO_NOT_SAVE_COURSE:9999,FORMAT_NORMAL:1,FORMAT_NO_RESULTS:2,FORMAT_SCORE_EVENT:3,DISPLAY_ALL_COURSES:99999,MAX_DRAWN_ROUTES:10,languages:[{language:"Deutsch",code:"de"},{language:"Suomi",code:"fi"},{language:"Français",code:"fr"},{language:"Italiano",code:"it"},{language:"日本語",code:"ja"},{language:"Norsk",code:"no"},{language:"Português - Brasil",code:"pt"},{language:"Русский",code:"ru"}],FILE_SIZE_WARNING:2},s={mapIntensity:1,routeIntensity:1,replayFontSize:12,courseWidth:3,routeWidth:4,circleSize:20,snap:!0,showThreeSeconds:!1,showGPSSpeed:!1,alignMap:!1,maxSpeed:4,minSpeed:15,drawnRoutes:[]},rg2.t=a,rg2.options=s,rg2.config=r,rg2.saveConfigOptions=o,rg2.saveDrawnRouteDetails=m,rg2.removeDrawnRouteDetails=n,rg2.setConfigOption=l,rg2.loadConfigOptions=p,rg2.getOverprintDetails=q,rg2.setDictionary=j,rg2.getDictionaryCode=i,rg2.setLanguageOptions=k,rg2.createLanguageDropdown=h}(),function(){function a(a,b,c){this.code=a,this.x=b,this.y=c}a.prototype={Constructor:a},rg2.Control=a}(),function(){function a(){this.controls=[],this.displayControls=!1}a.prototype={Constructor:a,addControl:function(a,b,c){var d,e;for(e=!0,d=0;d<this.controls.length;d+=1)if(this.controls[d].code===a){e=!1;break}e&&this.controls.push(new rg2.Control(a,b,c))},deleteAllControls:function(){this.controls.length=0},drawControls:function(a){var b,c,d;if(this.displayControls)for(d=rg2.getOverprintDetails(),c=this.controls.length,b=0;b<c;b+=1)0===this.controls[b].code.indexOf("F")||0===this.controls[b].code.indexOf("M")?this.drawFinish(this.controls[b].x,this.controls[b].y,this.controls[b].code,d):0===this.controls[b].code.indexOf("S")?this.drawStart(this.controls[b].x,this.controls[b].y,this.controls[b].code,1.5*Math.PI,d):(this.drawSingleControl(this.controls[b].x,this.controls[b].y,this.controls[b].code,.25*Math.PI,d),a&&rg2.ctx.fillRect(this.controls[b].x-1,this.controls[b].y-1,3,3))},drawSingleControl:function(a,b,c,d,e){var f,g,h,i;rg2.ctx.beginPath(),rg2.ctx.lineCap="round",rg2.ctx.lineJoin="miter",rg2.ctx.strokeStyle="white",rg2.ctx.lineWidth=e.overprintWidth+2,rg2.ctx.arc(a,b,e.controlRadius,0,2*Math.PI,!1),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.textAlign="center",rg2.ctx.font=e.font,rg2.ctx.strokeStyle="white",rg2.ctx.miterLimit=2,rg2.ctx.lineWidth=1.5,rg2.ctx.textBaseline="middle",g=rg2.ctx.measureText(c),h=d<Math.PI?g.width/2:-1*g.width/2,i=d>=Math.PI/2&&d<=1.5*Math.PI?-1*e.controlRadius/2:e.controlRadius/2,f=1.3,rg2.ctx.strokeText(c,a+e.controlRadius*f*Math.sin(d)+h,b+e.controlRadius*f*Math.cos(d)+i),rg2.ctx.beginPath(),rg2.ctx.font=e.font,rg2.ctx.fillStyle=rg2.config.PURPLE,rg2.ctx.strokeStyle=rg2.config.PURPLE,rg2.ctx.lineWidth=e.overprintWidth,rg2.ctx.arc(a,b,e.controlRadius,0,2*Math.PI,!1),rg2.ctx.fillText(c,a+e.controlRadius*f*Math.sin(d)+h,b+e.controlRadius*f*Math.cos(d)+i),rg2.ctx.stroke()},drawFinish:function(a,b,c,d){rg2.ctx.lineCap="round",rg2.ctx.lineJoin="miter",rg2.ctx.strokeStyle="white",rg2.ctx.lineWidth=d.overprintWidth+2,rg2.ctx.beginPath(),rg2.ctx.arc(a,b,d.finishInnerRadius,0,2*Math.PI,!1),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.arc(a,b,d.finishOuterRadius,0,2*Math.PI,!1),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.font=d.font,rg2.ctx.textAlign="left",rg2.ctx.strokeStyle="white",rg2.ctx.miterLimit=2,rg2.ctx.lineWidth=1.5,rg2.ctx.strokeText(c,a+1.5*d.controlRadius,b+d.controlRadius),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.fillStyle=rg2.config.PURPLE,rg2.ctx.strokeStyle=rg2.config.PURPLE,rg2.ctx.lineWidth=d.overprintWidth,rg2.ctx.arc(a,b,d.finishInnerRadius,0,2*Math.PI,!1),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.arc(a,b,d.finishOuterRadius,0,2*Math.PI,!1),rg2.ctx.fillText(c,a+1.5*d.controlRadius,b+d.controlRadius),rg2.ctx.stroke()},drawStart:function(a,b,c,d,e){var f,g,h;f=[],g=[],h=2*Math.PI/3,d+=Math.PI/2,rg2.ctx.lineCap="round",rg2.ctx.lineJoin="round",rg2.ctx.strokeStyle="white",rg2.ctx.lineWidth=e.overprintWidth+2,rg2.ctx.beginPath(),f[0]=a+e.startTriangleLength*Math.sin(d),g[0]=b-e.startTriangleLength*Math.cos(d),rg2.ctx.moveTo(f[0],g[0]),f[1]=a+e.startTriangleLength*Math.sin(d+h),g[1]=b-e.startTriangleLength*Math.cos(d+h),rg2.ctx.lineTo(f[1],g[1]),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.moveTo(f[1],g[1]),f[2]=a+e.startTriangleLength*Math.sin(d-h),g[2]=b-e.startTriangleLength*Math.cos(d-h),rg2.ctx.lineTo(f[2],g[2]),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.moveTo(f[2],g[2]),rg2.ctx.lineTo(f[0],g[0]),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.font=e.font,rg2.ctx.textAlign="left",rg2.ctx.strokeStyle="white",rg2.ctx.miterLimit=2,rg2.ctx.lineJoin="round",rg2.ctx.lineWidth=1.5,rg2.ctx.strokeText(c,f[0]+1.25*e.controlRadius,g[0]+1.25*e.controlRadius),rg2.ctx.stroke(),rg2.ctx.strokeStyle=rg2.config.PURPLE,rg2.ctx.lineWidth=e.overprintWidth,rg2.ctx.font=e.font,rg2.ctx.fillStyle=rg2.config.PURPLE,rg2.ctx.beginPath(),rg2.ctx.moveTo(f[0],g[0]),rg2.ctx.lineTo(f[1],g[1]),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.moveTo(f[1],g[1]),rg2.ctx.lineTo(f[2],g[2]),rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.moveTo(f[2],g[2]),rg2.ctx.lineTo(f[0],g[0]),rg2.ctx.fillText(c,f[0]+1.25*e.controlRadius,g[0]+1.25*e.controlRadius),rg2.ctx.stroke()},toggleControlDisplay:function(){this.displayControls?($("#btn-toggle-controls").removeClass("fa-ban").addClass("fa-circle-o"),$("#btn-toggle-controls").prop("title",rg2.t("Show controls"))):($("#btn-toggle-controls").removeClass("fa-circle-o").addClass("fa-ban"),$("#btn-toggle-controls").prop("title",rg2.t("Hide controls"))),this.displayControls=!this.displayControls},displayAllControls:function(){this.displayControls=!0},getControlCount:function(){return this.controls.length}},rg2.Controls=a}(),function(){function a(a,b,c){this.name=a.name,this.trackcount=0,this.display=!1,this.courseid=a.courseid,this.codes=a.codes,this.x=a.xpos,this.y=a.ypos,this.isScoreCourse=b,this.isLiveCourse=c,this.resultcount=0,this.angle=[],this.textAngle=[],this.setAngles(),this.length=this.setLength()}a.prototype={Constructor:a,incrementTracksCount:function(){this.trackcount+=1},setLength:function(){var a,b,c;if(b=0,c=rg2.events.getMetresPerPixel(),void 0!==c&&!this.isScoreCourse){for(a=1;a<this.x.length;a+=1)b+=rg2.utils.getDistanceBetweenPoints(this.x[a],this.y[a],this.x[a-1],this.y[a-1]);return 0===b?void 0:(b*c/1e3).toFixed(1)}},setAngles:function(){var a,b,c,d,e,f,g;for(a=0;a<this.x.length-1;a+=1)this.isScoreCourse?(this.angle[a]=1.5*Math.PI,this.textAngle[a]=.25*Math.PI):(this.angle[a]=rg2.utils.getAngle(this.x[a],this.y[a],this.x[a+1],this.y[a+1]),
b=Math.sin(this.angle[a-1]),c=Math.cos(this.angle[a-1]),d=Math.sin(this.angle[a])+b,e=Math.cos(this.angle[a])+c,f=d/2,g=e/2,this.textAngle[a]=rg2.utils.getAngle(f,g,b,c));this.angle[this.x.length-1]=1.5*Math.PI,this.textAngle[this.x.length-1]=1.5*Math.PI},drawCourse:function(a){var b,c;if(this.display)if(c=rg2.getOverprintDetails(),rg2.ctx.globalAlpha=a,rg2.controls.drawStart(this.x[0],this.y[0],"",this.angle[0],c),this.isScoreCourse||this.isLiveCourse||this.drawLinesBetweenControls({x:this.x,y:this.y},this.angle,c),this.isScoreCourse)for(b=1;b<this.x.length;b+=1)0===this.codes[b].indexOf("F")||0===this.codes[b].indexOf("M")?rg2.controls.drawFinish(this.x[b],this.y[b],"",c):rg2.controls.drawSingleControl(this.x[b],this.y[b],this.codes[b],this.textAngle[b],c);else{for(b=1;b<this.x.length-1;b+=1)this.isLiveCourse?rg2.controls.drawSingleControl(this.x[b],this.y[b],this.codes[b],this.textAngle[b],c):rg2.controls.drawSingleControl(this.x[b],this.y[b],b,this.textAngle[b],c);rg2.controls.drawFinish(this.x[this.x.length-1],this.y[this.y.length-1],"",c)}},drawLinesBetweenControls:function(a,b,c){var d,e,f,g,h,i;for(h=0;h<a.x.length-1;h+=1)i=0===h?c.startTriangleLength:c.controlRadius,d=a.x[h]+i*Math.cos(b[h]),e=a.y[h]+i*Math.sin(b[h]),i=h===this.x.length-2?c.finishOuterRadius:c.controlRadius,f=a.x[h+1]-i*Math.cos(b[h]),g=a.y[h+1]-i*Math.sin(b[h]),rg2.ctx.beginPath(),rg2.ctx.moveTo(d,e),rg2.ctx.lineTo(f,g),rg2.ctx.stroke()}},rg2.Course=a}(),function(){function a(){this.courses=[],this.totaltracks=0,this.numberofcourses=0,this.highestControlNumber=0}a.prototype={Constructor:a,getCourseName:function(a){return this.courses[a].name},isValidCourseId:function(a){return a<this.courses.length},getCoursesForEvent:function(){var a,b,c;for(c=[],a=0;a<this.courses.length;a+=1)void 0!==this.courses[a]&&(b={},b.id=this.courses[a].courseid,b.name=this.courses[a].name,b.results=this.courses[a].resultcount,c.push(b));return c},getHighestControlNumber:function(){return this.highestControlNumber},getCourseDetails:function(a){return this.courses[a]},getNumberOfControlsOnCourse:function(a){return this.courses[a].codes.length-2},incrementTracksCount:function(a){this.courses[a].incrementTracksCount(),this.totaltracks+=1},addCourse:function(a){this.courses[a.courseid]=a,this.numberofcourses+=1,void 0!==this.courses[a.courseid].codes&&this.courses[a.courseid].codes.length>this.highestControlNumber&&(this.highestControlNumber=this.courses[a.courseid].codes.length-1,this.updateControlDropdown())},updateCourseDropdown:function(){$("#rg2-course-select").empty();var a,b;for(b=document.getElementById("rg2-course-select"),b.options.add(rg2.utils.generateOption(null,rg2.t("Select course"))),a=0;a<this.courses.length;a+=1)void 0!==this.courses[a]&&b.options.add(rg2.utils.generateOption(a,rg2.he.decode(this.courses[a].name)))},updateControlDropdown:function(){var a,b;for(b=document.getElementById("rg2-control-select"),$("#rg2-control-select").empty(),b.options.add(rg2.utils.generateOption(0,"S")),b.options.add(rg2.utils.generateOption(rg2.config.MASS_START_BY_CONTROL,"By control")),a=1;a<this.highestControlNumber;a+=1)b.options.add(rg2.utils.generateOption(a,a))},deleteAllCourses:function(){this.courses.length=0,this.numberofcourses=0,this.totaltracks=0,this.highestControlNumber=0},drawCourses:function(a){var b;for(b=0;b<this.courses.length;b+=1)void 0!==this.courses[b]&&this.courses[b].drawCourse(a)},putOnDisplay:function(a){void 0!==this.courses[a]&&(this.courses[a].display=!0)},putAllOnDisplay:function(){this.setDisplayAllCourses(!0)},removeAllFromDisplay:function(){this.setDisplayAllCourses(!1)},setDisplayAllCourses:function(a){var b;for(b=0;b<this.courses.length;b+=1)void 0!==this.courses[b]&&(this.courses[b].display=a)},removeFromDisplay:function(a){this.courses[a].display=!1},getCoursesOnDisplay:function(){var a,b;for(b=[],a=0;a<this.courses.length;a+=1)void 0!==this.courses[a]&&this.courses[a].display&&b.push(a);return b},getNumberOfCourses:function(){return this.numberofcourses},generateControlList:function(a){var b,c,d,e,f;for(e=0;e<this.courses.length;e+=1)if(void 0!==this.courses[e]&&(b=this.courses[e].codes,c=this.courses[e].x,d=this.courses[e].y,void 0!==b))for(f=0;f<b.length;f+=1)a.addControl(b[f],c[f],d[f])},updateScoreCourse:function(a,b,c,d){var e;for(e=0;e<this.courses.length;e+=1)if(void 0!==this.courses[e]&&this.courses[e].courseid===a){this.courses[e].codes=b,this.courses[e].x=c,this.courses[e].y=d,this.courses[e].setAngles();break}},setResultsCount:function(){var a;for(a=0;a<this.courses.length;a+=1)void 0!==this.courses[a]&&(this.courses[a].resultcount=rg2.results.countResultsByCourseID(a))},formatCoursesAsTable:function(){var a,b;return b="<table class='coursemenutable'><tr><th>"+rg2.t("Course")+"</th><th><i class='fa fa-eye'></i></th>",b+="<th>"+rg2.t("Runners")+"</th><th>"+rg2.t("Routes")+"</th><th><i class='fa fa-eye'></i></th><th><i class='fa fa-play'></i></th></tr>",a=this.formatCourseDetails(),b+=a.html+"<tr class='allitemsrow'><td>"+rg2.t("All")+"</td>",b+="<td><input class='allcourses' id="+a.coursecount+" type=checkbox name=course></input></td>",b+="<td>"+a.res+"</td><td>"+this.totaltracks+"</td><td>",this.totaltracks>0&&(b+="<input id="+a.coursecount+" class='alltracks' type=checkbox name=track></input>"),b+="</td><td></td></tr></table>"},formatCourseDetails:function(){var a,b;for(b={html:"",res:0},a=0;a<this.courses.length;a+=1)void 0!==this.courses[a]&&(b.html+="<tr><td>"+this.courses[a].name+"</td><td><input class='courselist' id="+a+" type=checkbox name=course></input></td>",b.html+="<td>"+this.courses[a].resultcount+"</td><td>"+this.courses[a].trackcount+"</td><td>",b.res+=this.courses[a].resultcount,this.courses[a].trackcount>0?(b.html+="<input id="+a+" class='tracklist' type=checkbox name=track></input></td>",b.html+="<td><input id="+a+" class='allcoursetracksreplay' type=checkbox name=replay></input>"):b.html+="</td><td>",b.html+="</td></tr>");return b.coursecount=a,b},drawLinesBetweenControls:function(a,b,c,d){this.courses[c].drawLinesBetweenControls(a,b,d)}},rg2.Courses=a}(),function(){function a(){this.trackColor="#ff0000",this.hasResults=!1,this.routeToDelete=null,this.initialiseDrawing()}a.prototype={Constructor:a,gpsFileLoaded:function(){return this.gpstrack.fileLoaded},autofitGPSTrack:function(){this.gpstrack.autofitTrack()},adjustOffset:function(a){this.gpstrack.adjustOffset(a)},uploadGPS:function(a){this.gpstrack.uploadGPS(a)},getControlXY:function(){return{x:this.controlx,y:this.controly}},mouseUp:function(a,b,c){var d,e,f,g,h,i;if(i=$("#rg2-info-panel").tabs("option","active"),g=3,i===rg2.config.TAB_DRAW)if(e=this.gpstrack,e.fileLoaded){if(h=e.handles.getHandleClicked({x:a,y:b}),void 0!==h)c===rg2.config.RIGHT_CLICK&&0!==h.index&&h.index!==e.handles.length?h.locked?e.handles.unlockHandle(h.index):e.handles.deleteHandle(h.index):h.locked?e.handles.unlockHandle(h.index):e.handles.lockHandle(h.index);else for(f=e.baseX.length,d=0;d<f;d+=1)if(e.baseX[d]+g>=a&&e.baseX[d]-g<=a&&e.baseY[d]+g>=b&&e.baseY[d]-g<=b){e.handles.addHandle(a,b,d);break}}else null!==e.routeData.resultid&&null!==e.routeData.courseid?this.addNewPoint(a,b):rg2.utils.showWarningDialog("No course/name","Please select course, name and time before you start drawing a route or upload a file.")},dragEnded:function(){var a;this.gpstrack.fileLoaded&&(a=this.gpstrack,a.savedBaseX=a.baseX.slice(0),a.savedBaseY=a.baseY.slice(0),a.baseX=a.routeData.x.slice(0),a.baseY=a.routeData.y.slice(0),a.handles.saveForUndo(),a.handles.rebaselineXY(),$("#btn-undo-gps-adjust").button("enable"))},initialiseDrawing:function(){this.gpstrack=new rg2.GPSTrack,this.gpstrack.routeData=new rg2.RouteData,this.pendingCourseID=null,this.controlx=[],this.controly=[],this.angles=[],this.nextControl=0,this.previousValidControlIndex=0,this.isScoreCourse=!1,this.gpstrack.initialiseGPS(),this.hasResults=rg2.events.hasResults(),this.initialiseUI(),rg2.redraw(!1)},initialiseUI:function(){rg2.courses.updateCourseDropdown(),this.hasResults?($("#rg2-select-name").show(),$("#rg2-enter-name").hide()):($("#rg2-select-name").hide(),$("#rg2-enter-name").show()),$("#rg2-name-select").prop("disabled",!0),$("#rg2-undo").prop("disabled",!0),$("#btn-reset-drawing").button("enable"),rg2.utils.setButtonState("disable",["#btn-save-route","#btn-save-gps-route","#btn-undo","#btn-three-seconds","#rg2-load-gps-file","#rg2-autofit-gps"]),$("#rg2-name-select").empty(),$("#rg2-new-comments").empty().val(rg2.t(rg2.config.DEFAULT_NEW_COMMENT)),$("#rg2-event-comments").empty().val(rg2.t(rg2.config.DEFAULT_EVENT_COMMENT)),$("#btn-move-all").prop("checked",!1),$("#rg2-name-entry").empty().val(""),$("#rg2-time-entry").empty().val(""),$("#rg2-name").removeClass("valid"),$("#rg2-time").removeClass("valid")},setCourse:function(a){isNaN(a)||(null!==this.gpstrack.routeData.courseid?this.gpstrack.routeData.x.length>1?(this.pendingCourseid=a,this.confirmCourseChange()):(null!==this.gpstrack.routeData.resultid&&rg2.results.putScoreCourseOnDisplay(this.gpstrack.routeData.resultid,!1),rg2.courses.removeFromDisplay(this.gpstrack.routeData.courseid),this.initialiseCourse(a)):this.initialiseCourse(a))},initialiseCourse:function(a){var b;this.gpstrack.routeData.eventid=rg2.events.getKartatEventID(),this.gpstrack.routeData.courseid=a,b=rg2.courses.getCourseDetails(a),this.isScoreCourse=b.isScoreCourse,this.isScoreCourse||(rg2.courses.putOnDisplay(a),this.gpstrack.routeData.coursename=b.name,this.controlx=b.x,this.controly=b.y,this.gpstrack.routeData.x.length=0,this.gpstrack.routeData.y.length=0,this.gpstrack.routeData.x[0]=this.controlx[0],this.gpstrack.routeData.y[0]=this.controly[0],this.gpstrack.routeData.controlx=this.controlx,this.gpstrack.routeData.controly=this.controly,this.angles=b.angle),rg2.results.createNameDropdown(a),$("#rg2-name-select").prop("disabled",!1),$("#rg2-load-gps-file").val("").button("disable"),$("#btn-autofit-gps").button("disable"),this.gpstrack.autofitOffset=null,$("#spn-offset").spinner("value",0).spinner("disable"),$("#btn-undo-gps-adjust").button("disable"),rg2.redraw(!1)},doDrawingReset:function(){$("#rg2-drawing-reset-dialog").dialog("destroy"),null!==this.gpstrack.routeData.courseid&&rg2.courses.removeFromDisplay(this.gpstrack.routeData.courseid),null!==this.gpstrack.routeData.resultid&&rg2.results.putScoreCourseOnDisplay(this.gpstrack.routeData.resultid,!1),this.pendingCourseid=null,this.initialiseDrawing()},doCancelDrawingReset:function(){$("#rg2-drawing-reset-dialog").dialog("destroy")},confirmCourseChange:function(){var a;a={},a.selector="<div id='rg2-course-change-dialog'>The route you have started to draw will be discarded. Are you sure you want to change the course?</div>",a.title="Confirm course change",a.classes="rg2-confirm-change-course",a.doText="Change course",a.onDo=this.doChangeCourse.bind(this),a.onCancel=this.doCancelChangeCourse.bind(this),rg2.utils.createModalDialog(a)},resetDrawing:function(){var a;a={},a.selector="<div id='rg2-drawing-reset-dialog'>All information you have entered will be removed. Are you sure you want to reset?</div>",a.title="Confirm reset",a.classes="rg2-confirm-drawing-reset",a.doText="Reset",a.onDo=this.doDrawingReset.bind(this),a.onCancel=this.doCancelDrawingReset.bind(this),rg2.utils.createModalDialog(a)},doChangeCourse:function(){$("#rg2-course-change-dialog").dialog("destroy"),rg2.courses.removeFromDisplay(this.gpstrack.routeData.courseid),null!==this.gpstrack.routeData.resultid&&rg2.results.putScoreCourseOnDisplay(this.gpstrack.routeData.resultid,!1),this.doDrawingReset(),this.initialiseCourse(this.pendingCourseid)},doCancelChangeCourse:function(){$("#rg2-course-select").val(this.gpstrack.routeData.courseid),this.pendingCourseid=null,$("#rg2-course-change-dialog").dialog("destroy")},showCourseInProgress:function(){null!==this.gpstrack.routeData.courseid&&(this.isScoreCourse?rg2.results.putScoreCourseOnDisplay(this.gpstrack.routeData.resultid,!0):rg2.courses.putOnDisplay(this.gpstrack.routeData.courseid))},setName:function(a){var b,c;isNaN(a)||(b=rg2.results.getFullResult(a),b.hasValidTrack&&(c=rg2.t("If you draw a new route it will overwrite the old route for this runner.")+" "+rg2.t("GPS routes are saved separately and will not be overwritten."),rg2.utils.showWarningDialog(rg2.t("Route already drawn"),c)),null!==this.gpstrack.routeData.resultid&&rg2.results.putScoreCourseOnDisplay(this.gpstrack.routeData.resultid,!1),this.gpstrack.routeData.resultid=b.resultid,this.gpstrack.routeData.name=b.name,this.gpstrack.routeData.splits=b.splits,this.isScoreCourse?(rg2.results.putScoreCourseOnDisplay(b.resultid,!0),this.controlx=b.scorex,this.controly=b.scorey,this.gpstrack.routeData.x.length=0,this.gpstrack.routeData.y.length=0,this.gpstrack.routeData.x[0]=this.controlx[0],this.gpstrack.routeData.y[0]=this.controly[0],this.gpstrack.routeData.controlx=this.controlx,this.gpstrack.routeData.controly=this.controly,this.nextControl=1,rg2.redraw(!1)):(this.nextControl=this.getNextValidControl(0),this.previousValidControlIndex=0),this.alignMapToAngle(0),this.startDrawing())},setNameAndTime:function(){var a,b;b=$("#rg2-name-entry").val(),b?$("#rg2-name").addClass("valid"):$("#rg2-name").removeClass("valid"),a=$("#rg2-time-entry").val(),a.match(/\d+[:.][0-5]\d$/)?$("#rg2-time").addClass("valid"):($("#rg2-time").removeClass("valid"),a=null),b&&a&&(a=a.replace(".",":"),this.gpstrack.routeData.name=b,this.gpstrack.routeData.resultid=0,this.gpstrack.routeData.totaltime=a,this.gpstrack.routeData.startsecs=0,this.gpstrack.routeData.time[0]=rg2.utils.getSecsFromHHMMSS(a),this.gpstrack.routeData.totalsecs=rg2.utils.getSecsFromHHMMSS(a),this.nextControl=1,this.gpstrack.routeData.splits=[0,this.gpstrack.routeData.totalsecs],this.previousValidControlIndex=0,rg2.redraw(!1),this.startDrawing())},startDrawing:function(){$("#btn-three-seconds").button("enable"),$("#rg2-load-gps-file").val(null).button("enable"),rg2.redraw(!1)},alignMapToAngle:function(a){var b;rg2.options.alignMap&&(a<this.controlx.length-1?(b=this.isScoreCourse?rg2.utils.getAngle(this.controlx[a],this.controly[a],this.controlx[a+1],this.controly[a+1]):this.angles[a],rg2.alignMap(b+Math.PI/2,this.controlx[a],this.controly[a])):rg2.resetMapState())},addNewPoint:function(a,b){this.closeEnough(a,b)?(this.addRouteDataPoint(this.controlx[this.nextControl],this.controly[this.nextControl]),this.alignMapToAngle(this.nextControl),this.previousValidControlIndex=this.nextControl,this.nextControl=this.getNextValidControl(this.nextControl),this.nextControl===this.controlx.length&&$("#btn-save-route").button("enable")):this.addRouteDataPoint(Math.round(a),Math.round(b)),$("#btn-undo").button("enable"),rg2.redraw(!1)},getNextValidControl:function(a){var b,c;if(c=this.gpstrack.routeData.splits,2===c.length)return a+1;for(b=a+1;b<c.length;b+=1)if(c[b]!==c[b-1])return b;return c.length},getPreviousValidControl:function(a){var b,c;if(c=this.gpstrack.routeData.splits,2===c.length)return a-1;for(b=a-1;b>0;b-=1)if(c[b]!==c[b-1])return b;return 0},addRouteDataPoint:function(a,b){this.gpstrack.routeData.x.push(a),this.gpstrack.routeData.y.push(b)},undoGPSAdjust:function(){var a;a=this.gpstrack,a.baseX=a.savedBaseX.slice(0),a.baseY=a.savedBaseY.slice(0),a.routeData.x=a.savedBaseX.slice(0),a.routeData.y=a.savedBaseY.slice(0),a.handles.undo(),$("#btn-autofit-gps").button("enable"),$("#btn-undo-gps-adjust").button("disable"),rg2.redraw(!1)},undoLastPoint:function(){var a=this.gpstrack.routeData.x.length;a>1&&(this.controlx[this.previousValidControlIndex]===this.gpstrack.routeData.x[a-1]&&this.controly[this.previousValidControlIndex]===this.gpstrack.routeData.y[a-1]&&(this.nextControl===this.controlx.length&&$("#btn-save-route").button("disable"),this.nextControl=this.previousValidControlIndex,this.previousValidControlIndex=this.getPreviousValidControl(this.nextControl),this.alignMapToAngle(this.nextControl-1)),this.gpstrack.routeData.x.pop(),this.gpstrack.routeData.y.pop()),this.gpstrack.routeData.x.length>1?$("#btn-undo").button("enable"):$("#btn-undo").button("disable"),rg2.redraw(!1)},saveGPSRoute:function(){var a,b,c,d,e,f,g,h,i,j,k;for(g=this.gpstrack.autofitOffset,void 0!==g&&null!==g||(g=0),h=g<0?this.gpstrack.routeData.time[0]+g:this.gpstrack.routeData.time[g],d=new Date,e=60*d.getTimezoneOffset(),this.gpstrack.routeData.startsecs=h-e,i=rg2.courses.getCourseDetails(this.gpstrack.routeData.courseid),g>0?(this.gpstrack.routeData.x.splice(0,g),this.gpstrack.routeData.y.splice(0,g),this.gpstrack.routeData.time.splice(0,g)):g<0&&(this.gpstrack.routeData.x.unshift(i.x[0]),this.gpstrack.routeData.y.unshift(i.y[0]),this.gpstrack.routeData.time.unshift(h)),j=this.gpstrack.routeData.splits[this.gpstrack.routeData.splits.length-1],k=this.gpstrack.routeData.x.length,0===j&&(j=Math.min(k,rg2.config.TIME_NOT_FOUND)),a=0,b=0;a<k&&b<j;)this.gpstrack.routeData.x[a]=Math.round(this.gpstrack.routeData.x[a]),this.gpstrack.routeData.y[a]=Math.round(this.gpstrack.routeData.y[a]),this.gpstrack.routeData.time[a]=this.gpstrack.routeData.time[a]-h,b=this.gpstrack.routeData.time[a],a+=1;for(a<k?(this.gpstrack.routeData.x.splice(a),this.gpstrack.routeData.y.splice(a),this.gpstrack.routeData.time.splice(a)):b<j&&(a=i.x.length-1,this.gpstrack.routeData.x.push(i.x[a]),this.gpstrack.routeData.y.push(i.y[a]),this.gpstrack.routeData.time.push(j)),c=this.gpstrack.routeData.time[this.gpstrack.routeData.time.length-1],this.gpstrack.routeData.totaltime=rg2.utils.formatSecsAsMMSS(c),this.gpstrack.routeData.resultid+=rg2.config.GPS_RESULT_OFFSET;rg2.results.resultIDExists(this.gpstrack.routeData.resultid);)this.gpstrack.routeData.resultid+=rg2.config.GPS_RESULT_OFFSET,this.gpstrack.routeData.name+="*";f=$("#rg2-new-comments").val(),f===rg2.t(rg2.config.DEFAULT_NEW_COMMENT)?this.gpstrack.routeData.comments="":this.gpstrack.routeData.comments=f,$("#btn-undo-gps-adjust").button("disable"),this.setDeltas(),this.postRoute()},saveRoute:function(){var a;a=$("#rg2-new-comments").val(),a===rg2.t(rg2.config.DEFAULT_NEW_COMMENT)?this.gpstrack.routeData.comments="":this.gpstrack.routeData.comments=a,this.gpstrack.routeData.controlx=this.controlx,this.gpstrack.routeData.controly=this.controly,this.gpstrack.routeData.controlx.splice(0,1),this.gpstrack.routeData.controly.splice(0,1),this.setDeltas(),this.postRoute()},setDeltas:function(){var a;for(a=this.gpstrack.routeData.x.length-1;a>0;a-=1)this.gpstrack.routeData.x[a]=this.gpstrack.routeData.x[a]-this.gpstrack.routeData.x[a-1],this.gpstrack.routeData.y[a]=this.gpstrack.routeData.y[a]-this.gpstrack.routeData.y[a-1];for(a=this.gpstrack.routeData.time.length-1;a>0;a-=1)this.gpstrack.routeData.time[a]=this.gpstrack.routeData.time[a]-this.gpstrack.routeData.time[a-1]},postRoute:function(){var a,b,c;a=rg2Config.json_url+"?type=addroute&id="+this.gpstrack.routeData.eventid,b=JSON.stringify(this.gpstrack.routeData),c=this,document.getElementById("rg2-container").style.cursor="wait",$.ajax({data:b,type:"POST",url:a,dataType:"json",success:function(a){a.ok?c.routeSaved(a):rg2.utils.showWarningDialog(c.gpstrack.routeData.name,rg2.t("Your route was not saved. Please try again"))},error:function(){rg2.utils.showWarningDialog(c.gpstrack.routeData.name,rg2.t("Your route was not saved. Please try again"))},complete:function(){document.getElementById("rg2-container").style.cursor="default"}})},routeSaved:function(a){rg2.utils.showShareDialog(this.gpstrack.routeData.name,a.newid,rg2.t("Your route has been saved")+"."),rg2.saveDrawnRouteDetails({eventid:parseInt(a.eventid,10),id:a.newid,token:a.token}),rg2.loadEvent(rg2.events.getActiveEventID())},confirmDeleteRoute:function(a){var b;this.routeToDelete=a,b={},b.selector="<div id='route-delete-dialog'>This route will be permanently deleted. Are you sure?</div>",b.title="Confirm route delete",b.classes="rg2-confirm-route-delete-dialog",b.doText="Delete route",b.onDo=this.doDeleteRoute.bind(this),b.onCancel=this.doCancelDeleteRoute.bind(this),rg2.utils.createModalDialog(b)},doCancelDeleteRoute:function(){$("#route-delete-dialog").dialog("destroy")},doDeleteRoute:function(){var a,b,c;$("#route-delete-dialog").dialog("destroy"),c=rg2.results.getDeletionInfo(this.routeToDelete),a=rg2Config.json_url+"?type=deletemyroute&id="+rg2.events.getKartatEventID()+"&routeid="+c.id,b=JSON.stringify({token:c.token}),$.ajax({data:b,type:"POST",url:a,dataType:"json",success:function(a){a.ok?(rg2.utils.showWarningDialog(rg2.t("Route deleted"),rg2.t("Route has been deleted")),rg2.removeDrawnRouteDetails({eventid:parseInt(a.eventid,10),id:parseInt(a.routeid,10)}),rg2.getEvents()):rg2.utils.showWarningDialog(rg2.t("Delete failed"),rg2.t("Delete failed"))},error:function(a,b){rg2.utils.showWarningDialog(rg2.t("Delete failed"),rg2.t("Delete failed"))}})},waitThreeSeconds:function(){this.addRouteDataPoint(this.gpstrack.routeData.x[this.gpstrack.routeData.x.length-1],this.gpstrack.routeData.y[this.gpstrack.routeData.y.length-1]),rg2.redraw(!1)},closeEnough:function(a,b){var c;return c=rg2.options.snap?8:2,Math.abs(a-this.controlx[this.nextControl])<c&&Math.abs(b-this.controly[this.nextControl])<c},adjustTrack:function(a,b,c){var d,e,f,g;if($("#btn-move-all").prop("checked")||c===rg2.config.RIGHT_CLICK)rg2.ctx.translate(b.x-a.x,b.y-a.y);else if(d=this.gpstrack,d.handles.handlesLocked()>0)if(1===d.handles.handlesLocked())this.scaleRotateAroundSingleLockedPoint(a,b,d.handles.getSingleLockedHandle(),d.handles.getStartHandle().time,d.handles.getFinishHandle().time);else{if(e=d.handles.getHandleClicked(a),void 0===e)return;if(e.locked)return;f=d.handles.getEarliestLockedHandle(),g=d.handles.getLatestLockedHandle(),f.time>=e.time?this.scaleRotateAroundSingleLockedPoint(a,b,f,d.handles.getStartHandle().time,f.time):g.time<e.time?this.scaleRotateAroundSingleLockedPoint(a,b,g,g.time,d.handles.getFinishHandle().time):this.adjustBetweenTwoLockedPoints(a,b,e)}else this.dragTrack(b.x-a.x,b.y-a.y)},adjustBetweenTwoLockedPoints:function(a,b,c){var d,e;d=this.gpstrack.handles.getPreviousLockedHandle(c),e=this.gpstrack.handles.getNextLockedHandle(c),this.scaleRotateAroundSingleLockedPoint(a,b,d,d.time,c.time),this.scaleRotateAroundSingleLockedPoint(a,b,e,c.time,e.time)},scaleRotateAroundSingleLockedPoint:function(a,b,c,d,e){var f,g,h,i;for(g=rg2.utils.getDistanceBetweenPoints(b.x,b.y,c.x,c.y)/rg2.utils.getDistanceBetweenPoints(a.x,a.y,c.x,c.y),h=rg2.utils.getAngle(b.x,b.y,c.x,c.y)-rg2.utils.getAngle(a.x,a.y,c.x,c.y),f=d;f<=e;f+=1)i=rg2.utils.rotatePoint(this.gpstrack.baseX[f]-c.x,this.gpstrack.baseY[f]-c.y,h),this.gpstrack.routeData.x[f]=i.x*g+c.x,this.gpstrack.routeData.y[f]=i.y*g+c.y;this.gpstrack.handles.alignHandles(this.gpstrack.routeData)},dragTrack:function(a,b){var c,d;for(d=this.gpstrack,c=0;c<d.baseX.length;c+=1)d.routeData.x[c]=d.baseX[c]+a,d.routeData.y[c]=d.baseY[c]+b;d.handles.dragHandles(a,b)},drawNewTrack:function(){var a;a=rg2.getOverprintDetails(),rg2.ctx.lineWidth=a.overprintWidth,rg2.ctx.strokeStyle=rg2.config.RED,rg2.ctx.fillStyle=rg2.config.RED_30,this.nextControl>0&&!this.gpstrack.fileLoaded&&(rg2.ctx.beginPath(),this.nextControl<this.controlx.length-1?this.drawCircle(a.controlRadius):(this.drawCircle(a.finishInnerRadius),rg2.ctx.stroke(),rg2.ctx.beginPath(),this.drawCircle(a.finishOuterRadius)),rg2.ctx.fillRect(this.controlx[this.nextControl]-1,this.controly[this.nextControl]-1,3,3),rg2.ctx.stroke()),rg2.ctx.lineCap="round",rg2.ctx.lineJoin="round",rg2.ctx.strokeStyle=this.trackColor,rg2.ctx.fillStyle=this.trackColour,rg2.ctx.font="10pt Arial",rg2.ctx.textAlign="left",rg2.ctx.globalAlpha=.6,this.drawRoute(),this.gpstrack.handles.drawHandles()},drawCircle:function(a){rg2.ctx.arc(this.controlx[this.nextControl],this.controly[this.nextControl],a,0,2*Math.PI,!1),rg2.ctx.fill()},drawRoute:function(){var a,b;if(this.gpstrack.routeData.x.length>1){for(rg2.ctx.beginPath(),rg2.ctx.moveTo(this.gpstrack.routeData.x[0],this.gpstrack.routeData.y[0]),b=this.gpstrack.routeData.x.length,a=1;a<b;a+=1)rg2.ctx.lineTo(this.gpstrack.routeData.x[a],this.gpstrack.routeData.y[a]);rg2.ctx.stroke()}}},rg2.Draw=a}(),function(){function a(a){switch(this.kartatid=a.id,this.mapid=a.mapid,this.format=a.format,this.name=a.name,this.date=a.date,this.club=a.club,this.rawtype=a.type,a.type){case"I":this.type="International event";break;case"N":this.type="National event";break;case"R":this.type="Regional event";break;case"L":this.type="Local event";break;case"T":this.type="Training event";break;default:this.type="Unknown"}this.comment=a.comment,this.locked=a.locked,this.courses=0,this.setMapDetails(a)}a.prototype={Constructor:a,setMapDetails:function(a){void 0===a.suffix?this.mapfilename=this.mapid+".jpg":this.mapfilename=this.mapid+"."+a.suffix,this.worldfile=new rg2.Worldfile(a)}},rg2.Event=a}(),function(){function a(){this.events=[],this.activeEventID=null}a.prototype={Constructor:a,deleteAllEvents:function(){this.events.length=0,this.activeEventID=null},addEvent:function(a){this.events.push(a)},getEventInfo:function(a){var b,c;return void 0!==a&&null!==a||(a=this.getKartatEventID()),b=this.getEventIDForKartatID(a),c=this.events[b],c.id=b,c.controls=rg2.controls.getControlCount(),c},getKartatEventID:function(){return this.events[this.activeEventID].kartatid},getActiveMapID:function(){return this.events[this.activeEventID].mapid},getMapFileName:function(){return this.events[this.activeEventID].mapfilename},setActiveEventID:function(a){null===a?this.activeEventID=null:this.activeEventID=parseInt(a,10)},getActiveEventID:function(){return this.activeEventID},getEventIDForKartatID:function(a){var b;for(b=0;b<this.events.length;b+=1)if(this.events[b].kartatid===a)return b},getActiveEventDate:function(){return null!==this.activeEventID?this.events[this.activeEventID].date:""},getActiveEventName:function(){return null!==this.activeEventID?this.events[this.activeEventID].name:"Routegadget 2"},getEventEditDropdown:function(a){var b;for(a.options.add(rg2.utils.generateOption(null,"No event selected")),b=this.events.length-1;b>-1;b-=1)a.options.add(rg2.utils.generateOption(this.events[b].kartatid,this.events[b].kartatid+": "+this.events[b].date+": "+rg2.he.decode(this.events[b].name)));return a},isScoreEvent:function(){return this.events[this.activeEventID].format===rg2.config.SCORE_EVENT},isLiveEvent:function(){return null!==this.activeEventID&&0===this.events[this.activeEventID].kartatid},hasResults:function(){return null===this.activeEventID||this.events[this.activeEventID].format!==rg2.config.EVENT_WITHOUT_RESULTS},mapIsGeoreferenced:function(){return null!==this.activeEventID&&this.events[this.activeEventID].worldfile.valid},eventIsLocked:function(){return null!==this.activeEventID&&this.events[this.activeEventID].locked},getLengthUnits:function(){return null!==this.activeEventID&&this.mapIsGeoreferenced()?"m":"px"},getMetresPerPixel:function(){var a,b,c,d,e,f,g;if(null!==this.activeEventID&&this.mapIsGeoreferenced())return e=rg2.getMapSize(),f=rg2.utils.getDistanceBetweenPoints(0,0,e.width,e.height),g=this.events[this.activeEventID].worldfile,c=g.C,a=g.F,d=g.A*e.width+g.B*e.height+g.C,b=g.D*e.width+g.E*e.height+g.F,rg2.utils.getLatLonDistance(a,c,b,d)/f},getWorldFile:function(){return this.events[this.activeEventID].worldfile},formatEventsAsMenu:function(){var a,b,c;for(b="",c=this.events.length-1;c>=0;c-=1)a=rg2.t(this.events[c].type)+": "+this.events[c].date,this.events[c].worldfile.valid&&(a+=": "+rg2.t("Map is georeferenced")),""!==this.events[c].comment&&(a+=": "+this.events[c].comment),b+='<li title="'+a+'" id=event-'+c+"><div><a href='#"+this.events[c].kartatid+"'>",""!==this.events[c].comment&&(b+="<i class='fa fa-info-circle event-info-icon' id='info-"+c+"'>&nbsp;</i>"),this.events[c].worldfile.valid&&(b+="<i class='fa fa-globe-americas event-info-icon' id='info-"+c+"'>&nbsp;</i>"),this.events[c].locked&&(b+="<i class='fa fa-lock event-info-icon' id='info-"+c+"'>&nbsp;</i>"),0===this.events[c].kartatid&&(b+="<i class='fa fa-map-o event-info-icon' id='info-"+c+"'>&nbsp;LIVE&nbsp;</i>"),b+=this.events[c].date+": "+this.events[c].name+"</a></div></li>";return b}},rg2.Events=a}(),function(){function a(){this.lat=[],this.lon=[],this.startOffset=0,this.baseX=[],this.baseY=[],this.handles=new rg2.Handles,this.savedBaseX=[],this.savedBaseY=[],this.fileLoaded=!1,this.fileName="",this.fileType="",this.routeData=new rg2.RouteData,this.xml="",this.autofitOffset=null,this.autoFit=!1}a.prototype={Constructor:a,initialiseGPS:function(){this.lat.length=0,this.lon.length=0,this.startOffset=0,this.baseX.length=0,this.baseY.length=0,this.handles.deleteAllHandles(),this.savedBaseX.length=0,this.savedBaseY.length=0,this.fileLoaded=!1,this.routeData.x.length=0,this.routeData.y.length=0,this.routeData.time.length=0},uploadGPS:function(a){var b,c;b=new FileReader,this.fileName=a.target.files[0].name,b.onerror=function(){rg2.utils.showWarningDialog("GPS file problem","Unable to open GPS file.")},c=this,b.onload=function(a){try{if(c.fileType=c.fileName.slice(-3).toLowerCase(),"gpx"!==c.fileType&&"tcx"!==c.fileType)return void rg2.utils.showWarningDialog("GPS file problem","File type not recognised. Please check you have selected the correct file.");c.xml=$.parseXML(a.target.result),c.processGPSFile()}catch(a){return void rg2.utils.showWarningDialog("GPS file problem","File is not valid XML. Please check you have selected the correct file.")}},b.readAsText(a.target.files[0])},processGPSFile:function(){this.initialiseGPS(),"gpx"===this.fileType?this.processGPX():this.processTCX(),this.processGPSTrack()},processGPX:function(){var a,b,c,d,e,f;for(a=this.xml.getElementsByTagName("trkseg"),c=0;c<a.length;c+=1)for(b=a[c].getElementsByTagName("trkpt"),this.startOffset=this.getStartOffset(b[0].getElementsByTagName("time")[0].textContent),d=0;d<b.length;d+=1)e=b[d].getAttribute("lat"),f=b[d].getAttribute("lon"),"0"!==e&&"0"!==f&&(this.lat.push(e),this.lon.push(f),this.routeData.time.push(this.getSecsFromTrackpoint(b[d].getElementsByTagName("time")[0].textContent)))},processTCX:function(){var a,b,c,d,e,f,g;for(a=this.xml.getElementsByTagName("Track"),c=0;c<a.length;c+=1)for(b=a[c].getElementsByTagName("Trackpoint"),this.startOffset=this.getStartOffset(b[0].getElementsByTagName("Time")[0].textContent),d=0;d<b.length;d+=1)b[d].getElementsByTagName("Position").length>0&&(e=b[d].getElementsByTagName("Position"),f=e[0].getElementsByTagName("LatitudeDegrees")[0].textContent,g=e[0].getElementsByTagName("LongitudeDegrees")[0].textContent,"0"!==f&&"0"!==g&&(this.lat.push(f),this.lon.push(g),this.routeData.time.push(this.getSecsFromTrackpoint(b[d].getElementsByTagName("Time")[0].textContent))))},getStartOffset:function(a){var b;return b=parseInt(Date.parse(a.substr(0,11)+"00:00:00Z")/1e3,10),isNaN(b)?0:b},getSecsFromTrackpoint:function(a){var b;return b=parseInt(Date.parse(a)/1e3,10),isNaN(b)?0:b-this.startOffset},processGPSTrack:function(){rg2.events.mapIsGeoreferenced()?(this.applyWorldFile(),this.trackMatchesMapCoordinates()?$("#btn-move-all").prop("checked",!0):(rg2.utils.showWarningDialog("GPS file problem","Your GPS file does not match the map co-ordinates. Please check you have selected the correct file."),this.fitTrackInsideCourse())):this.fitTrackInsideCourse(),this.lat.length=0,this.lon.length=0,this.expandToOneSecondInterval(),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.addStartAndFinishHandles(),this.fileLoaded=!0,this.routeData.splits.length>2&&$("#btn-autofit-gps").button("enable"),rg2.ui.setAutofitSpinner(0),$("#spn-offset").spinner("enable"),$("#btn-save-gps-route").button("enable"),rg2.redraw(!1)},adjustOffset:function(a){this.autofitOffset=a,this.processGPSFile(),this.autoFit===!0?this.autofitTrack():this.timefitTrack()},expandToOneSecondInterval:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(b=[],c=[],d=[],l=this.routeData,e=l.time[0],g=l.x[0],h=l.y[0],b[0]=g,c[0]=h,d[0]=l.time[0],f=d[0]+1,a=1;a<l.x.length;a+=1)if(i=l.time[a]-e,i>0){for(j=(l.x[a]-g)/i,k=(l.y[a]-h)/i,m=1;m<=i;)b.push(g+j*m),c.push(h+k*m),d.push(f),
f+=1,m+=1;g=l.x[a],h=l.y[a],e=f-1}this.routeData.x=b.slice(0),this.routeData.y=c.slice(0),this.routeData.time=d.slice(0)},autofitTrack:function(){var a,b;for(null===this.autofitOffset&&(this.autofitOffset=this.getOffset(),rg2.ui.setAutofitSpinner(this.autofitOffset)),$("#btn-move-all").prop("checked",!1),this.handles.deleteAllHandles(),this.addStartAndFinishHandles(),this.autofitOffset<0&&this.handles.lockHandle(0),this.routeData.splits[this.routeData.splits.length-1]+this.autofitOffset<this.baseX.lengtht&&this.handles.lockHandle(1),a=0;a<this.routeData.splits.length-1;a+=1)(0===a&&0!==this.autofitOffset||this.routeData.splits[a]!==this.routeData.splits[a-1])&&(b=this.routeData.splits[a]+this.autofitOffset,b<this.baseX.length&&b>=0&&(this.handles.addHandle(this.routeData.x[b],this.routeData.y[b],b),rg2.drawing.adjustTrack({x:this.routeData.x[b],y:this.routeData.y[b]},{x:this.routeData.controlx[a],y:this.routeData.controly[a]}),this.handles.lockHandleByTime(b),this.baseX=this.routeData.x.slice(0),this.baseY=this.routeData.y.slice(0),this.handles.rebaselineXY()));this.autoFit=!0,$("#btn-autofit-gps").button("disable"),rg2.redraw(!1)},timefitTrack:function(){var a;null===this.autofitOffset&&(this.autofitOffset=this.getOffset(),rg2.ui.setAutofitSpinner(this.autofitOffset)),$("#btn-move-all").prop("checked",!1),this.handles.deleteAllHandles(),0===this.autofitOffset?this.addStartAndFinishHandles():(a=this.routeData.splits[0]+this.autofitOffset,a>0&&a<this.routeData.x.length?this.handles.addHandle(this.routeData.x[a],this.routeData.y[a],a):this.autofitOffset<0?this.handles.addHandle(this.routeData.controlx[0],this.routeData.controly[0],a):this.handles.addHandle(this.routeData.x[0],this.routeData.y[0],a),a=this.routeData.splits[this.routeData.splits.length-1]+this.autofitOffset,a>0&&a<this.routeData.x.length?this.handles.addHandle(this.routeData.x[a],this.routeData.y[a],a):this.autofitOffset>0?this.handles.addHandle(this.routeData.controlx[this.routeData.controlx.length-1],this.routeData.controly[this.routeData.controlx.length-1],a):this.handles.addHandle(this.routeData.x[this.routeData.x.length-1],this.routeData.y[this.routeData.x.length-1],a)),rg2.redraw(!1)},getOffset:function(){var a,b,c,d,e,f,g,h,i;for(d=this.getSpeedAverage(),e=[],g=10,a=0;a<=2*g;a+=1)e[a]=0;for(a=1;a<this.routeData.splits.length-1;a+=1)if(c=this.routeData.splits[a],c!==this.routeData.splits[a-1])for(c>=g&&c+g<d.length&&(f=d.slice(c-g,c+g+1)),b=0;b<=2*g;b+=1)e[b]+=f[b];for(h=g,e[h]=.7*e[h],a=0;a<e.length;a+=1)e[a]<e[h]&&(h=a);return i=h-g},getSpeedAverage:function(){var a,b,c;for(b=[],c=[],b[0]=0,a=1;a<this.routeData.x.length;a+=1)b[a]=rg2.utils.getDistanceBetweenPoints(this.routeData.x[a],this.routeData.y[a],this.routeData.x[a-1],this.routeData.y[a-1]);for(a=1;a<this.routeData.x.length-1;a+=1)c[a]=(b[a-1]+b[a]+b[a+1])/3;return c[0]=b[0],c[this.routeData.x.length-1]=b[this.routeData.x.length-1],c},trackMatchesMapCoordinates:function(){var a,b,c,d,e;return a=Math.min.apply(Math,this.routeData.x),b=Math.max.apply(Math,this.routeData.x),c=Math.min.apply(Math,this.routeData.y),d=Math.max.apply(Math,this.routeData.y),e=rg2.getMapSize(),b>0&&a<e.width&&c<e.height&&d>0},applyWorldFile:function(){var a,b;for(b=rg2.events.getWorldFile(),a=0;a<this.lat.length;a+=1)this.routeData.x[a]=Math.round((b.E*this.lon[a]-b.B*this.lat[a]+b.xCorrection)/b.AEDB),this.routeData.y[a]=Math.round((-1*b.D*this.lon[a]+b.A*this.lat[a]+b.yCorrection)/b.AEDB)},addStartAndFinishHandles:function(){this.handles.addHandle(this.baseX[0],this.baseY[0],0),this.handles.addHandle(this.baseX[this.baseX.length-1],this.baseY[this.baseY.length-1],this.baseY.length-1)},fitTrackInsideCourse:function(){var a,b,c,d,e,f,g;for(b=this.getLatLonInfo(),c=this.getControlInfo(),d=(c.maxX-c.minX)/(b.maxLon-b.minLon),e=(c.maxY-c.minY)/(b.maxLat-b.minLat),d>e?e=d*b.latCorrection/b.lonCorrection:d=e*b.lonCorrection/b.latCorrection,this.routeData.x[0]=(this.lon[0]-b.minLon)*d+c.minX,this.routeData.y[0]=-1*(this.lat[0]-b.maxLat)*e+c.minY,f=c.minX-(this.routeData.x[0]-c.x[0]),g=c.minY-(this.routeData.y[0]-c.y[0]),a=0;a<this.lat.length;a+=1)this.routeData.x[a]=(this.lon[a]-b.minLon)*d+f,this.routeData.y[a]=-1*(this.lat[a]-b.maxLat)*e+g},getLatLonInfo:function(){var a;return a={},a.maxLat=Math.max.apply(Math,this.lat),a.maxLon=Math.max.apply(Math,this.lon),a.minLat=Math.min.apply(Math,this.lat),a.minLon=Math.min.apply(Math,this.lon),a.lonCorrection=rg2.utils.getLatLonDistance(a.minLat,a.maxLon,a.minLat,a.minLon)/(a.maxLon-a.minLon),a.latCorrection=rg2.utils.getLatLonDistance(a.minLat,a.minLon,a.maxLat,a.minLon)/(a.maxLat-a.minLat),a},getControlInfo:function(){var a,b;return a=rg2.drawing.getControlXY(),a.minX=Math.min.apply(Math,a.x),a.maxX=Math.max.apply(Math,a.x),a.minY=Math.min.apply(Math,a.y),a.maxY=Math.max.apply(Math,a.y),(a.maxY-a.minY<100||a.maxX-a.minX<100)&&(a.minX=0,a.minY=0,b=rg2.getMapSize(),a.maxX=b.width,a.maxY=b.height),a}},rg2.GPSTrack=a}(),function(){function a(a,b,c,d){this.x=a,this.y=b,this.basex=a,this.basey=b,this.undox=a,this.undoy=b,this.locked=!1,this.time=c,this.index=d}function b(){this.handles=[]}b.prototype={Constructor:b,addHandle:function(b,c,d){this.handles.push(new a(b,c,d,this.handles.length)),this.handles.sort(function(a,b){return a.time-b.time}),this.renumberHandles()},deleteHandle:function(a){0!==a&&a!==this.handles.length-1&&(this.handles.splice(a,1),this.renumberHandles())},renumberHandles:function(){var a;for(a=0;a<this.handles.length;a+=1)this.handles[a].index=a},lockHandle:function(a){this.handles[a].locked=!0},lockHandleByTime:function(a){var b;for(b=0;b<this.handles.length;b+=1)this.handles[b].time===a&&(this.handles[b].locked=!0)},unlockAllHandles:function(){var a;for(a=0;a<this.handles.length;a+=1)this.handles[a].locked=!1},unlockHandle:function(a){this.handles[a].locked=!1},handlesLocked:function(){var a,b;for(b=0,a=0;a<this.handles.length;a+=1)this.handles[a].locked&&(b+=1);return b},deleteAllHandles:function(){this.handles.length=0},rebaselineXY:function(){this.copyHandleFields("","base")},saveForUndo:function(){this.copyHandleFields("base","undo")},undo:function(){this.copyHandleFields("undo","base"),this.copyHandleFields("undo","")},copyHandleFields:function(a,b){var c;for(c=0;c<this.handles.length;c+=1)this.handles[c][b+"x"]=this.handles[c][a+"x"],this.handles[c][b+"y"]=this.handles[c][a+"y"]},getStartHandle:function(){return this.handles[0]},getFinishHandle:function(){return this.handles[this.handles.length-1]},getHandleClicked:function(a){var b,c;for(b=0;b<this.handles.length;b+=1)if(c=rg2.utils.getDistanceBetweenPoints(a.x,a.y,this.handles[b].basex,this.handles[b].basey),c<=rg2.config.HANDLE_DOT_RADIUS)return this.handles[b]},getEarliestLockedHandle:function(){var a;for(a=0;a<this.handles.length;a+=1)if(this.handles[a].locked)return this.handles[a]},getLatestLockedHandle:function(){var a;for(a=this.handles.length-1;a>0;a-=1)if(this.handles[a].locked)return this.handles[a]},getPreviousLockedHandle:function(a){var b;for(b=a.index-1;b>=0;b-=1)if(this.handles[b].locked)return this.handles[b]},getNextLockedHandle:function(a){var b;for(b=a.index+1;b<this.handles.length;b+=1)if(this.handles[b].locked)return this.handles[b]},getSingleLockedHandle:function(){return this.getEarliestLockedHandle()},dragHandles:function(a,b){var c;for(c=0;c<this.handles.length;c+=1)this.handles[c].x=this.handles[c].basex+a,this.handles[c].y=this.handles[c].basey+b},drawHandles:function(){var a;for(a=0;a<this.handles.length;a+=1)rg2.ctx.lineWidth=1,this.handles[a].locked===!0?(rg2.ctx.fillStyle=rg2.config.RED_30,rg2.ctx.strokeStyle=rg2.config.RED):(rg2.ctx.fillStyle=rg2.config.GREEN_30,rg2.ctx.strokeStyle=rg2.config.GREEN),rg2.ctx.beginPath(),rg2.ctx.arc(this.handles[a].x,this.handles[a].y,rg2.config.HANDLE_DOT_RADIUS,0,2*Math.PI,!1),rg2.ctx.fill(),rg2.ctx.stroke()},alignHandles:function(a){var b;for(b=0;b<this.handles.length;b+=1)this.handles[b].x=a.x[this.handles[b].time],this.handles[b].y=a.y[this.handles[b].time]}},rg2.Handles=b}(),function(){function a(a,b,c){this.description=a,this.name=b,this.params=c}function b(){this.georefsystems=[],this.georefsystems.push(new a("Not georeferenced","none","")),this.georefsystems.push(new a("GB National Grid","EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs")),this.georefsystems.push(new a("Google EPSG:900913","EPSG:900913","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs")),void 0!==rg2Config.epsg_code?(this.georefsystems.push(new a(rg2Config.epsg_code,rg2Config.epsg_code.replace(" ",""),rg2Config.epsg_params)),this.defaultGeorefVal=rg2Config.epsg_code.replace(" ","")):this.defaultGeorefVal="EPSG:27700"}function c(a){void 0===a.A?(this.valid=!1,this.A=0,this.B=0,this.C=0,this.D=0,this.E=0,this.F=0):(this.A=parseFloat(a.A),this.B=parseFloat(a.B),this.C=parseFloat(a.C),this.D=parseFloat(a.D),this.E=parseFloat(a.E),this.F=parseFloat(a.F),this.valid=!0,this.AEDB=a.A*a.E-a.D*a.B,this.xCorrection=a.B*a.F-a.E*a.C,this.yCorrection=a.D*a.C-a.A*a.F)}function d(a){void 0!==a?(this.mapid=a.mapid,this.name=a.name,this.copyright=a.copyright,this.worldfile=new c(a),this.localworldfile=new c({A:a.localA,B:a.localB,C:a.localC,D:a.localD,E:a.localE,F:a.localF}),void 0===a.mapfilename?this.mapfilename=this.mapid+".jpg":this.mapfilename=a.mapfilename):(this.mapid=0,this.name="",this.copyright="",this.worldfile=new c(0),this.localworldfile=new c(0)),this.xpx=[],this.ypx=[],this.lat=[],this.lon=[]}b.prototype={Constructor:b,getDefault:function(){return this.defaultGeorefVal},getDropdown:function(a){var b;for(b=0;b<this.georefsystems.length;b+=1)a.options.add(rg2.utils.generateOption(this.georefsystems[b].name,this.georefsystems[b].description));return a},getParams:function(a){var b,c;for(c="",b=0;b<this.georefsystems.length;b+=1)if(this.georefsystems[b].name===a)return this.georefsystems[b].params;return c}},c.prototype={Constructor:c,getX:function(a,b){return Math.round((this.E*a-this.B*b+this.xCorrection)/this.AEDB)},getY:function(a,b){return Math.round((-1*this.D*a+this.A*b+this.yCorrection)/this.AEDB)},getLon:function(a,b){return this.A*a+this.B*b+this.C},getLat:function(a,b){return this.D*a+this.E*b+this.F}},rg2.Georefs=b,rg2.Worldfile=c,rg2.Map=d}(),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d;)d-=1,a=c[d],e[a]||(e[a]=b)}(),function(){function a(a,b,c,d,e,f){this.resultid=a.resultid,this.rawid=this.resultid%rg2.config.GPS_RESULT_OFFSET,this.isScoreEvent=b,this.isLiveEvent=c,this.name=rg2.he.decode(a.name),this.initials=this.getInitials(this.name),this.starttime=a.starttime,this.time=a.time,"00"!==this.time&&"0"!==this.time||(this.time=""),this.position=a.position,this.status=a.status,this.canDelete=!1,this.showResult=!0,this.token=0,a.comments?this.comments=rg2.he.decode(a.comments):this.comments="",this.coursename=a.coursename,""===this.coursename&&(this.coursename=a.courseid.toString()),this.courseid=a.courseid,this.splits=this.adjustRawSplits(a.splits),b&&(this.scorex=e,this.scorey=f,this.scorecodes=d),this.initialiseTrack(a)}a.prototype={Constructor:a,initialiseTrack:function(a){var b;this.legpos=[],this.racepos=[],this.hasValidTrack=!1,this.displayTrack=!1,this.displayScoreCourse=!1,this.trackColour=null,this.trackx=[],this.tracky=[],this.speedColour=[],this.xysecs=[],this.resultid>=rg2.config.GPS_RESULT_OFFSET?(this.isGPSTrack=!0,b=rg2.results.getTimeAndSplitsForID(this.rawid),this.time=b.time,this.splits=b.splits,this.time===rg2.config.TIME_NOT_FOUND&&(this.time=a.time)):this.isGPSTrack=!1},adjustRawSplits:function(a){var b;for(a.splice(0,0,0),b=1;b<a.length;b+=1)a[b]<=0&&(a[b]=a[b-1]);return a},putTrackOnDisplay:function(){this.hasValidTrack&&(this.trackColour=rg2.colours.getNextColour(),this.displayTrack=!0)},removeTrackFromDisplay:function(){this.hasValidTrack&&(this.trackColour=null,this.displayTrack=!1)},addTrack:function(a){var b,c;for(this.trackx=a.x.split(",").map(function(a){return parseFloat(a)}),this.tracky=a.y.split(",").map(function(a){return parseFloat(a)}),b=1;b<this.trackx.length;b+=1)this.trackx[b]=this.trackx[b-1]+this.trackx[b],this.tracky[b]=this.tracky[b-1]+this.tracky[b];c=this.isGPSTrack?this.expandGPSTrack():2===this.splits.length?this.expandTrackWithNoSplits():this.expandNormalTrack(),c&&rg2.courses.incrementTracksCount(this.courseid)},drawTrack:function(){var a,b,c,d,e;if(this.displayTrack){for(this.isGPSTrack&&rg2.options.showGPSSpeed&&0===this.speedColour.length&&this.setSpeedColours(),rg2.ctx.lineCap="round",rg2.ctx.lineJoin="round",rg2.ctx.lineWidth=rg2.options.routeWidth,rg2.ctx.strokeStyle=this.trackColour,rg2.ctx.globalAlpha=rg2.options.routeIntensity,rg2.ctx.fillStyle=this.trackColour,rg2.ctx.font="10pt Arial",rg2.ctx.textAlign="left",rg2.ctx.beginPath(),rg2.ctx.moveTo(this.trackx[0],this.tracky[0]),c=this.trackx[0],d=this.tracky[0],e=0,b=this.trackx.length,a=1;a<b;a+=1)rg2.ctx.lineTo(this.trackx[a],this.tracky[a]),this.trackx[a]===c&&this.tracky[a]===d?e+=1:e>0&&((!this.isGPSTrack||this.isGPSTrack&&rg2.options.showThreeSeconds)&&rg2.ctx.fillText("+"+3*e,c+5,d+5),e=0),c=this.trackx[a],d=this.tracky[a],this.isGPSTrack&&rg2.options.showGPSSpeed&&(rg2.ctx.strokeStyle=this.speedColour[a],rg2.ctx.stroke(),rg2.ctx.beginPath(),rg2.ctx.moveTo(c,d));rg2.ctx.stroke()}},drawScoreCourse:function(){var a,b,c;if(this.displayScoreCourse&&this.scorex.length>1){for(c=rg2.getOverprintDetails(),rg2.ctx.globalAlpha=rg2.config.FULL_INTENSITY,a=rg2.utils.getAngle(this.scorex[0],this.scorey[0],this.scorex[1],this.scorey[1]),rg2.controls.drawStart(this.scorex[0],this.scorey[0],"",a,c),a=[],b=0;b<this.scorex.length-1;b+=1)a[b]=rg2.utils.getAngle(this.scorex[b],this.scorey[b],this.scorex[b+1],this.scorey[b+1]);for(rg2.courses.drawLinesBetweenControls({x:this.scorex,y:this.scorey},a,this.courseid,c),b=1;b<this.scorex.length-1;b+=1)rg2.controls.drawSingleControl(this.scorex[b],this.scorey[b],b,.25*Math.PI,c);rg2.controls.drawFinish(this.scorex[this.scorex.length-1],this.scorey[this.scorey.length-1],"",c)}},expandNormalTrack:function(){var a;return this.xysecs.length=0,this.xysecs[0]=0,a={},this.isScoreEvent?(a.x=this.scorex,a.y=this.scorey):a=rg2.courses.getCourseDetails(this.courseid),this.calculateTrackTimes(a),this.isScoreEvent&&(this.hasValidTrack=!0),this.hasValidTrack},calculateTrackTimes:function(a){var b,c,d,e,f,g,h,i,j,k,l;for(l=[],l[0]=0,b=this.getNextValidControl(0),c=a.x[b],d=a.y[b],e=0,f=this.trackx[0],g=this.tracky[0],i=0,j=0,k=0,h=1;h<this.trackx.length;h+=1)if(i=this.trackx[h],j=this.tracky[h],e+=rg2.utils.getDistanceBetweenPoints(i,j,f,g),l[h]=Math.round(e),f=i,g=j,c===i&&d===j){if(this.xysecs[h]=this.splits[b],this.addInterpolatedTimes(k,h,l),k=h,b=this.getNextValidControl(b),b===a.x.length){this.hasValidTrack=!0;break}c=a.x[b],d=a.y[b]}},getNextValidControl:function(a){var b;for(b=a+1;b<this.splits.length;b+=1)if(this.splits[b]!==this.splits[b-1])return b;return this.splits.length},expandTrackWithNoSplits:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(this.xysecs.length=0,a=this.splits[1],b=0,this.xysecs[0]=0,c={},c.x=rg2.courses.getCourseDetails(this.courseid).x,c.y=rg2.courses.getCourseDetails(this.courseid).y,d=1,e=c.x[d],f=c.y[d],g=c.x[c.x.length-1],h=c.y[c.y.length-1],this.trackx.push(g),this.tracky.push(h),m=0,o=this.calculateTotalTrackLength(),n=o[o.length-1],j=0,k=0,l=!1,i=1;i<this.trackx.length;i+=1)if(j=this.trackx[i],k=this.tracky[i],j===this.trackx[0]&&k===this.tracky[0]||(l=!0),e===j&&f===k&&l){if(b=parseInt(o[i]/n*a,10),this.xysecs[i]=b,this.splits[d]=b,this.addInterpolatedTimes(m,i,o),m=i,d+=1,d===c.x.length){this.hasValidTrack=!0;break}e=c.x[d],f=c.y[d]}return this.hasValidTrack},calculateTotalTrackLength:function(){var a,b,c,d;for(d=[],d[0]=0,b=this.trackx[0],c=this.tracky[0],a=1;a<this.trackx.length;a+=1)d[a]=d[a-1]+Math.round(rg2.utils.getDistanceBetweenPoints(this.trackx[a],this.tracky[a],b,c)),b=this.trackx[a],c=this.tracky[a];return d},addInterpolatedTimes:function(a,b,c){var d,e,f,g,h;for(d=this.xysecs[a],e=this.xysecs[b]-d,f=c[a],g=c[b]-f,h=a;h<=b;h+=1)this.xysecs[h]=d+Math.round((c[h]-f)*e/g)},expandGPSTrack:function(){var a;for(a=0;a<this.trackx.length;a+=1)this.xysecs[a]=3*a;return this.speedColour.length=0,this.hasValidTrack=!0,this.hasValidTrack},setSpeedColours:function(){var a,b,c,d;for(b=this.trackx.length,this.speedColour[0]=0,d=0,a=1;a<b;a+=1)c=rg2.utils.getDistanceBetweenPoints(this.trackx[a],this.tracky[a],this.trackx[a-1],this.tracky[a-1]),this.speedColour[a]=(c+d)/2,d=c;this.mapSpeedColours()},mapSpeedColours:function(){var a,b,c,d,e,f,g,h,i,j;for(h=16.667/rg2.options.maxSpeed,i=16.667/rg2.options.minSpeed,j=3,f=this.speedColour.slice().sort(function(a,b){return a-b}),g=rg2.events.getMetresPerPixel(),void 0!==g?(d=j*h/g,e=j*i/g):(d=f[f.length-1],e=f[Math.floor(f.length/95)]),b=d-e,a=0;a<this.speedColour.length;a+=1)c=Math.max(this.speedColour[a],e),c=Math.min(c,d),this.speedColour[a]=this.getColour((c-e)/b)},getColour:function(a){var b,c,d;return b="#",0===a?"#0080ff":(a<.5?b+="ff":(c=parseInt(255*(1-a)*2,10),c<16&&(b+="0"),b+=c.toString(16)),a>=.5?b+="ff":(d=255-parseInt(255*(.5-a)*2,10),d<16&&(b+="0"),b+=d.toString(16)),b+="00")},getInitials:function(a){var b,c,d,e;if(null===a)return"??";for(a=a.trim().replace(/GPS/g,"*"),d=a.length,e="",c=!0,b=0;b<d;b+=1)c&&(e+=a.substr(b,1),c=!1)," "===a.charAt(b)&&(c=!0);return e}},rg2.Result=a}(),function(){function a(){this.results=[]}a.prototype={Constructor:a,addResults:function(a,b,c){var d,e,f,g,h,i,j;if(e=a.length,b)for(h=[],i=[],j=[],d=0;d<e;d+=1)g=a[d].variant,void 0===h[g]&&(h[g]=a[d].scorecodes,i[g]=a[d].scorex,j[g]=a[d].scorey);for(d=0;d<e;d+=1)rg2.courses.isValidCourseId(a[d].courseid)&&(a[d].resultid>rg2.config.GPS_RESULT_OFFSET&&""===a[d].coursename&&(a[d].coursename=rg2.courses.getCourseDetails(a[d].courseid).name),b?(g=a[d].variant,f=new rg2.Result(a[d],b,c,h[g],i[g],j[g])):f=new rg2.Result(a[d],b,c),this.results.push(f));this.setDeletionInfo(),this.setScoreCourseInfo(),this.sanitiseSplits(b),this.generateLegPositions()},setScoreCourseInfo:function(){var a,b;for(a=0;a<this.results.length;a+=1)this.results[a].resultid>=rg2.config.GPS_RESULT_OFFSET&&(b=this.getFullResultForRawID(this.results[a].rawid),void 0!==b&&void 0!==b.scorex&&(this.results[a].scorex=b.scorex,this.results[a].scorey=b.scorey,this.results[a].scorecodes=b.scorecodes))},setDeletionInfo:function(){var a,b,c,d,e;for(c=rg2.events.getKartatEventID(),d=[],e=rg2.options.drawnRoutes,a=0;a<e.length;a+=1)e[a].eventid===c&&d.push(e[a]);for(a=0;a<d.length;a+=1)for(b=0;b<this.results.length;b+=1)this.results[b].resultid===d[a].id&&(this.results[b].canDelete=!0,this.results[b].token=d[a].token)},getDeletionInfo:function(a){return{id:this.results[a].resultid,token:this.results[a].token}},getAllRunnersForCourse:function(a,b){var c,d;for(d=[],c=0;c<this.results.length;c+=1)this.results[c].courseid===a&&(b&&!this.results[c].hasValidTrack||d.push(c));return d},getAllResultsForCourse:function(a){var b,c;for(c=[],b=0;b<this.results.length;b+=1)this.results[b].courseid===a&&this.results[b].resultid===this.results[b].rawid&&c.push(this.results[b]);return c},generateScoreCourses:function(){var a,b,c,d,e,f,g,h;for(d=[],e=[],f=[],g=[],a=0;a<this.results.length;a+=1)if(c=this.results[a],c.resultid<rg2.config.GPS_RESULT_OFFSET)for(h=c.courseid,d.indexOf(h)===-1&&(d.push(h),e[h]=[],f[h]=[],g[h]=[]),b=0;b<c.scorecodes.length;b+=1)e[h].indexOf(c.scorecodes[b])===-1&&(e[h].push(c.scorecodes[b]),f[h].push(c.scorex[b]),g[h].push(c.scorey[b]));for(a=0;a<d.length;a+=1)h=d[a],rg2.courses.updateScoreCourse(h,e[h],f[h],g[h])},sanitiseSplits:function(a){var b,c,d,e,f;for(b=0;b<this.results.length;b+=1){for(this.results[b].timeInSecs=rg2.utils.getSecsFromHHMMSS(this.results[b].time),this.results[b].legSplits=[],this.results[b].legSplits[0]=0,e=0,f=!1,c=1;c<this.results[b].splits.length;c+=1)this.results[b].splits[c]-e===0?(this.results[b].legSplits[c]=0,f=!0,void 0===this.results[b].lastValidSplit&&(this.results[b].lastValidSplit=c-1)):f?(this.results[b].legSplits[c]=0,e=this.results[b].splits[c],f=!1):(this.results[b].legSplits[c]=this.results[b].splits[c]-e,e=this.results[b].splits[c]);if(void 0===this.results[b].lastValidSplit&&(this.results[b].lastValidSplit=this.results[b].splits.length-1),!a)for(d=rg2.courses.getNumberOfControlsOnCourse(this.results[b].courseid)+2;this.results[b].splits.length<d;)this.results[b].splits.push(this.results[b].splits[this.results[b].splits.length-1]),this.results[b].legSplits.push(0)}},generateLegPositions:function(){var a,b,c,d,e,f,g,h;for(d=this.getCoursesAndControls(),e=[],a=0;a<d.courses.length;a+=1)for(c=1;c<d.controls[a];c+=1){for(e.length=0,b=0;b<this.results.length;b+=1)this.results[b].courseid===d.courses[a]&&this.results[b].resultid===this.results[b].rawid&&e.push({time:this.results[b].legSplits[c],id:b});for(e.sort(this.sortLegTimes),g=0,f=0,b=0;b<e.length;b+=1)e[b].time!==f?0===e[b].time?(this.results[e[b].id].legpos[c]=0,f=0,g=0):(this.results[e[b].id].legpos[c]=b+1,f=e[b].time,g=b+1):this.results[e[b].id].legpos[c]=g}for(e.length=0,a=0;a<d.courses.length;a+=1)for(c=1;c<d.controls[a];c+=1){for(e.length=0,b=0;b<this.results.length;b+=1)this.results[b].courseid===d.courses[a]&&this.results[b].resultid===this.results[b].rawid&&(h=c>this.results[b].lastValidSplit?0:this.results[b].splits[c],e.push({time:h,id:b}));for(e.sort(this.sortLegTimes),g=0,f=0,b=0;b<e.length;b+=1)e[b].time!==f?0===e[b].time?(this.results[e[b].id].racepos[c]=0,g=0,f=0):(this.results[e[b].id].racepos[c]=b+1,f=e[b].time,g=b+1):this.results[e[b].id].racepos[c]=g}},getCoursesAndControls:function(){var a,b,c;for(b=[],c=[],a=0;a<this.results.length;a+=1)b.indexOf(this.results[a].courseid)===-1&&(b.push(this.results[a].courseid),c.push(this.results[a].splits.length));return{courses:b,controls:c}},putScoreCourseOnDisplay:function(a,b){var c;for(c=0;c<this.results.length;c+=1)this.results[c].resultid===a&&(this.results[c].displayScoreCourse=b)},displayScoreCourse:function(a,b){this.results[a].displayScoreCourse=b},sortLegTimes:function(a,b){return 0===a.time?1:0===b.time?-1:a.time-b.time},countResultsByCourseID:function(a){var b,c,d;for(d=rg2.events.getEventInfo(),c=0,b=0;b<this.results.length;b+=1)this.results[b].courseid===a&&(this.results[b].resultid<rg2.config.GPS_RESULT_OFFSET||d.format===rg2.config.EVENT_WITHOUT_RESULTS)&&(c+=1);return c},getRoutesForEvent:function(){var a,b,c;for(b=[],c=0;c<this.results.length;c+=1)this.results[c].hasValidTrack&&(a={},a.id=c,a.resultid=this.results[c].resultid,a.name=this.results[c].name,a.time=this.results[c].time,a.coursename=this.results[c].coursename,b.push(a));return b},getResultsInfo:function(){var a,b,c;for(b={},b.results=0,b.drawnroutes=0,b.gpsroutes=0,b.secs=0,a=0;a<this.results.length;a+=1)c=this.results[a],c.resultid<rg2.config.GPS_RESULT_OFFSET&&(b.results+=1,c.time&&(b.secs+=c.splits[c.splits.length-1])),c.hasValidTrack&&(c.resultid<rg2.config.GPS_RESULT_OFFSET?b.drawnroutes+=1:b.gpsroutes+=1);return b.totalroutes=b.drawnroutes+b.gpsroutes,b.results>0?b.percent=(100*b.totalroutes/b.results).toFixed(1):b.percent=0,b.time=this.formatTotalRunningTime(b.secs),b},formatTotalRunningTime:function(a){var b;return b=Math.floor(a/86400)+" days ",a-=86400*Math.floor(a/86400),b+=Math.floor(a/3600)+" hours ",a-=3600*Math.floor(a/3600),b+=Math.floor(a/60)+" minutes ",b+=a-60*Math.floor(a/60)+" seconds"},getFullResult:function(a){return this.results[a]},getFullResultForRawID:function(a){var b;for(b=0;b<this.results.length;b+=1)if(this.results[b].resultid===a)return this.results[b]},drawTracks:function(){var a;for(a=0;a<this.results.length;a+=1)this.results[a].drawTrack(),this.results[a].drawScoreCourse()},getTracksOnDisplay:function(){var a,b,c;for(b=[],a=0;a<this.results.length;a+=1)c=this.results[a],c.displayTrack&&b.push(c.resultid);return b},putOneTrackOnDisplay:function(a){var b;for(b=0;b<this.results.length;b+=1)this.results[b].resultid===parseInt(a,10)&&this.results[b].putTrackOnDisplay()},removeOneTrackFromDisplay:function(a){var b;for(b=0;b<this.results.length;b+=1)this.results[b].resultid===parseInt(a,10)&&this.results[b].removeTrackFromDisplay()},updateTrackDisplay:function(a,b){var c;for(c=0;c<this.results.length;c+=1)this.results[c].courseid!==a&&rg2.config.DISPLAY_ALL_COURSES!==a||(b?this.results[c].putTrackOnDisplay():this.results[c].removeTrackFromDisplay())},getDisplayedTrackNames:function(){var a,b;for(b="",a=0;a<this.results.length;a+=1)this.results[a].displayTrack&&(b+="<p style='color:"+this.results[a].trackColour+";'>"+rg2.courses.getCourseName(this.results[a].courseid),b+=": "+this.results[a].name+"</p>");return b},getDisplayedTrackDetails:function(){var a,b,c;for(b=[],a=0;a<this.results.length;a+=1)this.results[a].displayTrack&&(c={},c.colour=this.results[a].trackColour,c.course=rg2.courses.getCourseName(this.results[a].courseid),c.name=this.results[a].name,c.id=a,b.push(c));return b},setSpeedRange:function(a,b){$("#spn-min-speed").spinner("option","min",rg2.options.maxSpeed+1),$("#spn-max-speed").spinner("option","max",rg2.options.minSpeed-1),rg2.setConfigOption("maxSpeed",a),rg2.setConfigOption("minSpeed",b),this.resetSpeedColours(),rg2.redraw(!1)},resetSpeedColours:function(){var a;for(a=0;a<this.results.length;a+=1)this.results[a].speedColour.length=0},resultIDExists:function(a){var b;for(b=0;b<this.results.length;b+=1)if(a===this.results[b].resultid)return!0;return!1},getTimeAndSplitsForID:function(a){var b;for(b=0;b<this.results.length;b+=1)if(a===this.results[b].resultid)return{time:this.results[b].time,splits:this.results[b].splits};return{time:rg2.config.TIME_NOT_FOUND,splits:[]}},addTracks:function(a){var b,c,d,e,f;for(f=rg2.events.getEventInfo(),e=a.length,c=0;c<e;c+=1)for(b=a[c].id,d=0;d<this.results.length;){if(b===this.results[d].resultid){this.results[d].addTrack(a[c]);break}d+=1}},deleteAllResults:function(){this.results.length=0},deleteResult:function(a){var b;for(b=0;b<this.results.length;b+=1)if(a===this.results[b].resultid)return this.results.splice(b,1),!0;return!1},sortByCourseIDThenResultID:function(a,b){return a.courseid>b.courseid?1:b.courseid>a.courseid?-1:a.rawid===b.rawid?a.resultid-b.resultid:a.rawid-b.rawid},formatResultListAsAccordion:function(){var a,b,c,d,e,f;if(0===this.results.length)return"<p>"+rg2.t("No results available")+"</p>";for(a="",c=!0,d=0,f=0,this.prepareResults(),e=0;e<this.results.length;e+=1)b=this.results[e],b.showResult&&(b.courseid!==d&&(c?c=!1:(b.isLiveEvent||(a+=this.getBottomRows(f,d)),a+="</table></div>"),f=0,a+=this.getCourseHeader(b),d=b.courseid),a+="<tr><td id="+b.rawid+">"+b.position+"</td>",""!==b.comments&&b.comments!==rg2.t("Type your comment")?(b.comments=b.comments.replace(/"/g,"&quot;"),a+='<td><a href="#" title="'+b.comments+'">'+this.getNameHTML(b,e)+"</a>"):a+="<td>"+this.getNameHTML(b,e),b.canDelete&&(a+=" <i class='shareroute fa fa-share-square-o' id="+b.resultid+"></i>",a+=" <i class='deleteroute fa fa-trash' id="+e+"></i>"),a+="</td><td>"+b.time+"</td>",b.hasValidTrack&&!b.isLiveEvent?(f+=1,a+="<td><input class='showtrack showtrack-"+d+"' id="+b.resultid+" type=checkbox name=result></input></td>"):a+="<td></td>",b.isLiveEvent?a+="<td></td>":(a+="<td><input class='showreplay",b.hasValidTrack&&(a+=" showtrackreplay"),a+=" showreplay-"+d+"' id="+e+" type=checkbox name=replay></input></td>"),a+="</tr>");return b.isLiveEvent||(a+=this.getBottomRows(f,d)),a+="</table></div></div>"},prepareResults:function(){var a,b,c;if(rg2.events.hasResults())for(this.results.sort(this.sortByCourseIDThenResultID),a=void 0,c=!1,b=0;b<this.results.length;b+=1)this.results[b].rawid===a?c&&this.results[b].hasValidTrack&&(this.results[b-1].showResult=!1,this.results[b].position=this.results[b-1].position,c=!1):(c=!this.results[b].hasValidTrack,a=this.results[b].rawid)},getNameHTML:function(a,b){var c;return c=a.rawid===a.resultid?a.name:"<i>"+a.name+"</i>",a.isScoreEvent&&!a.isLiveEvent&&(c="<input class='showscorecourse showscorecourse-"+b+"' id="+b+" type=checkbox name=scorecourse></input> "+c),"<div class='name-div'>"+c+"</div>"},getCourseHeader:function(a){var b,c,d;return d=a.coursename,c=rg2.courses.getCourseDetails(a.courseid),c&&(d+=void 0===c.length?"":": "+c.length+" km"),b="<h3>"+d+"<input class='showcourse' id="+a.courseid+" type=checkbox name=course title='Show course'></input></h3><div>",b+="<table class='resulttable' data-role='table' id='table-"+a.courseid+"'><tr><th></th><th>"+rg2.t("Name")+"</th><th>"+rg2.t("Time")+"</th><th><i class='fa fa-pen'></i></th><th><i class='fa fa-play'></i></th></tr>"},getBottomRows:function(a,b){var c;return c="<tr class='allitemsrow'><td></td><td>"+rg2.t("Routes")+"</td><td></td>",a>0?(c+="<td><input class='allcoursetracks' id="+b+" type=checkbox name=track></input></td>",c+="<td><input class='allcoursetracksreplay' id="+b+" type=checkbox name=replay></input></td>"):c+="<td></td><td></td>",c+="</tr><tr class='allitemsrow'><td></td><td>"+rg2.t("All")+"</td><td></td><td></td>",c+="<td><input class='allcoursereplay' id="+b+" type=checkbox name=replay></input></td></tr>"},getComments:function(){var a,b;for(b="",a=0;a<this.results.length;a+=1)""!==this.results[a].comments&&(b+="<tr><td><strong>"+this.results[a].name+"</strong></td><td>",b+=this.results[a].coursename+"</td><td class='selectable'>"+this.results[a].comments+"</td></tr>");return b},createNameDropdown:function(a){var b,c;for($("#rg2-name-select").empty(),c=document.getElementById("rg2-name-select"),c.options.add(rg2.utils.generateOption(null,rg2.t("Select name"))),b=0;b<this.results.length;b+=1)this.results[b].courseid===a&&this.results[b].resultid<rg2.config.GPS_RESULT_OFFSET&&c.options.add(rg2.utils.generateOption(b,this.results[b].time+" "+this.results[b].name))}},rg2.Results=a}(),function(){function a(a){$("#rg2-load-progress").hide(),$("#rg2-map-load-progress").hide(),$("body").css("cursor","auto"),rg2.utils.showWarningDialog("Configuration error",a)}function b(){var b;$.getJSON(rg2Config.json_url,{type:"events",cache:!1}).done(function(a){rg2.events.deleteAllEvents(),$.each(a.data.events,function(){rg2.events.addEvent(new rg2.Event(this))}),rg2.ui.createEventMenu(),rg2.requestedHash.getID()&&(b=rg2.events.getEventIDForKartatID(rg2.requestedHash.getID()),void 0!==b&&rg2.loadEvent(b)),rg2.config.managing&&rg2.manager.eventListLoaded()}).fail(function(b,c,d){a("Events request failed: "+d)})}function c(a){var b,c,d,e,f;if($("#rg2-load-progress-label").text(rg2.t("Loading GPS routes")),console.log("Tracks: "+a.data.routes.length),rg2.courses.getNumberOfCourses()>0&&rg2.results.addTracks(a.data.routes),rg2.ui.createCourseMenu(),rg2.ui.createResultMenu(),rg2.animation.updateAnimationDetails(),$("body").css("cursor","auto"),rg2.config.managing)rg2.manager.eventFinishedLoading();else{for($("#rg2-info-panel").tabs("enable",rg2.config.TAB_COURSES),$("#rg2-info-panel").tabs("enable",rg2.config.TAB_RESULTS),rg2.events.eventIsLocked()?$("#rg2-info-panel").tabs("disable",rg2.config.TAB_DRAW):$("#rg2-info-panel").tabs("enable",rg2.config.TAB_DRAW),b=$("#rg2-info-panel").tabs("option","active"),b!==rg2.config.TAB_DRAW&&$("#rg2-info-panel").tabs("option","active",rg2.requestedHash.getTab()),$("#rg2-info-panel").tabs("refresh"),$("#btn-show-splits").parent().show(),rg2Config.enable_splitsbrowser&&rg2.events.hasResults()?$("#rg2-splitsbrowser").off().click(function(){window.open(rg2Config.json_url+"?type=splitsbrowser&id="+rg2.events.getKartatEventID())}).show():$("#rg2-splitsbrowser").off().hide(),d=$.Event("click"),d.target={},d.target.checked=!0,e=rg2.requestedHash.getRoutes(),c=0;c<e.length;c+=1)d.target.id=e[c],$(".showtrack").filter("#"+e[c]).trigger(d).prop("checked",!0);
for(f=rg2.requestedHash.getCourses(),c=0;c<f.length;c+=1)d.target.id=f[c],$(".showcourse").filter("#"+f[c]).trigger(d).prop("checked",!0)}$("#rg2-load-progress-label").text(""),$("#rg2-load-progress").hide(),rg2.redraw(!1)}function d(a){var b,c;console.log("Results: "+a.data.results.length),$("#rg2-load-progress-label").text(rg2.t("Loading results")),b=rg2.events.isScoreEvent(),c=rg2.events.isLiveEvent(),rg2.courses.getNumberOfCourses()>0&&rg2.results.addResults(a.data.results,b,c),rg2.courses.setResultsCount(),b&&(rg2.controls.deleteAllControls(),rg2.results.generateScoreCourses(),rg2.courses.generateControlList(rg2.controls)),$("#rg2-result-table").accordion("refresh")}function e(b){$("#rg2-load-progress-label").text(rg2.t("Loading event")),$.getJSON(rg2Config.json_url,{id:b,type:"event",cache:!1}).done(function(a){$("#rg2-load-progress-label").text(rg2.t("Loading courses")),$.each(a.data.courses,function(){rg2.courses.addCourse(new rg2.Course(this,rg2.events.isScoreEvent(),rg2.events.isLiveEvent()))}),rg2.courses.updateCourseDropdown(),rg2.courses.generateControlList(rg2.controls),$("#btn-toggle-controls").parent().show(),d(a),c(a),rg2.eventLoaded()}).fail(function(c,d,e){a("Event request failed for event "+b+": "+e),rg2.eventLoaded()})}function f(b){$.getScript(rg2Config.lang_url+b+".js").done(function(){rg2.ui.setNewLanguage(b)}).fail(function(b,c,d){a("Language request failed.")})}rg2.getEvents=b,rg2.getEvent=e,rg2.getNewLanguage=f}(),function(){function a(a){m.dragStart=rg2.ctx.transformedPoint(m.lastX,m.lastY),m.dragged=!1,m.whichButton=a.which}function b(){var a;m.dragStart&&(a=rg2.ctx.transformedPoint(m.lastX,m.lastY),Math.round(a.x),Math.round(a.y),Math.abs(a.x-m.dragStart.x)+Math.abs(a.y-m.dragStart.y)>5&&(rg2.drawing.gpsFileLoaded()?rg2.drawing.adjustTrack({x:Math.round(m.dragStart.x),y:Math.round(m.dragStart.y)},a,m.whichButton):$("#rg2-info-panel").tabs("option","active")===rg2.config.TAB_CREATE?rg2.manager.adjustControls({x:Math.round(m.dragStart.x),y:Math.round(m.dragStart.y)},a,m.whichButton):rg2.ctx.translate(a.x-m.dragStart.x,a.y-m.dragStart.y),m.dragged=!0,rg2.redraw(!1)))}function c(a){var b=$("#rg2-info-panel").tabs("option","active");m.dragged?b===rg2.config.TAB_CREATE?rg2.manager.dragEnded():rg2.drawing.dragEnded():b===rg2.config.TAB_CREATE?rg2.manager.mouseUp(Math.round(m.dragStart.x),Math.round(m.dragStart.y)):rg2.drawing.mouseUp(Math.round(m.dragStart.x),Math.round(m.dragStart.y),a.which),m.dragStart=null,rg2.redraw(!1)}function d(a){m.pinchStart0=rg2.ctx.transformedPoint(a.touches[0].pageX,a.touches[0].pageY),m.pinchStart1=rg2.ctx.transformedPoint(a.touches[1].pageX,a.touches[1].pageY),m.pinched=!0}function e(b){b.preventDefault(),b.touches.length>1&&d(b),m.lastX=b.touches[0].pageX,m.lastY=b.touches[0].pageY,a(b)}function f(a){var c,e;a.touches.length>1?m.pinched||d(a):m.pinched=!1,m.pinched&&a.touches.length>1?(m.pinchEnd0=rg2.ctx.transformedPoint(a.touches[0].pageX,a.touches[0].pageY),m.pinchEnd1=rg2.ctx.transformedPoint(a.touches[1].pageX,a.touches[1].pageY),c=rg2.utils.getDistanceBetweenPoints(m.pinchStart0.x,m.pinchStart0.y,m.pinchStart1.x,m.pinchStart1.y),e=rg2.utils.getDistanceBetweenPoints(m.pinchEnd0.x,m.pinchEnd0.y,m.pinchEnd1.x,m.pinchEnd1.y),c/e>1.1?(rg2.zoom(-1),m.pinchStart0=m.pinchEnd0,m.pinchStart1=m.pinchEnd1):c/e<.9&&(rg2.zoom(1),m.pinchStart0=m.pinchEnd0,m.pinchStart1=m.pinchEnd1)):(m.lastX=a.touches[0].pageX,m.lastY=a.touches[0].pageY,b(a))}function g(a){c(a),m.pinched=!1}function h(a){m.lastX=a.offsetX||a.layerX-rg2.canvas.offsetLeft,m.lastY=a.offsetY||a.layerY-rg2.canvas.offsetTop}function i(a){var b=a.wheelDelta?a.wheelDelta/40:a.detail?-a.detail:0;return b&&(h(a),rg2.zoom(b)),a.stopPropagation(),a.preventDefault()&&!1}function j(b){return h(b),a(b),b.stopPropagation(),b.preventDefault()&&!1}function k(a){return m.dragStart&&(h(a),b(a)),a.stopPropagation(),a.preventDefault()&&!1}function l(a){return c(a),a.stopPropagation(),a.preventDefault()&&!1}var m={dragStart:null,dragged:!0,infoPanelMaximised:!0,scaleFactor:1.1};rg2.input=m,rg2.handleMouseDown=j,rg2.handleMouseUp=l,rg2.handleMouseMove=k,rg2.handleTouchEnd=g,rg2.handleTouchStart=e,rg2.handleTouchMove=f,rg2.handleScroll=i}(),function(){var a={setTitleBar:function(){var a,b;a=rg2.events.getActiveEventName()+" "+rg2.events.getActiveEventDate(),$("#rg2-event-title").html(a).show(),rg2.events.mapIsGeoreferenced()?$("#rg2-event-title-icon").addClass("fa fa-globe-americas"):$("#rg2-event-title-icon").removeClass("fa fa-globe-americas"),rg2.events.eventIsLocked()?$("#rg2-event-lock-icon").addClass("fa fa-lock"):$("#rg2-event-lock-icon").removeClass("fa fa-lock"),b=rg2.events.getActiveEventID(),null!==b&&0===rg2.events.getKartatEventID()?$("#rg2-event-live-icon").addClass("fa fa-map-o").html("&nbsp;LIVE&nbsp;"):$("#rg2-event-live-icon").removeClass("fa fa-map-o").html("")},setNewLanguage:function(a){var b;void 0!==$("#rg2-event-ul").menu("instance")&&$("#rg2-event-ul").menu("destroy"),"en"===a&&rg2.setDictionary({code:"en"}),void 0!==rg2.events&&(this.createEventMenu(),b=rg2.events.getActiveEventID(),null!==b&&(rg2.courses.removeAllFromDisplay(),rg2.results.updateTrackDisplay(rg2.config.DISPLAY_ALL_COURSES,!1),rg2.animation.resetAnimation(),rg2.drawing.initialiseDrawing(rg2.events.hasResults(b)),this.createCourseMenu(),this.createResultMenu())),$("#rg2-info-panel").tabs("refresh"),rg2.redraw(!1)},tabActivated:function(){var a=$("#rg2-info-panel").tabs("option","active");switch(a){case rg2.config.TAB_DRAW:rg2.courses.removeAllFromDisplay(),rg2.drawing.showCourseInProgress()}rg2.redraw(!1)},displayAboutDialog:function(){$("#rg2-event-stats").empty().html(rg2.getEventStats()),$("#rg2-about-dialog").dialog({width:Math.min(1e3,.9*rg2.canvas.width),maxHeight:Math.min(1e3,.9*rg2.canvas.height),title:"RG2 Version "+rg2.config.RG2VERSION,dialogClass:"rg2-about-dialog",modal:!0,resizable:!1,buttons:{Manager:function(){var a=rg2Config.json_url.replace("rg2api.php","index.php?manage");return window.open(a,"_blank"),!1},Ok:function(){$(this).dialog("close")}}})},displayOptionsDialog:function(){$("#rg2-option-controls").dialog({width:Math.min(400,.9*rg2.canvas.width),maxHeight:Math.min(1e3,.9*rg2.canvas.height),title:rg2.t("Configuration options"),dialogClass:"rg2-options-dialog",modal:!1,responsive:!0,resizable:!1,close:function(){rg2.saveConfigOptions()},buttons:{Ok:function(){$(this).dialog("close")}}})},initialiseButtons:function(){var a;a=this,$("#btn-about").parent().click(function(){a.displayAboutDialog()}),$("#btn-faster").parent().click(function(){rg2.animation.goFaster()}),$("#btn-full-tails").prop("checked",!1).click(function(a){a.target.checked?(rg2.animation.setFullTails(!0),$("#spn-tail-length").spinner("disable")):(rg2.animation.setFullTails(!1),$("#spn-tail-length").spinner("enable"))}),$("#btn-move-all").prop("checked",!1),$("#btn-align-map").prop("checked",rg2.options.alignMap).click(function(a){a.target.checked?rg2.options.alignMap=!0:rg2.options.alignMap=!1,rg2.saveConfigOptions()}),$("#btn-options").parent().click(function(){a.displayOptionsDialog()}),$("#btn-real-time").parent().click(function(){rg2.animation.setReplayType()}),$("#btn-reset").parent().click(function(){rg2.resetMapState()}),$("#btn-reset-drawing").button().button("disable").click(function(){rg2.drawing.resetDrawing()}),$("#btn-save-gps-route").button().button("disable").click(function(){rg2.drawing.saveGPSRoute()}),$("#btn-save-route").button().button("disable").click(function(){rg2.drawing.saveRoute()}),$("#btn-show-splits").parent().click(function(){$("#rg2-splits-table").empty().append(rg2.animation.getSplitsTable()).dialog({width:Math.min(1600,.9*rg2.canvas.width),maxHeight:Math.min(1e3,.9*rg2.canvas.height),dialogClass:"rg2-splits-table",modal:!0,buttons:{Ok:function(){$("#rg2-splits-table").dialog("close")}}})}).hide(),$("#btn-slower").parent().click(function(){rg2.animation.goSlower()}),$("#btn-start-stop").parent().click(function(){rg2.animation.toggleAnimation()}),$("#btn-three-seconds").button().click(function(){rg2.drawing.waitThreeSeconds()}).button("disable"),$("#btn-toggle-controls").parent().click(function(){rg2.controls.toggleControlDisplay(),rg2.redraw(!1)}).hide(),$("#btn-toggle-names").parent().click(function(){rg2.animation.toggleNameDisplay(),rg2.redraw(!1)}),$("#btn-undo").button().button("disable").click(function(){rg2.drawing.undoLastPoint()}),$("#btn-undo-gps-adjust").button().button("disable").click(function(){rg2.drawing.undoGPSAdjust()}),$("#btn-autofit-gps").button().button("disable").click(function(){rg2.drawing.autofitGPSTrack()}),$("#btn-zoom-in").parent().click(function(){rg2.zoom(1)}),$("#btn-zoom-out").parent().click(function(){rg2.zoom(-1)}),$("#btn-rotate-left").parent().click(function(){rg2.rotateMap(-1)}),$("#btn-rotate-right").parent().click(function(){rg2.rotateMap(1)}),$("#rg2-load-gps-file").val("").button().button("disable")},setResultCheckboxes:function(){$(".showcourse").click(function(a){var b;a.stopPropagation(),b=a.target.id,a.target.checked?(rg2.courses.putOnDisplay(b),$(".courselist").filter("#"+b).prop("checked",!0)):(rg2.courses.removeFromDisplay(b),$(".courselist").filter("#"+b).prop("checked",!1),$(".allcourses").prop("checked",!1)),rg2.requestedHash.setCourses(),rg2.redraw(!1)}),$(".showscorecourse").click(function(a){rg2.results.displayScoreCourse(parseInt(a.target.id,10),a.target.checked),rg2.redraw(!1)}),$(".showtrack").click(function(a){var b,c,d;if(a.target.checked)rg2.results.putOneTrackOnDisplay(a.target.id);else for(rg2.results.removeOneTrackFromDisplay(a.target.id),c=$(a.target).attr("class").replace(/\s+/g," ").split(" "),d=0;d<c.length;d+=1)if(c[d].search("showtrack-")!==-1){b=c[d].replace("showtrack-",""),$(".allcoursetracks").filter("#"+b).prop("checked",!1),$(".tracklist").filter("#"+b).prop("checked",!1);break}rg2.requestedHash.setRoutes(),rg2.redraw(!1)}),$(".shareroute").click(function(a){rg2.utils.showShareDialog(rg2.t("Share route"),parseInt(a.target.id,10),rg2.t("Copy and paste this link to share your route"))}),$(".deleteroute").click(function(a){rg2.drawing.confirmDeleteRoute(parseInt(a.target.id,10))}),$(".showreplay").click(function(a){a.target.checked?rg2.animation.addRunner(new rg2.Runner(parseInt(a.target.id,10)),!0):rg2.animation.removeRunner(parseInt(a.target.id,10),!0),rg2.redraw(!1)}),$(".allcoursetracks").click(function(a){var b;rg2.results.updateTrackDisplay(parseInt(a.target.id,10),a.target.checked),b=".showtrack-"+a.target.id,a.target.checked?($(b).prop("checked",!0),$(".tracklist").filter("#"+a.target.id).prop("checked",!0)):($(b).prop("checked",!1),$(".tracklist").filter("#"+a.target.id).prop("checked",!1)),rg2.requestedHash.setRoutes(),rg2.redraw(!1)}),$(".allcoursetracksreplay").click(function(a){var b,c;b=rg2.results.getAllRunnersForCourse(parseInt(a.target.id,10),!0),rg2.animation.animateRunners(b,a.target.checked),c=".showtrackreplay.showreplay-"+a.target.id,a.target.checked?$(c).prop("checked",!0):$(c).prop("checked",!1),rg2.redraw(!1)}),$(".allcoursereplay").click(function(a){var b,c;b=rg2.results.getAllRunnersForCourse(parseInt(a.target.id,10),!1),rg2.animation.animateRunners(b,a.target.checked),c=".showreplay-"+a.target.id,a.target.checked?$(c).prop("checked",!0):($(c).prop("checked",!1),$(".allcoursetracksreplay").prop("checked",!1)),rg2.redraw(!1)})},createResultMenu:function(){var a,b=rg2.results.formatResultListAsAccordion();b=b.replace(/&amp;/g,"&"),$("#rg2-result-table").empty().append(b),$("#rg2-result-table").accordion("option","active",!1).accordion("refresh"),b="<span class='input-group-addon'><i class='fa fa-search fa-fw'></i></span><input type='search' id='filter-results-input' class='form-control rg2-result-search' placeholder='"+rg2.t("Search")+"'>",a=$("#rg2-result-search"),a.empty().append(b),$(".rg2-result-search").keyup(function(a){var b,c,d,e;for(b=a.target.value.toUpperCase(),c=$("#rg2-result-table tr"),e=1;e<c.length;e+=1)d=c[e].getElementsByTagName("td")[1],d&&(d.innerHTML.toUpperCase().indexOf(b)>-1?c[e].style.display="":c[e].style.display="none")}),$("#rg2-info-panel").tabs("refresh"),this.setResultCheckboxes(),0===rg2.courses.getHighestControlNumber()?$("#rg2-control-select").prop("disabled",!0):$("#rg2-control-select").prop("disabled",!1),$(".resulttable tr").dblclick(function(){var a;rg2.events.hasResults()&&!rg2.events.isScoreEvent()&&(a=$(this).find("td").attr("id"),a&&rg2.stats.showStats(parseInt(a,10)))})},createCourseMenu:function(){$("#rg2-course-table").empty().append(rg2.courses.formatCoursesAsTable()),$(".courselist").click(function(a){var b=parseInt(a.currentTarget.id,10);a.target.checked?(rg2.courses.putOnDisplay(b),$(".showcourse").filter("#"+b).prop("checked",!0)):(rg2.courses.removeFromDisplay(b),$(".allcourses").prop("checked",!1),$(".showcourse").filter("#"+b).prop("checked",!1)),rg2.requestedHash.setCourses(),rg2.redraw(!1)}),$(".allcourses").click(function(a){a.target.checked?(rg2.courses.putAllOnDisplay(),$(".courselist").prop("checked",!0),$(".showcourse").prop("checked",!0)):(rg2.courses.removeAllFromDisplay(),$(".courselist").prop("checked",!1),$(".showcourse").prop("checked",!1)),rg2.requestedHash.setCourses(),rg2.redraw(!1)}),$(".tracklist").click(function(a){var b,c=a.target.id;b=".showtrack-"+c,a.target.checked?(rg2.results.updateTrackDisplay(parseInt(c,10),!0),$(b).prop("checked",!0),$(".allcoursetracks").filter("#"+c).prop("checked",!0)):(rg2.results.updateTrackDisplay(parseInt(c,10),!1),$(".alltracks").prop("checked",!1),$(b).prop("checked",!1),$(".allcoursetracks").filter("#"+c).prop("checked",!1)),rg2.requestedHash.setRoutes(),rg2.redraw(!1)}),$(".alltracks").click(function(a){a.target.checked?(rg2.results.updateTrackDisplay(rg2.config.DISPLAY_ALL_COURSES,!0),$(".tracklist").prop("checked",!0)):(rg2.results.updateTrackDisplay(rg2.config.DISPLAY_ALL_COURSES,!1),$(".tracklist").prop("checked",!1)),rg2.requestedHash.setRoutes(),rg2.redraw(!1)})},initialiseSpinners:function(){$("#spn-control-circle").spinner({max:50,min:3,step:1,spin:function(a,b){rg2.setConfigOption("circleSize",b.value),rg2.redraw(!1)}}).val(rg2.options.circleSize),$("#spn-course-width").spinner({max:10,min:1,step:.5,spin:function(a,b){rg2.setConfigOption("courseWidth",b.value),rg2.redraw(!1)}}).val(rg2.options.courseWidth),$("#spn-map-intensity").spinner({max:100,min:0,step:10,numberFormat:"n",spin:function(a,b){rg2.setConfigOption("mapIntensity",b.value/100),rg2.redraw(!1)}}).val(100*rg2.options.mapIntensity),$("#spn-name-font-size").spinner({max:30,min:5,step:1,numberFormat:"n",spin:function(a,b){rg2.setConfigOption("replayFontSize",b.value),rg2.redraw(!1)}}).val(rg2.options.replayFontSize),$("#spn-route-intensity").spinner({max:100,min:0,step:10,numberFormat:"n",spin:function(a,b){rg2.setConfigOption("routeIntensity",b.value/100),rg2.redraw(!1)}}).val(100*rg2.options.routeIntensity),$("#spn-route-width").spinner({max:10,min:1,step:.5,spin:function(a,b){rg2.setConfigOption("routeWidth",b.value),rg2.redraw(!1)}}).val(rg2.options.routeWidth),$("#spn-tail-length").spinner({max:600,min:0,spin:function(a,b){rg2.animation.setTailLength(b.value)}}).val(rg2.config.DEFAULT_TAIL_LENGTH),$("#spn-offset").spinner({max:900,min:-900,disabled:!0,spin:function(a,b){rg2.drawing.adjustOffset(b.value)}}).val(0),$("#spn-max-speed").spinner({max:10,min:1,spin:function(a,b){rg2.results.setSpeedRange(b.value,rg2.options.minSpeed)}}).val(rg2.options.maxSpeed),$("#spn-min-speed").spinner({max:20,min:5,spin:function(a,b){rg2.results.setSpeedRange(rg2.options.maxSpeed,b.value)}}).val(rg2.options.minSpeed)},setAutofitSpinner:function(a){$("#spn-offset").spinner("value",a)},event_list_li:[],createEventMenu:function(){var a,b;rg2.config.managing||(a="<span class='input-group-addon'><i class='fa fa-search fa-fw'></i></span><input type='search' id='filter-events-input' class='form-control rg2-event-search' placeholder='"+rg2.t("Search")+"'>",b=$("#rg2-event-search"),b.empty().append(a),$(".rg2-event-search").keyup(function(a){var b,c,d;for(b=a.target.value.toUpperCase(),c=$("#rg2-event-list")[0].getElementsByTagName("a"),d=0;d<c.length;d+=1)c[d].innerText.toUpperCase().indexOf(b)>-1?c[d].parentElement.style.display="":c[d].parentElement.style.display="none"}),a=rg2.events.formatEventsAsMenu(),b=$("#rg2-event-ul"),void 0!==b.menu("instance")&&b.menu("destroy"),b.empty().append(a).menu({role:null,select:function(a,b){var c;c=parseInt(b.item[0].id.replace("event-",""),10),rg2.loadEvent(c),rg2.requestedHash.setNewEvent(rg2.events.getKartatEventID())}}),this.event_list_li=$("#rg2-event-ul > li").clone())},setUIEventHandlers:function(){var a,b,c;c=this,$("#rg2-resize-info").click(function(){rg2.resizeInfoDisplay()}),$("#rg2-hide-info-panel-control").click(function(){rg2.resizeInfoDisplay()}),$("#rg2-control-select").prop("disabled",!0).change(function(){rg2.animation.setStartControl($("#rg2-control-select").val())}),$("#rg2-name-select").prop("disabled",!0).change(function(){rg2.drawing.setName(parseInt($("#rg2-name-select").val(),10))}),$("#rg2-course-select").change(function(){rg2.drawing.setCourse(parseInt($("#rg2-course-select").val(),10))}),$("#rg2-enter-name").click(function(){rg2.drawing.setNameAndTime()}).keyup(function(){rg2.drawing.setNameAndTime()}),$("#rg2-new-comments").focus(function(){a=$("#rg2-new-comments").val(),a===rg2.t(rg2.config.DEFAULT_NEW_COMMENT)&&$("#rg2-new-comments").val("")}),$("#chk-snap-toggle").prop("checked",rg2.options.snap).click(function(a){a.target.checked?rg2.options.snap=!0:rg2.options.snap=!1}),$("#chk-show-three-seconds").prop("checked",rg2.options.showThreeSeconds).click(function(a){a.target.checked?rg2.options.showThreeSeconds=!0:rg2.options.showThreeSeconds=!1,rg2.redraw(!1)}),$("#chk-show-GPS-speed").prop("checked",rg2.options.showGPSSpeed).click(function(a){a.target.checked?rg2.options.showGPSSpeed=!0:rg2.options.showGPSSpeed=!1,rg2.redraw(!1)}),$("#rg2-select-language").click(function(){b=$("#rg2-select-language").val(),b!==rg2.getDictionaryCode()&&("en"===b?c.setNewLanguage("en"):rg2.getNewLanguage(b))}),$("#rg2-load-gps-file").change(function(a){rg2.drawing.uploadGPS(a)})},configureUI:function(){$(document).on("contextmenu",function(a){a.preventDefault()});var a;a=this,$("#rg2-info-panel").tabs({disabled:[rg2.config.TAB_COURSES,rg2.config.TAB_RESULTS,rg2.config.TAB_DRAW],active:rg2.config.TAB_EVENTS,heightStyle:"content",activate:function(){a.tabActivated()}}),$("#rg2-result-table").accordion({collapsible:!0,heightStyle:"content"}),$("#rg2-draw").accordion({collapsible:!1,heightStyle:"content"}),$("#rg2-clock").text("00:00:00"),$("#rg2-clock-slider").slider({slide:function(a,b){rg2.animation.clockSliderMoved(b.value)}}),$("#rg2-header-container").css("color",rg2Config.header_text_colour).css("background",rg2Config.header_colour),$("#rg2-about-dialog").hide(),$("#rg2-splits-display").hide(),$("#rg2-track-names").hide(),$("#rg2-add-new-event").hide(),$("#rg2-load-progress-bar").progressbar({value:!1}),$("#rg2-load-progress-label").text(""),$("#rg2-load-progress").hide(),$("#rg2-map-load-progress-bar").progressbar({value:!1}),$("#rg2-map-load-progress-label").text(""),$("#rg2-map-load-progress").hide(),$("#rg2-option-controls").hide(),$("#rg2-animation-controls").hide(),$("#rg2-splitsbrowser").hide(),this.initialiseButtons(),this.initialiseSpinners(),this.setUIEventHandlers()}};rg2.ui=a}(),function(){function a(a){var b,c;b=rg2.results.getFullResult(a),this.name=b.name,this.initials=b.initials,this.runnerid=a,this.starttime=b.starttime,this.splits=b.splits,this.legpos=b.legpos,this.colour=rg2.colours.getNextColour(),b.isScoreEvent?(c={},c.name=b.coursename,c.x=b.scorex,c.y=b.scorey,c.codes=b.scorecodes):c=rg2.courses.getCourseDetails(b.courseid),this.coursename=c.name,this.nextStopTime=rg2.config.VERY_HIGH_TIME_IN_SECS,this.x=[],this.y=[],this.cumulativeDistance=[],this.cumulativeDistance[0]=0,this.legTrackDistance=[],this.legTrackDistance[0]=0,this.cumulativeTrackDistance=[],this.cumulativeTrackDistance[0]=0,b.hasValidTrack?this.expandTrack(b.trackx,b.tracky,b.xysecs):this.expandTrack(c.x,c.y,b.splits),this.addTrackDistances(c,b),b=0,c=0}a.prototype={Constructor:a,addTrackDistances:function(a,b){var c,d,e;if(e=this.cumulativeDistance.length-1,void 0!==a.codes)if(b.splits.length>1)for(c=1;c<a.codes.length;c+=1)d=b.splits[c]<=e?b.splits[c]:e,this.cumulativeTrackDistance[c]=this.cumulativeDistance[d],this.legTrackDistance[c]=this.cumulativeTrackDistance[c]-this.cumulativeTrackDistance[c-1];else this.legTrackDistance[1]=this.cumulativeDistance[e],this.cumulativeTrackDistance[1]=this.cumulativeDistance[e]},expandTrack:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(m=0,n=0,o=a[0],p=b[0],q=0,l=0,this.x[0]=a[0],this.y[0]=b[0],r=rg2.events.getMetresPerPixel(),void 0===r&&(r=1),d=1;d<c.length;d+=1){for(j=a[d],k=b[d],e=j-o,f=k-p,l+=rg2.utils.getDistanceBetweenPoints(j,k,o,p)*r,i=l-q,n=c[d],0===n&&(n=m+1),g=n-m,h=m+1;h<n;h+=1)this.x[h]=Math.round(o+(h-m)*e/g),this.y[h]=Math.round(p+(h-m)*f/g),this.cumulativeDistance[h]=Math.round(q+(h-m)*i/g);this.x[n]=j,this.y[n]=k,this.cumulativeDistance[n]=Math.round(l),o=j,p=k,q=l,m=n}}},rg2.Runner=a}(),function(){function a(){"use strict";this.result=null,this.results=[],this.course=null,this.byLegPos=[],this.byRacePos=[],this.resultIndex=null,this.iterations=3}a.prototype={Constructor:a,initialise:function(a){var b;for(this.result=rg2.results.getFullResultForRawID(a),this.results=rg2.results.getAllResultsForCourse(this.result.courseid),b=0;b<this.results.length;b+=1)this.results[b].rawid===a&&(this.resultIndex=b);if(this.course=rg2.courses.getCourseDetails(this.result.courseid),this.controls=this.course.codes.length,this.controls<=2)throw new this.rg2Exception(rg2.t("No splits available."));this.analyseCourse()},rg2Exception:function(a){this.message=a},showStats:function(a){try{this.initialise(a),this.generateSummary(),this.generateTableByLegPos(),this.generateTableByRacePos(),this.generateSplitsTable(),this.displayStats()}catch(a){return void(a instanceof this.rg2Exception?rg2.utils.showWarningDialog(rg2.t("Statistics"),a.message):rg2.utils.showWarningDialog(rg2.t("Statistics"),rg2.t("Data inconsistency.")))}},displayStats:function(){$("#rg2-stats-summary-text").empty().text(rg2.t("Summary")),$("#rg2-stats-leg-text").empty().text(rg2.t("Leg times")),$("#rg2-stats-cumulative-text").empty().text(rg2.t("Cumulative times")),$("#rg2-stats-splits-text").empty().text(rg2.t("Splits")),$("#rg2-stats-tabs").tabs({active:0}),$("#rg2-stats-table").dialog({title:this.result.name,resizable:!1,maxHeight:.98*$("#rg2-map-canvas").height(),width:Math.min(.8*$("#rg2-map-canvas").width(),1e3),position:{my:"top",at:"top",of:"#rg2-map-canvas"}})},generateSummary:function(){var a,b,c;b=this.getLegPosInfo(),a=rg2.t("Name")+": <strong>"+this.result.name+"</strong><br>"+rg2.t("Course")+":<strong>"+this.result.coursename+"</strong><br>",a+=rg2.t("Time")+": <strong>"+this.result.time+"</strong><br>",a+=rg2.t("Position")+": <strong>"+this.results[this.resultIndex].racepos[this.controls-1]+" / "+this.results.length+"</strong><br>",a+=rg2.t("Average leg position")+": <strong>"+b.average+"</strong> (",a+=rg2.t("Best")+": <strong>"+b.best+"</strong>, "+rg2.t("Worst")+": <strong>"+b.worst+")</strong><br>",a+=rg2.t("Estimated loss")+": <strong>"+rg2.utils.formatSecsAsMMSS(this.results[this.resultIndex].totalLoss),this.isNumberOverZero(this.result.timeInSecs)&&(a+=" ("+(100*this.results[this.resultIndex].totalLoss/this.result.timeInSecs).toFixed(1)+" %)"),a+="</strong><br>",a+=rg2.t("Performance")+": <strong>"+(100*this.result.performanceIndex[this.iterations-1]).toFixed(1)+"%</strong><br>",c=this.results[this.resultIndex].refRatio.slice(1),a+=rg2.t("Consistency")+": <strong>"+(100*this.getStandardDeviation(c)).toFixed(1)+"%</strong>",$("#rg2-stats-summary").empty().append(a)},getMean:function(a){return a.reduce(function(a,b){return a+b},0)/a.length},getStandardDeviation:function(a){var b;return b=this.getMean(a),Math.sqrt(a.reduce(function(a,c){return a+Math.pow(c-b,2)},0)/a.length)},isNumberOverZero:function(a){return!(isNaN(parseFloat(a))||!isFinite(a))&&a>0},generateTableByLegPos:function(){var a,b,c,d,e,f;for(d=[],a=0;a<this.results[this.resultIndex].splits.length;a+=1){if(c={},0===a?c.control="S":a==this.results[this.resultIndex].splits.length-1?c.control="F":c.control=a+" ("+this.course.codes[a]+")",0===a?c.time="0:00":c.time=rg2.utils.formatSecsAsMMSS(this.results[this.resultIndex].legSplits[a]),0===a||0===this.results[this.resultIndex].legpos[a]?c.position="-":c.position=this.results[this.resultIndex].legpos[a],0===a?c.performance="-":c.performance=(100*this.results[this.resultIndex].refRatio[a]).toFixed(1),c.best=rg2.utils.formatSecsAsMMSS(this.byLegPos[a][0].t),0===a)c.who="-";else{for(f=this.results[this.byLegPos[a][0].resid].name,b=1;b<this.byLegPos[a].length&&this.byLegPos[a][0].t===this.byLegPos[a][b].t;b+=1)f+=", "+this.results[this.byLegPos[a][b].resid].name;c.who=f}e=this.results[this.resultIndex].legSplits[a]-this.byLegPos[a][0].t,0===a?c.behind="-":0===this.results[this.resultIndex].legSplits[a]?c.behind="-":c.behind=rg2.utils.formatSecsAsMMSS(e),0===a?c.percent=0:0===this.results[this.resultIndex].legSplits[a]?c.percent="-":c.percent=parseInt(100*e/this.byLegPos[a][0].t,10),c.predicted=rg2.utils.formatSecsAsMMSS(this.results[this.resultIndex].predictedSplits[a]),0===this.results[this.resultIndex].legSplits[a]?c.loss="-":c.loss=rg2.utils.formatSecsAsMMSS(this.results[this.resultIndex].loss[a]),d.push(c)}var g={columnDefs:[{headerName:rg2.t("Control"),field:"control",width:80},{headerName:rg2.t("Time"),field:"time",width:80,comparator:this.timeComparator.bind(this)},{headerName:rg2.t("Position"),field:"position",width:75},{headerName:rg2.t("Performance"),field:"performance",width:95,comparator:this.perfComparator.bind(this)},{headerName:rg2.t("Best"),field:"best",width:80},{headerName:rg2.t("Who"),field:"who",headerClass:"align-left",cellClass:"align-left",width:180,tooltipField:"who"},{headerName:rg2.t("Behind"),field:"behind",width:80,comparator:this.timeComparator.bind(this)},{headerName:"%",field:"percent",width:60},{headerName:rg2.t("Predicted"),field:"predicted",width:100,comparator:this.timeComparator.bind(this)},{headerName:rg2.t("Loss"),field:"loss",width:75,comparator:this.timeComparator.bind(this)}],rowData:d,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center",sortable:!0}};$("#rg2-leg-table").empty(),new agGrid.Grid(document.querySelector("#rg2-leg-table"),g)},timeComparator:function(a,b){return this.getTimeValue(a)-this.getTimeValue(b)},getTimeValue:function(a){return"-"===a?0:parseFloat(a.replace(":","."))},perfComparator:function(a,b){return this.getPerfValue(a)-this.getPerfValue(b)},getPerfValue:function(a){return"-"===a?0:parseFloat(a)},getTimeFromLegPos:function(a){return a.t},getAverages:function(a,b){var c,d,e,f,g;if(0===a.length)return{mean:0,median:0};for(a.sort(function(a,b){return a-b}),d=0,e=a.length,b<100&&(f=parseInt(e*b/100,10),f>3&&(a.splice(f),e=a.length)),c=0;c<e;c+=1)d+=a[c];return g=1===e?a[0]:e%2===0?(a[e/2-1]+a[e/2])/2:a[Math.floor(e/2)],{mean:d/e,median:g}},generateTableByRacePos:function(){var a,b,c,d,e,f,g;for(d=[],g=0,a=0;a<this.results[this.resultIndex].splits.length;a+=1){if(c={},0===a?c.control="S":a==this.results[this.resultIndex].splits.length-1?c.control="F":c.control=a+" ("+this.course.codes[a]+")",0===a?c.time="0:00":this.results[this.resultIndex].splits[a]===this.results[this.resultIndex].splits[a-1]?c.time="":c.time=rg2.utils.formatSecsAsMMSS(this.results[this.resultIndex].splits[a]),0===a||0===this.results[this.resultIndex].racepos[a]?c.position="-":c.position=this.results[this.resultIndex].racepos[a],c.best=rg2.utils.formatSecsAsMMSS(this.byRacePos[a][0].t),0===a)c.who="-";else{for(f=this.results[this.byRacePos[a][0].resid].name,b=1;b<this.byRacePos[a].length&&this.byRacePos[a][0].t===this.byRacePos[a][b].t;b+=1)f+=", "+this.results[this.byRacePos[a][b].resid].name;c.who=f}e=this.results[this.resultIndex].splits[a]-this.byRacePos[a][0].t,0===a||0===this.results[this.resultIndex].racepos[a]?c.behind="-":c.behind=rg2.utils.formatSecsAsMMSS(e),0===a||0===this.results[this.resultIndex].racepos[a]?c.percent="-":c.percent=parseInt(100*e/this.byRacePos[a][0].t,10),g+=this.results[this.resultIndex].loss[a],c.loss=rg2.utils.formatSecsAsMMSS(g),d.push(c)}var h={columnDefs:[{headerName:rg2.t("Control"),field:"control",width:88},{headerName:rg2.t("Time"),field:"time",width:85},{headerName:rg2.t("Position"),field:"position",width:100},{headerName:rg2.t("Best"),field:"best",width:85},{headerName:rg2.t("Who"),field:"who",headerClass:"align-left",cellClass:"align-left",width:200,tooltipField:"who"},{headerName:rg2.t("Behind"),field:"behind",width:85},{headerName:"%",field:"percent",width:85},{headerName:"Loss",field:"loss",width:100}],rowData:d,domLayout:"autoHeight",defaultColDef:{headerClass:"align-center",cellClass:"align-center"}};$("#rg2-race-table").empty(),new agGrid.Grid(document.querySelector("#rg2-race-table"),h)},generateSplitsTable:function(){var a,b,c,d,e,f,g,h;for(g=[{headerName:rg2.t("Pos"),field:"position",width:60,pinned:"left",sortable:!0},{headerName:rg2.t("Name"),field:"name",headerClass:"align-left",cellClass:"align-left",width:150,pinned:"left"},{headerName:rg2.t("Time"),field:"time",width:85}],b=1;b<this.controls-1;b+=1)g.push({headerName:b,field:"C"+b,cellRenderer:this.renderSplits,width:110});for(g.push({headerName:rg2.t("F"),field:"finish",cellRenderer:this.renderSplits,width:110}),g.push({headerName:rg2.t("Loss"),field:"loss",width:100}),g.push({headerName:rg2.t("Performance"),field:"performance",width:100}),g.push({headerName:rg2.t("Consistency"),field:"consistency",width:100}),f=[],this.results.sort(function(a,b){return a.racepos[a.splits.length-1]<=0?1:b.racepos[b.splits.length-1]<=0?-1:a.racepos[a.splits.length-1]-b.racepos[b.splits.length-1]}),a=0;a<this.results.length;a+=1){for(e={},c=this.results[a],0===c.racepos[this.controls-1]?e.position="":e.position=c.racepos[this.controls-1],e.name=c.name,e.time=c.time,b=1;b<this.controls-1;b+=1)c.splits[b]===c.splits[b-1]?e["C"+b]={split:"0:00",pos:c.racepos[b]}:e["C"+b]={split:rg2.utils.formatSecsAsMMSS(c.splits[b]),pos:c.racepos[b]};for(e.finish={split:rg2.utils.formatSecsAsMMSS(c.splits[this.controls-1]),pos:c.racepos[this.controls-1]},e.loss=rg2.utils.formatSecsAsMMSS(c.timeInSecs-c.totalLoss),e.performance=(100*c.performanceIndex[this.iterations-1]).toFixed(1),h=c.refRatio.slice(1),e.consistency=(100*this.getStandardDeviation(h)).toFixed(1),f.push(e),e={},b=1;b<this.controls-1;b+=1)e["C"+b]={split:rg2.utils.formatSecsAsMMSS(c.legSplits[b]),pos:c.legpos[b]};e.finish={split:rg2.utils.formatSecsAsMMSS(c.legSplits[this.controls-1]),pos:c.legpos[this.controls-1]},e.loss=rg2.utils.formatSecsAsMMSS(c.totalLoss),f.push(e)}var i={columnDefs:g,rowData:f,defaultColDef:{headerClass:"align-center",cellClass:"align-center"}};d=.98*$("#rg2-map-canvas").height()-175,$("#rg2-results-grid-wrapper").removeAttr("style").attr("style","height: "+d+"px;"),$("#rg2-results-grid").empty(),new agGrid.Grid(document.querySelector("#rg2-results-grid"),i)},renderSplits:function(a){var b;return"0:00"===a.value.split?"":(b=a.value.split,0!==a.value.pos&&(b+=" ("+a.value.pos+")",1===a.value.pos&&(b='<span class="rg2-first">'+b+"</span>"),2===a.value.pos&&(b='<span class="rg2-second">'+b+"</span>"),3===a.value.pos&&(b='<span class="rg2-third">'+b+"</span>")),b)},getLegPosInfo:function(){var a,b,c,d,e,f;for(b=0,c=0,e=0,d=9999,a=1;a<this.result.legpos.length;a+=1)0!==this.result.legpos[a]&&(b+=this.result.legpos[a],c+=1,d>this.result.legpos[a]&&(d=this.result.legpos[a]),e<this.result.legpos[a]&&(e=this.result.legpos[a]));return c>0?f=(b/c).toFixed(1):(f=0,d=0,e=0),{best:d,worst:e,average:f}},analyseCourse:function(){var a,b,c,d;for(this.calculateLostTime(),this.byLegPos.length=0,this.byRacePos.length=0,c=[],d=[],a=0;a<this.controls;a+=1){for(c.length=0,
d.length=0,b=0;b<this.results.length;b+=1)0===a?(c.push({t:0,resid:0,pos:0}),d.push({t:0,resid:0,pos:0})):(0!==this.results[b].legSplits[a]&&c.push({t:this.results[b].legSplits[a],resid:b,pos:this.results[b].legpos[a]}),a<=this.results[b].lastValidSplit&&d.push({t:this.results[b].splits[a],resid:b,pos:this.results[b].racepos[a]}));c.sort(function(a,b){return a.t-b.t}),d.sort(function(a,b){return a.t-b.t}),this.byLegPos.push(c.slice()),this.byRacePos.push(d.slice())}},calculateLostTime:function(){var a,b,c,d;for(this.course.refLegTime=[],a=0;a<this.results.length;a+=1){for(this.results[a].performanceIndex=[],this.results[a].iterSplits=[],d=[],b=0;b<this.controls;b+=1)d.push(this.results[a].legSplits[b]);this.results[a].iterSplits.push(d.slice(0))}for(c=0;c<this.iterations;c+=1)for(this.iterateLostTime(c),a=0;a<this.results.length;a+=1){for(d.length=0,b=0;b<this.controls;b+=1)d.push(Math.min(this.results[a].predictedSplits[b],this.results[a].legSplits[b]));this.results[a].iterSplits.push(d.slice(0))}},iterateLostTime:function(a){var b,c,d,e,f,g,h;for(e=[],h=[],b=0;b<this.controls;b+=1){for(e.length=0,c=0;c<this.results.length;c+=1)0!==this.results[c].iterSplits[a][b]&&e.push(this.results[c].iterSplits[a][b]);d=this.getAverages(e,25),h.push(d.median)}for(this.course.refLegTime.push(h),f=[],b=0;b<this.results.length;b+=1){for(this.results[b].refRatio=[],this.results[b].refRatio[0]=0,f.length=0,c=0;c<this.controls;c+=1)0===this.results[b].iterSplits[a][c]?this.results[b].refRatio[c]=0:this.results[b].refRatio[c]=this.course.refLegTime[a][c]/this.results[b].iterSplits[a][c],f.push(this.results[b].refRatio[c]);d=this.getAverages(f,100),this.results[b].performanceIndex.push(d.median)}for(b=0;b<this.results.length;b+=1){for(this.results[b].predictedSplits=[],this.results[b].predictedSplits[0]=0,this.results[b].loss=[],this.results[b].loss[0]=0,g=0,c=0;c<this.controls;c+=1)this.results[b].performanceIndex[a]>0?this.results[b].predictedSplits[c]=parseInt(this.course.refLegTime[a][c]/this.results[b].performanceIndex[a],10):this.results[b].predictedSplits[c]=this.results[b].legSplits[c],this.results[b].loss[c]=this.results[b].legSplits[c]-this.results[b].predictedSplits[c],this.results[b].loss[c]<0&&(this.results[b].loss[c]=0),g+=this.results[b].loss[c];this.results[b].totalLoss=g}}},rg2.Stats=a}(),function(){function a(){this.colours=["#ff0000","#00ff00","#0000ff","#800000","#008000","#000080","#ffff00","#ff00ff","#00ffff","#808000","#800080","#008080"],this.colourIndex=0}function b(a){this.x="",this.y=a,this.name=null,this.password=null}function c(){this.courseid=null,this.coursename=null,this.resultid=null,this.variant=null,this.isScoreCourse=!1,this.eventid=null,this.name=null,this.comments=null,this.x=[],this.y=[],this.controlx=[],this.controly=[],this.time=[],this.startsecs=0,this.totaltime=0,this.splits=[]}function d(){this.id=0,this.courses=[],this.routes=[],this.hash=""}var e={rotatePoint:function(a,b,c){var d={};return d.x=Math.cos(c)*a-Math.sin(c)*b,d.y=Math.sin(c)*a+Math.cos(c)*b,d},getDistanceBetweenPoints:function(a,b,c,d){return Math.sqrt(Math.pow(a-c,2)+Math.pow(b-d,2))},getAngle:function(a,b,c,d){var e=Math.atan2(d-b,c-a);return e<0&&(e+=2*Math.PI),e},getLatLonDistance:function(a,b,c,d){var e,f,g;return e=(c-a).toRad(),f=(d-b).toRad(),g=Math.sin(e/2)*Math.sin(e/2)+Math.cos(a.toRad())*Math.cos(c.toRad())*Math.sin(f/2)*Math.sin(f/2),12742018*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))},getSecsFromHHMMSS:function(a){var b,c;return a?(c=0,b=a.replace(/\./g,":").split(":"),2===b.length?c=60*parseInt(b[0],10)+parseInt(b[1],10):3===b.length&&(c=3600*parseInt(b[0],10)+60*parseInt(b[1],10)+parseInt(b[2],10)),isNaN(c)?0:c):0},getSecsFromHHMM:function(a){var b,c;return a?(c=0,b=a.split(":"),c=3600*parseInt(b[0],10)+60*parseInt(b[1],10),isNaN(c)?0:c):0},formatSecsAsMMSS:function(a){var b,c,d;return c=Math.floor(a/60),b=c,d=a-60*c,b+=d<10?":0"+d:":"+d},formatSecsAsHHMMSS:function(a){var b,c,d;return c=Math.floor(a/3600),b=c<10?"0"+c+":":c+":",a-=3600*c,d=Math.floor(a/60),b+=d<10?"0"+d:d,a-=60*d,b+=a<10?":0"+a:":"+a},showWarningDialog:function(a,b){var c="<div id=rg2-warning-dialog>"+b+"</div>";$(c).dialog({title:a,dialogClass:"rg2-warning-dialog",close:function(){$("#rg2-warning-dialog").dialog("destroy").remove()},buttons:{Ok:function(){$(this).dialog("close")}}})},setButtonState:function(a,b){var c;for(c=0;c<b.length;c+=1)$(b[c]).button(a)},generateOption:function(a,b,c){var d;return d=document.createElement("option"),d.value=a,d.text=b,c&&(d.selected=!0),d},extractAttributeZero:function(a,b,c){return a.length>0?a[0].getAttribute(b).trim():c},extractTextContentZero:function(a,b){return a.length>0?a[0].textContent.trim():b},generateRouteShareLink:function(a){var b,c;return b=rg2.results.getFullResultForRawID(a),c=rg2Config.json_url.replace("rg2api.php","index.php")+"#"+rg2.events.getKartatEventID(),c+="&route="+a,void 0!==b&&(c+="&course="+b.courseid),c},showShareDialog:function(a,b,c){var d;d=this.getShareDialog(b,c),$(d).dialog({title:a,dialogClass:"rg2-share-dialog",width:"auto",close:function(){$("#rg2-share-dialog").dialog("destroy").remove()},buttons:{Ok:function(){$(this).dialog("close")}}})},getShareDialog:function(a,b){var c,d;return c=this.generateRouteShareLink(a),d="<div id=rg2-share-dialog><p>"+rg2.t(b)+"</p>",d+='<input autofocus onFocus="this.select()" readonly size='+c.length+" value="+c+"></input></div>"},createModalDialog:function(a){var b;b=this,b.onDo=a.onDo,b.onCancel=a.onCancel,$(a.selector).dialog({title:a.title,modal:!0,dialogClass:"no-close "+a.classes,closeOnEscape:!1,buttons:[{text:a.doText,click:function(){b.onDo()}},{text:"Cancel",click:function(){b.onCancel()}}]})}};Number.prototype.toRad=function(){return this*Math.PI/180},a.prototype={Constructor:a,getNextColour:function(){return this.colourIndex=(this.colourIndex+1)%this.colours.length,this.colours[this.colourIndex]}},b.prototype={Constructor:b,setDetails:function(a,b){return a.length>4&&b.length>4&&(this.name=a,this.password=b,!0)},alterString:function(a,b){var c,d;for(d="",c=0;c<a.length;c+=1)d+=a.charAt(c)+b.charAt(c);return d},encodeUser:function(){return{x:this.alterString(this.name+this.password,this.y),y:this.y}}},d.prototype={Constructor:d,parseHash:function(a){var b,c;for(this.id=0,this.courses.length=0,this.routes.length=0,b=a.split("&"),c=0;c<b.length;c+=1)b[c]=b[c].toLowerCase(),b[c].search("#")!==-1&&(this.id=parseInt(b[c].replace("#",""),10)),b[c].search("course=")!==-1&&(this.courses=b[c].replace("course=","").split(",")),b[c].search("route=")!==-1&&(this.routes=b[c].replace("route=","").split(","));return this.courses=this.courses.map(Number),this.routes=this.routes.map(Number),isNaN(this.id)&&(this.id=0,this.courses.length=0,this.routes.length=0),this.setHash(),this.id},getRoutes:function(){return this.routes},getCourses:function(){return this.courses},getID:function(){return this.id},getTab:function(){return this.routes.length>0?rg2.config.TAB_RESULTS:rg2.config.TAB_COURSES},setCourses:function(){this.courses=rg2.courses.getCoursesOnDisplay(),this.setHash(),window.history.replaceState({hash:this.hash},"",this.hash)},setRoutes:function(){this.routes=rg2.results.getTracksOnDisplay(),this.setHash(),window.history.replaceState({hash:this.hash},"",this.hash)},setNewEvent:function(a){this.id=a,this.courses.length=0,this.routes.length=0,this.setHash(),window.history.pushState({hash:this.hash},"",this.hash)},getHash:function(){return this.hash},setHash:function(){0===this.id?this.hash="#0":(this.hash="#"+this.id+this.extractItems(this.courses,"&course="),this.hash+=this.extractItems(this.routes,"&route="))},extractItems:function(a,b){var c,d;if(d="",a.length>0)for(d+=b,c=0;c<a.length;c+=1)c>0&&(d+=","),d+=a[c];return d}},rg2.utils=e,rg2.RouteData=c,rg2.RequestedHash=d,rg2.Colours=a,rg2.User=b}(),function(){var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[\x01-\x7F]/g,c=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,d=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,e={"Á":"Aacute","á":"aacute","Ă":"Abreve","ă":"abreve","∾":"ac","∿":"acd","∾̳":"acE","Â":"Acirc","â":"acirc","´":"acute","А":"Acy","а":"acy","Æ":"AElig","æ":"aelig","⁡":"af","𝔄":"Afr","𝔞":"afr","À":"Agrave","à":"agrave","ℵ":"aleph","Α":"Alpha","α":"alpha","Ā":"Amacr","ā":"amacr","⨿":"amalg","&":"amp","⩕":"andand","⩓":"And","∧":"and","⩜":"andd","⩘":"andslope","⩚":"andv","∠":"ang","⦤":"ange","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","∡":"angmsd","∟":"angrt","⊾":"angrtvb","⦝":"angrtvbd","∢":"angsph","Å":"angst","⍼":"angzarr","Ą":"Aogon","ą":"aogon","𝔸":"Aopf","𝕒":"aopf","⩯":"apacir","≈":"ap","⩰":"apE","≊":"ape","≋":"apid","'":"apos","å":"aring","𝒜":"Ascr","𝒶":"ascr","≔":"colone","*":"ast","≍":"CupCap","Ã":"Atilde","ã":"atilde","Ä":"Auml","ä":"auml","∳":"awconint","⨑":"awint","≌":"bcong","϶":"bepsi","‵":"bprime","∽":"bsim","⋍":"bsime","∖":"setmn","⫧":"Barv","⊽":"barvee","⌅":"barwed","⌆":"Barwed","⎵":"bbrk","⎶":"bbrktbrk","Б":"Bcy","б":"bcy","„":"bdquo","∵":"becaus","⦰":"bemptyv","ℬ":"Bscr","Β":"Beta","β":"beta","ℶ":"beth","≬":"twixt","𝔅":"Bfr","𝔟":"bfr","⋂":"xcap","◯":"xcirc","⋃":"xcup","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨆":"xsqcup","★":"starf","▽":"xdtri","△":"xutri","⨄":"xuplus","⋁":"Vee","⋀":"Wedge","⤍":"rbarr","⧫":"lozf","▪":"squf","▴":"utrif","▾":"dtrif","◂":"ltrif","▸":"rtrif","␣":"blank","▒":"blk12","░":"blk14","▓":"blk34","█":"block","=⃥":"bne","≡⃥":"bnequiv","⫭":"bNot","⌐":"bnot","𝔹":"Bopf","𝕓":"bopf","⊥":"bot","⋈":"bowtie","⧉":"boxbox","┐":"boxdl","╕":"boxdL","╖":"boxDl","╗":"boxDL","┌":"boxdr","╒":"boxdR","╓":"boxDr","╔":"boxDR","─":"boxh","═":"boxH","┬":"boxhd","╤":"boxHd","╥":"boxhD","╦":"boxHD","┴":"boxhu","╧":"boxHu","╨":"boxhU","╩":"boxHU","⊟":"minusb","⊞":"plusb","⊠":"timesb","┘":"boxul","╛":"boxuL","╜":"boxUl","╝":"boxUL","└":"boxur","╘":"boxuR","╙":"boxUr","╚":"boxUR","│":"boxv","║":"boxV","┼":"boxvh","╪":"boxvH","╫":"boxVh","╬":"boxVH","┤":"boxvl","╡":"boxvL","╢":"boxVl","╣":"boxVL","├":"boxvr","╞":"boxvR","╟":"boxVr","╠":"boxVR","˘":"breve","¦":"brvbar","𝒷":"bscr","⁏":"bsemi","⧅":"bsolb","\\":"bsol","⟈":"bsolhsub","•":"bull","≎":"bump","⪮":"bumpE","≏":"bumpe","Ć":"Cacute","ć":"cacute","⩄":"capand","⩉":"capbrcup","⩋":"capcap","∩":"cap","⋒":"Cap","⩇":"capcup","⩀":"capdot","ⅅ":"DD","∩︀":"caps","⁁":"caret","ˇ":"caron","ℭ":"Cfr","⩍":"ccaps","Č":"Ccaron","č":"ccaron","Ç":"Ccedil","ç":"ccedil","Ĉ":"Ccirc","ĉ":"ccirc","∰":"Cconint","⩌":"ccups","⩐":"ccupssm","Ċ":"Cdot","ċ":"cdot","¸":"cedil","⦲":"cemptyv","¢":"cent","·":"middot","𝔠":"cfr","Ч":"CHcy","ч":"chcy","✓":"check","Χ":"Chi","χ":"chi","ˆ":"circ","≗":"cire","↺":"olarr","↻":"orarr","⊛":"oast","⊚":"ocir","⊝":"odash","⊙":"odot","®":"reg","Ⓢ":"oS","⊖":"ominus","⊕":"oplus","⊗":"otimes","○":"cir","⧃":"cirE","⨐":"cirfnint","⫯":"cirmid","⧂":"cirscir","∲":"cwconint","”":"rdquo","’":"rsquo","♣":"clubs",":":"colon","∷":"Colon","⩴":"Colone",",":"comma","@":"commat","∁":"comp","∘":"compfn","ℂ":"Copf","≅":"cong","⩭":"congdot","≡":"equiv","∮":"oint","∯":"Conint","𝕔":"copf","∐":"coprod","©":"copy","℗":"copysr","↵":"crarr","✗":"cross","⨯":"Cross","𝒞":"Cscr","𝒸":"cscr","⫏":"csub","⫑":"csube","⫐":"csup","⫒":"csupe","⋯":"ctdot","⤸":"cudarrl","⤵":"cudarrr","⋞":"cuepr","⋟":"cuesc","↶":"cularr","⤽":"cularrp","⩈":"cupbrcap","⩆":"cupcap","∪":"cup","⋓":"Cup","⩊":"cupcup","⊍":"cupdot","⩅":"cupor","∪︀":"cups","↷":"curarr","⤼":"curarrm","⋎":"cuvee","⋏":"cuwed","¤":"curren","∱":"cwint","⌭":"cylcty","†":"dagger","‡":"Dagger","ℸ":"daleth","↓":"darr","↡":"Darr","⇓":"dArr","‐":"dash","⫤":"Dashv","⊣":"dashv","⤏":"rBarr","˝":"dblac","Ď":"Dcaron","ď":"dcaron","Д":"Dcy","д":"dcy","⇊":"ddarr","ⅆ":"dd","⤑":"DDotrahd","⩷":"eDDot","°":"deg","∇":"Del","Δ":"Delta","δ":"delta","⦱":"demptyv","⥿":"dfisht","𝔇":"Dfr","𝔡":"dfr","⥥":"dHar","⇃":"dharl","⇂":"dharr","˙":"dot","`":"grave","˜":"tilde","⋄":"diam","♦":"diams","¨":"die","ϝ":"gammad","⋲":"disin","÷":"div","⋇":"divonx","Ђ":"DJcy","ђ":"djcy","⌞":"dlcorn","⌍":"dlcrop",$:"dollar","𝔻":"Dopf","𝕕":"dopf","⃜":"DotDot","≐":"doteq","≑":"eDot","∸":"minusd","∔":"plusdo","⊡":"sdotb","⇐":"lArr","⇔":"iff","⟸":"xlArr","⟺":"xhArr","⟹":"xrArr","⇒":"rArr","⊨":"vDash","⇑":"uArr","⇕":"vArr","∥":"par","⤓":"DownArrowBar","⇵":"duarr","̑":"DownBreve","⥐":"DownLeftRightVector","⥞":"DownLeftTeeVector","⥖":"DownLeftVectorBar","↽":"lhard","⥟":"DownRightTeeVector","⥗":"DownRightVectorBar","⇁":"rhard","↧":"mapstodown","⊤":"top","⤐":"RBarr","⌟":"drcorn","⌌":"drcrop","𝒟":"Dscr","𝒹":"dscr","Ѕ":"DScy","ѕ":"dscy","⧶":"dsol","Đ":"Dstrok","đ":"dstrok","⋱":"dtdot","▿":"dtri","⥯":"duhar","⦦":"dwangle","Џ":"DZcy","џ":"dzcy","⟿":"dzigrarr","É":"Eacute","é":"eacute","⩮":"easter","Ě":"Ecaron","ě":"ecaron","Ê":"Ecirc","ê":"ecirc","≖":"ecir","≕":"ecolon","Э":"Ecy","э":"ecy","Ė":"Edot","ė":"edot","ⅇ":"ee","≒":"efDot","𝔈":"Efr","𝔢":"efr","⪚":"eg","È":"Egrave","è":"egrave","⪖":"egs","⪘":"egsdot","⪙":"el","∈":"in","⏧":"elinters","ℓ":"ell","⪕":"els","⪗":"elsdot","Ē":"Emacr","ē":"emacr","∅":"empty","◻":"EmptySmallSquare","▫":"EmptyVerySmallSquare"," ":"emsp13"," ":"emsp14"," ":"emsp","Ŋ":"ENG","ŋ":"eng"," ":"ensp","Ę":"Eogon","ę":"eogon","𝔼":"Eopf","𝕖":"eopf","⋕":"epar","⧣":"eparsl","⩱":"eplus","ε":"epsi","Ε":"Epsilon","ϵ":"epsiv","≂":"esim","⩵":"Equal","=":"equals","≟":"equest","⇌":"rlhar","⩸":"equivDD","⧥":"eqvparsl","⥱":"erarr","≓":"erDot","ℯ":"escr","ℰ":"Escr","⩳":"Esim","Η":"Eta","η":"eta","Ð":"ETH","ð":"eth","Ë":"Euml","ë":"euml","€":"euro","!":"excl","∃":"exist","Ф":"Fcy","ф":"fcy","♀":"female","ﬃ":"ffilig","ﬀ":"fflig","ﬄ":"ffllig","𝔉":"Ffr","𝔣":"ffr","ﬁ":"filig","◼":"FilledSmallSquare",fj:"fjlig","♭":"flat","ﬂ":"fllig","▱":"fltns","ƒ":"fnof","𝔽":"Fopf","𝕗":"fopf","∀":"forall","⋔":"fork","⫙":"forkv","ℱ":"Fscr","⨍":"fpartint","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","⅔":"frac23","⅖":"frac25","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","⁄":"frasl","⌢":"frown","𝒻":"fscr","ǵ":"gacute","Γ":"Gamma","γ":"gamma","Ϝ":"Gammad","⪆":"gap","Ğ":"Gbreve","ğ":"gbreve","Ģ":"Gcedil","Ĝ":"Gcirc","ĝ":"gcirc","Г":"Gcy","г":"gcy","Ġ":"Gdot","ġ":"gdot","≥":"ge","≧":"gE","⪌":"gEl","⋛":"gel","⩾":"ges","⪩":"gescc","⪀":"gesdot","⪂":"gesdoto","⪄":"gesdotol","⋛︀":"gesl","⪔":"gesles","𝔊":"Gfr","𝔤":"gfr","≫":"gg","⋙":"Gg","ℷ":"gimel","Ѓ":"GJcy","ѓ":"gjcy","⪥":"gla","≷":"gl","⪒":"glE","⪤":"glj","⪊":"gnap","⪈":"gne","≩":"gnE","⋧":"gnsim","𝔾":"Gopf","𝕘":"gopf","⪢":"GreaterGreater","≳":"gsim","𝒢":"Gscr","ℊ":"gscr","⪎":"gsime","⪐":"gsiml","⪧":"gtcc","⩺":"gtcir",">":"gt","⋗":"gtdot","⦕":"gtlPar","⩼":"gtquest","⥸":"gtrarr","≩︀":"gvnE"," ":"hairsp","ℋ":"Hscr","Ъ":"HARDcy","ъ":"hardcy","⥈":"harrcir","↔":"harr","↭":"harrw","^":"Hat","ℏ":"hbar","Ĥ":"Hcirc","ĥ":"hcirc","♥":"hearts","…":"mldr","⊹":"hercon","𝔥":"hfr","ℌ":"Hfr","⤥":"searhk","⤦":"swarhk","⇿":"hoarr","∻":"homtht","↩":"larrhk","↪":"rarrhk","𝕙":"hopf","ℍ":"Hopf","―":"horbar","𝒽":"hscr","Ħ":"Hstrok","ħ":"hstrok","⁃":"hybull","Í":"Iacute","í":"iacute","⁣":"ic","Î":"Icirc","î":"icirc","И":"Icy","и":"icy","İ":"Idot","Е":"IEcy","е":"iecy","¡":"iexcl","𝔦":"ifr","ℑ":"Im","Ì":"Igrave","ì":"igrave","ⅈ":"ii","⨌":"qint","∭":"tint","⧜":"iinfin","℩":"iiota","Ĳ":"IJlig","ĳ":"ijlig","Ī":"Imacr","ī":"imacr","ℐ":"Iscr","ı":"imath","⊷":"imof","Ƶ":"imped","℅":"incare","∞":"infin","⧝":"infintie","⊺":"intcal","∫":"int","∬":"Int","ℤ":"Zopf","⨗":"intlarhk","⨼":"iprod","⁢":"it","Ё":"IOcy","ё":"iocy","Į":"Iogon","į":"iogon","𝕀":"Iopf","𝕚":"iopf","Ι":"Iota","ι":"iota","¿":"iquest","𝒾":"iscr","⋵":"isindot","⋹":"isinE","⋴":"isins","⋳":"isinsv","Ĩ":"Itilde","ĩ":"itilde","І":"Iukcy","і":"iukcy","Ï":"Iuml","ï":"iuml","Ĵ":"Jcirc","ĵ":"jcirc","Й":"Jcy","й":"jcy","𝔍":"Jfr","𝔧":"jfr","ȷ":"jmath","𝕁":"Jopf","𝕛":"jopf","𝒥":"Jscr","𝒿":"jscr","Ј":"Jsercy","ј":"jsercy","Є":"Jukcy","є":"jukcy","Κ":"Kappa","κ":"kappa","ϰ":"kappav","Ķ":"Kcedil","ķ":"kcedil","К":"Kcy","к":"kcy","𝔎":"Kfr","𝔨":"kfr","ĸ":"kgreen","Х":"KHcy","х":"khcy","Ќ":"KJcy","ќ":"kjcy","𝕂":"Kopf","𝕜":"kopf","𝒦":"Kscr","𝓀":"kscr","⇚":"lAarr","Ĺ":"Lacute","ĺ":"lacute","⦴":"laemptyv","ℒ":"Lscr","Λ":"Lambda","λ":"lambda","⟨":"lang","⟪":"Lang","⦑":"langd","⪅":"lap","«":"laquo","⇤":"larrb","⤟":"larrbfs","←":"larr","↞":"Larr","⤝":"larrfs","↫":"larrlp","⤹":"larrpl","⥳":"larrsim","↢":"larrtl","⤙":"latail","⤛":"lAtail","⪫":"lat","⪭":"late","⪭︀":"lates","⤌":"lbarr","⤎":"lBarr","❲":"lbbrk","{":"lcub","[":"lsqb","⦋":"lbrke","⦏":"lbrksld","⦍":"lbrkslu","Ľ":"Lcaron","ľ":"lcaron","Ļ":"Lcedil","ļ":"lcedil","⌈":"lceil","Л":"Lcy","л":"lcy","⤶":"ldca","“":"ldquo","⥧":"ldrdhar","⥋":"ldrushar","↲":"ldsh","≤":"le","≦":"lE","⇆":"lrarr","⟦":"lobrk","⥡":"LeftDownTeeVector","⥙":"LeftDownVectorBar","⌊":"lfloor","↼":"lharu","⇇":"llarr","⇋":"lrhar","⥎":"LeftRightVector","↤":"mapstoleft","⥚":"LeftTeeVector","⋋":"lthree","⧏":"LeftTriangleBar","⊲":"vltri","⊴":"ltrie","⥑":"LeftUpDownVector","⥠":"LeftUpTeeVector","⥘":"LeftUpVectorBar","↿":"uharl","⥒":"LeftVectorBar","⪋":"lEg","⋚":"leg","⩽":"les","⪨":"lescc","⩿":"lesdot","⪁":"lesdoto","⪃":"lesdotor","⋚︀":"lesg","⪓":"lesges","⋖":"ltdot","≶":"lg","⪡":"LessLess","≲":"lsim","⥼":"lfisht","𝔏":"Lfr","𝔩":"lfr","⪑":"lgE","⥢":"lHar","⥪":"lharul","▄":"lhblk","Љ":"LJcy","љ":"ljcy","≪":"ll","⋘":"Ll","⥫":"llhard","◺":"lltri","Ŀ":"Lmidot","ŀ":"lmidot","⎰":"lmoust","⪉":"lnap","⪇":"lne","≨":"lnE","⋦":"lnsim","⟬":"loang","⇽":"loarr","⟵":"xlarr","⟷":"xharr","⟼":"xmap","⟶":"xrarr","↬":"rarrlp","⦅":"lopar","𝕃":"Lopf","𝕝":"lopf","⨭":"loplus","⨴":"lotimes","∗":"lowast",_:"lowbar","↙":"swarr","↘":"searr","◊":"loz","(":"lpar","⦓":"lparlt","⥭":"lrhard","‎":"lrm","⊿":"lrtri","‹":"lsaquo","𝓁":"lscr","↰":"lsh","⪍":"lsime","⪏":"lsimg","‘":"lsquo","‚":"sbquo","Ł":"Lstrok","ł":"lstrok","⪦":"ltcc","⩹":"ltcir","<":"lt","⋉":"ltimes","⥶":"ltlarr","⩻":"ltquest","◃":"ltri","⦖":"ltrPar","⥊":"lurdshar","⥦":"luruhar","≨︀":"lvnE","¯":"macr","♂":"male","✠":"malt","⤅":"Map","↦":"map","↥":"mapstoup","▮":"marker","⨩":"mcomma","М":"Mcy","м":"mcy","—":"mdash","∺":"mDDot"," ":"MediumSpace","ℳ":"Mscr","𝔐":"Mfr","𝔪":"mfr","℧":"mho","µ":"micro","⫰":"midcir","∣":"mid","−":"minus","⨪":"minusdu","∓":"mp","⫛":"mlcp","⊧":"models","𝕄":"Mopf","𝕞":"mopf","𝓂":"mscr","Μ":"Mu","μ":"mu","⊸":"mumap","Ń":"Nacute","ń":"nacute","∠⃒":"nang","≉":"nap","⩰̸":"napE","≋̸":"napid","ŉ":"napos","♮":"natur","ℕ":"Nopf"," ":"nbsp","≎̸":"nbump","≏̸":"nbumpe","⩃":"ncap","Ň":"Ncaron","ň":"ncaron","Ņ":"Ncedil","ņ":"ncedil","≇":"ncong","⩭̸":"ncongdot","⩂":"ncup","Н":"Ncy","н":"ncy","–":"ndash","⤤":"nearhk","↗":"nearr","⇗":"neArr","≠":"ne","≐̸":"nedot","​":"ZeroWidthSpace","≢":"nequiv","⤨":"toea","≂̸":"nesim","\n":"NewLine","∄":"nexist","𝔑":"Nfr","𝔫":"nfr","≧̸":"ngE","≱":"nge","⩾̸":"nges","⋙̸":"nGg","≵":"ngsim","≫⃒":"nGt","≯":"ngt","≫̸":"nGtv","↮":"nharr","⇎":"nhArr","⫲":"nhpar","∋":"ni","⋼":"nis","⋺":"nisd","Њ":"NJcy","њ":"njcy","↚":"nlarr","⇍":"nlArr","‥":"nldr","≦̸":"nlE","≰":"nle","⩽̸":"nles","≮":"nlt","⋘̸":"nLl","≴":"nlsim","≪⃒":"nLt","⋪":"nltri","⋬":"nltrie","≪̸":"nLtv","∤":"nmid","⁠":"NoBreak","𝕟":"nopf","⫬":"Not","¬":"not","≭":"NotCupCap","∦":"npar","∉":"notin","≹":"ntgl","⋵̸":"notindot","⋹̸":"notinE","⋷":"notinvb","⋶":"notinvc","⧏̸":"NotLeftTriangleBar","≸":"ntlg","⪢̸":"NotNestedGreaterGreater","⪡̸":"NotNestedLessLess","∌":"notni","⋾":"notnivb","⋽":"notnivc","⊀":"npr","⪯̸":"npre","⋠":"nprcue","⧐̸":"NotRightTriangleBar","⋫":"nrtri","⋭":"nrtrie","⊏̸":"NotSquareSubset","⋢":"nsqsube","⊐̸":"NotSquareSuperset","⋣":"nsqsupe","⊂⃒":"vnsub","⊈":"nsube","⊁":"nsc","⪰̸":"nsce","⋡":"nsccue","≿̸":"NotSucceedsTilde","⊃⃒":"vnsup","⊉":"nsupe","≁":"nsim","≄":"nsime","⫽⃥":"nparsl","∂̸":"npart","⨔":"npolint","⤳̸":"nrarrc","↛":"nrarr","⇏":"nrArr","↝̸":"nrarrw","𝒩":"Nscr","𝓃":"nscr","⊄":"nsub","⫅̸":"nsubE","⊅":"nsup","⫆̸":"nsupE","Ñ":"Ntilde","ñ":"ntilde","Ν":"Nu","ν":"nu","#":"num","№":"numero"," ":"numsp","≍⃒":"nvap","⊬":"nvdash","⊭":"nvDash","⊮":"nVdash","⊯":"nVDash","≥⃒":"nvge",">⃒":"nvgt","⤄":"nvHarr","⧞":"nvinfin","⤂":"nvlArr","≤⃒":"nvle","<⃒":"nvlt","⊴⃒":"nvltrie","⤃":"nvrArr","⊵⃒":"nvrtrie","∼⃒":"nvsim","⤣":"nwarhk","↖":"nwarr","⇖":"nwArr","⤧":"nwnear","Ó":"Oacute","ó":"oacute","Ô":"Ocirc","ô":"ocirc","О":"Ocy","о":"ocy","Ő":"Odblac","ő":"odblac","⨸":"odiv","⦼":"odsold","Œ":"OElig","œ":"oelig","⦿":"ofcir","𝔒":"Ofr","𝔬":"ofr","˛":"ogon","Ò":"Ograve","ò":"ograve","⧁":"ogt","⦵":"ohbar","Ω":"ohm","⦾":"olcir","⦻":"olcross","‾":"oline","⧀":"olt","Ō":"Omacr","ō":"omacr","ω":"omega","Ο":"Omicron","ο":"omicron","⦶":"omid","𝕆":"Oopf","𝕠":"oopf","⦷":"opar","⦹":"operp","⩔":"Or","∨":"or","⩝":"ord","ℴ":"oscr","ª":"ordf","º":"ordm","⊶":"origof","⩖":"oror","⩗":"orslope","⩛":"orv","𝒪":"Oscr","Ø":"Oslash","ø":"oslash","⊘":"osol","Õ":"Otilde","õ":"otilde","⨶":"otimesas","⨷":"Otimes","Ö":"Ouml","ö":"ouml","⌽":"ovbar","⏞":"OverBrace","⎴":"tbrk","⏜":"OverParenthesis","¶":"para","⫳":"parsim","⫽":"parsl","∂":"part","П":"Pcy","п":"pcy","%":"percnt",".":"period","‰":"permil","‱":"pertenk","𝔓":"Pfr","𝔭":"pfr","Φ":"Phi","φ":"phi","ϕ":"phiv","☎":"phone","Π":"Pi","π":"pi","ϖ":"piv","ℎ":"planckh","⨣":"plusacir","⨢":"pluscir","+":"plus","⨥":"plusdu","⩲":"pluse","±":"pm","⨦":"plussim","⨧":"plustwo","⨕":"pointint","𝕡":"popf","ℙ":"Popf","£":"pound","⪷":"prap","⪻":"Pr","≺":"pr","≼":"prcue","⪯":"pre","≾":"prsim","⪹":"prnap","⪵":"prnE","⋨":"prnsim","⪳":"prE","′":"prime","″":"Prime","∏":"prod","⌮":"profalar","⌒":"profline","⌓":"profsurf","∝":"prop","⊰":"prurel","𝒫":"Pscr","𝓅":"pscr","Ψ":"Psi","ψ":"psi"," ":"puncsp","𝔔":"Qfr","𝔮":"qfr","𝕢":"qopf","ℚ":"Qopf","⁗":"qprime","𝒬":"Qscr","𝓆":"qscr","⨖":"quatint","?":"quest",'"':"quot","⇛":"rAarr","∽̱":"race","Ŕ":"Racute","ŕ":"racute","√":"Sqrt","⦳":"raemptyv","⟩":"rang","⟫":"Rang","⦒":"rangd","⦥":"range","»":"raquo","⥵":"rarrap","⇥":"rarrb","⤠":"rarrbfs","⤳":"rarrc","→":"rarr","↠":"Rarr","⤞":"rarrfs","⥅":"rarrpl","⥴":"rarrsim","⤖":"Rarrtl","↣":"rarrtl","↝":"rarrw","⤚":"ratail","⤜":"rAtail","∶":"ratio","❳":"rbbrk","}":"rcub","]":"rsqb","⦌":"rbrke","⦎":"rbrksld","⦐":"rbrkslu","Ř":"Rcaron","ř":"rcaron","Ŗ":"Rcedil","ŗ":"rcedil","⌉":"rceil","Р":"Rcy","р":"rcy","⤷":"rdca","⥩":"rdldhar","↳":"rdsh","ℜ":"Re","ℛ":"Rscr","ℝ":"Ropf","▭":"rect","⥽":"rfisht","⌋":"rfloor","𝔯":"rfr","⥤":"rHar","⇀":"rharu","⥬":"rharul","Ρ":"Rho","ρ":"rho","ϱ":"rhov","⇄":"rlarr","⟧":"robrk","⥝":"RightDownTeeVector","⥕":"RightDownVectorBar","⇉":"rrarr","⊢":"vdash","⥛":"RightTeeVector","⋌":"rthree","⧐":"RightTriangleBar","⊳":"vrtri","⊵":"rtrie","⥏":"RightUpDownVector","⥜":"RightUpTeeVector","⥔":"RightUpVectorBar","↾":"uharr","⥓":"RightVectorBar","˚":"ring","‏":"rlm","⎱":"rmoust","⫮":"rnmid","⟭":"roang","⇾":"roarr","⦆":"ropar","𝕣":"ropf","⨮":"roplus","⨵":"rotimes","⥰":"RoundImplies",")":"rpar","⦔":"rpargt","⨒":"rppolint","›":"rsaquo","𝓇":"rscr","↱":"rsh","⋊":"rtimes","▹":"rtri","⧎":"rtriltri","⧴":"RuleDelayed","⥨":"ruluhar","℞":"rx","Ś":"Sacute","ś":"sacute","⪸":"scap","Š":"Scaron","š":"scaron","⪼":"Sc","≻":"sc","≽":"sccue","⪰":"sce","⪴":"scE","Ş":"Scedil","ş":"scedil","Ŝ":"Scirc","ŝ":"scirc","⪺":"scnap","⪶":"scnE","⋩":"scnsim","⨓":"scpolint","≿":"scsim","С":"Scy","с":"scy","⋅":"sdot","⩦":"sdote","⇘":"seArr","§":"sect",";":"semi","⤩":"tosa","✶":"sext","𝔖":"Sfr","𝔰":"sfr","♯":"sharp","Щ":"SHCHcy","щ":"shchcy","Ш":"SHcy","ш":"shcy","↑":"uarr","­":"shy","Σ":"Sigma","σ":"sigma","ς":"sigmaf","∼":"sim","⩪":"simdot","≃":"sime","⪞":"simg","⪠":"simgE","⪝":"siml","⪟":"simlE","≆":"simne","⨤":"simplus","⥲":"simrarr","⨳":"smashp","⧤":"smeparsl","⌣":"smile","⪪":"smt","⪬":"smte","⪬︀":"smtes","Ь":"SOFTcy","ь":"softcy","⌿":"solbar","⧄":"solb","/":"sol","𝕊":"Sopf","𝕤":"sopf","♠":"spades","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊏":"sqsub","⊑":"sqsube","⊐":"sqsup","⊒":"sqsupe","□":"squ","𝒮":"Sscr","𝓈":"sscr","⋆":"Star","☆":"star","⊂":"sub","⋐":"Sub","⪽":"subdot","⫅":"subE","⊆":"sube","⫃":"subedot","⫁":"submult","⫋":"subnE","⊊":"subne","⪿":"subplus","⥹":"subrarr","⫇":"subsim","⫕":"subsub","⫓":"subsup","∑":"sum","♪":"sung","¹":"sup1","²":"sup2","³":"sup3","⊃":"sup","⋑":"Sup","⪾":"supdot","⫘":"supdsub","⫆":"supE","⊇":"supe","⫄":"supedot","⟉":"suphsol","⫗":"suphsub","⥻":"suplarr","⫂":"supmult","⫌":"supnE","⊋":"supne","⫀":"supplus","⫈":"supsim","⫔":"supsub","⫖":"supsup","⇙":"swArr","⤪":"swnwar","ß":"szlig","\t":"Tab","⌖":"target","Τ":"Tau","τ":"tau","Ť":"Tcaron","ť":"tcaron","Ţ":"Tcedil","ţ":"tcedil","Т":"Tcy","т":"tcy","⃛":"tdot","⌕":"telrec","𝔗":"Tfr","𝔱":"tfr","∴":"there4","Θ":"Theta","θ":"theta","ϑ":"thetav","  ":"ThickSpace"," ":"thinsp","Þ":"THORN","þ":"thorn","⨱":"timesbar","×":"times","⨰":"timesd","⌶":"topbot","⫱":"topcir","𝕋":"Topf","𝕥":"topf","⫚":"topfork","‴":"tprime","™":"trade","▵":"utri","≜":"trie","◬":"tridot","⨺":"triminus","⨹":"triplus","⧍":"trisb","⨻":"tritime","⏢":"trpezium","𝒯":"Tscr","𝓉":"tscr","Ц":"TScy","ц":"tscy","Ћ":"TSHcy","ћ":"tshcy","Ŧ":"Tstrok","ŧ":"tstrok","Ú":"Uacute","ú":"uacute","↟":"Uarr","⥉":"Uarrocir","Ў":"Ubrcy","ў":"ubrcy","Ŭ":"Ubreve","ŭ":"ubreve","Û":"Ucirc","û":"ucirc","У":"Ucy","у":"ucy","⇅":"udarr","Ű":"Udblac","ű":"udblac","⥮":"udhar","⥾":"ufisht","𝔘":"Ufr","𝔲":"ufr","Ù":"Ugrave","ù":"ugrave","⥣":"uHar","▀":"uhblk","⌜":"ulcorn","⌏":"ulcrop","◸":"ultri","Ū":"Umacr","ū":"umacr","⏟":"UnderBrace","⏝":"UnderParenthesis","⊎":"uplus","Ų":"Uogon","ų":"uogon","𝕌":"Uopf","𝕦":"uopf","⤒":"UpArrowBar","↕":"varr","υ":"upsi","ϒ":"Upsi","Υ":"Upsilon","⇈":"uuarr","⌝":"urcorn","⌎":"urcrop","Ů":"Uring","ů":"uring","◹":"urtri","𝒰":"Uscr","𝓊":"uscr","⋰":"utdot","Ũ":"Utilde","ũ":"utilde","Ü":"Uuml","ü":"uuml","⦧":"uwangle","⦜":"vangrt","⊊︀":"vsubne","⫋︀":"vsubnE","⊋︀":"vsupne","⫌︀":"vsupnE","⫨":"vBar","⫫":"Vbar","⫩":"vBarv","В":"Vcy","в":"vcy","⊩":"Vdash","⊫":"VDash","⫦":"Vdashl","⊻":"veebar","≚":"veeeq","⋮":"vellip","|":"vert","‖":"Vert","❘":"VerticalSeparator","≀":"wr","𝔙":"Vfr","𝔳":"vfr","𝕍":"Vopf","𝕧":"vopf","𝒱":"Vscr","𝓋":"vscr","⊪":"Vvdash","⦚":"vzigzag","Ŵ":"Wcirc","ŵ":"wcirc","⩟":"wedbar","≙":"wedgeq","℘":"wp","𝔚":"Wfr","𝔴":"wfr","𝕎":"Wopf","𝕨":"wopf","𝒲":"Wscr","𝓌":"wscr","𝔛":"Xfr","𝔵":"xfr","Ξ":"Xi","ξ":"xi","⋻":"xnis","𝕏":"Xopf","𝕩":"xopf","𝒳":"Xscr","𝓍":"xscr","Ý":"Yacute","ý":"yacute","Я":"YAcy","я":"yacy","Ŷ":"Ycirc","ŷ":"ycirc","Ы":"Ycy","ы":"ycy","¥":"yen","𝔜":"Yfr","𝔶":"yfr","Ї":"YIcy","ї":"yicy","𝕐":"Yopf","𝕪":"yopf","𝒴":"Yscr","𝓎":"yscr","Ю":"YUcy","ю":"yucy","ÿ":"yuml","Ÿ":"Yuml","Ź":"Zacute","ź":"zacute","Ž":"Zcaron","ž":"zcaron","З":"Zcy","з":"zcy","Ż":"Zdot","ż":"zdot","ℨ":"Zfr","Ζ":"Zeta","ζ":"zeta","𝔷":"zfr","Ж":"ZHcy","ж":"zhcy","⇝":"zigrarr","𝕫":"zopf","𝒵":"Zscr","𝓏":"zscr","‍":"zwj","‌":"zwnj"},f=/["&'<>`]/g,g={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},h=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,i=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,j=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|iacute|Uacute|plusmn|otilde|Otilde|Agrave|agrave|yacute|Yacute|oslash|Oslash|Atilde|atilde|brvbar|Ccedil|ccedil|ograve|curren|divide|Eacute|eacute|Ograve|oacute|Egrave|egrave|ugrave|frac12|frac14|frac34|Ugrave|Oacute|Iacute|ntilde|Ntilde|uacute|middot|Igrave|igrave|iquest|aacute|laquo|THORN|micro|iexcl|icirc|Icirc|Acirc|ucirc|ecirc|Ocirc|ocirc|Ecirc|Ucirc|aring|Aring|aelig|AElig|acute|pound|raquo|acirc|times|thorn|szlig|cedil|COPY|Auml|ordf|ordm|uuml|macr|Uuml|auml|Ouml|ouml|para|nbsp|Euml|quot|QUOT|euml|yuml|cent|sect|copy|sup1|sup2|sup3|Iuml|iuml|shy|eth|reg|not|yen|amp|AMP|REG|uml|ETH|deg|gt|GT|LT|lt)([=a-zA-Z0-9])?/g,k={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",
bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"},l={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"},m={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},n=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],o=String.fromCharCode,p={},q=p.hasOwnProperty,r=function(a,b){return q.call(a,b)},s=function(a,b){for(var c=-1,d=a.length;++c<d;)if(a[c]==b)return!0;return!1},t=function(a,b){if(!a)return b;var c,d={};for(c in b)d[c]=r(a,c)?a[c]:b[c];return d},u=function(a,b){var c="";return a>=55296&&a<=57343||a>1114111?(b&&w("character reference outside the permissible Unicode range"),"�"):r(m,a)?(b&&w("disallowed character reference"),m[a]):(b&&s(n,a)&&w("disallowed character reference"),a>65535&&(a-=65536,c+=o(a>>>10&1023|55296),a=56320|1023&a),c+=o(a))},v=function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"},w=function(a){throw Error("Parse error: "+a)},x=function(g,h){h=t(h,x.options);var j=h.strict;j&&i.test(g)&&w("forbidden code point");var k=h.encodeEverything,l=h.useNamedReferences,m=h.allowUnsafeSymbols;return k?(g=g.replace(b,function(a){return l&&r(e,a)?"&"+e[a]+";":v(a)}),l&&(g=g.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),l&&(g=g.replace(d,function(a){return"&"+e[a]+";"}))):l?(m||(g=g.replace(f,function(a){return"&"+e[a]+";"})),g=g.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),g=g.replace(d,function(a){return"&"+e[a]+";"})):m||(g=g.replace(f,v)),g.replace(a,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1),d=1024*(b-55296)+c-56320+65536;return"&#x"+d.toString(16).toUpperCase()+";"}).replace(c,v)};x.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1};var y=function(a,b){b=t(b,y.options);var c=b.strict;return c&&h.test(a)&&w("malformed character reference"),a.replace(j,function(a,d,e,f,g,h,i,j){var m,n,o,p,q;return d?(m=d,n=e,c&&!n&&w("character reference was not terminated by a semicolon"),u(m,c)):f?(o=f,n=g,c&&!n&&w("character reference was not terminated by a semicolon"),m=parseInt(o,16),u(m,c)):h?(p=h,r(k,p)?k[p]:(c&&w("named character reference was not terminated by a semicolon"),a)):(p=i,q=j,q&&b.isAttributeValue?(c&&"="==q&&w("`&` did not start a character reference"),a):(c&&w("named character reference was not terminated by a semicolon"),l[p]+(q||"")))})};y.options={isAttributeValue:!1,strict:!1};var z=function(a){return a.replace(f,function(a){return g[a]})},A={version:"0.5.0",encode:x,decode:y,escape:z,unescape:y};rg2.he=A}();
//# sourceMappingURL=rg2-1.5.9.min.js.map